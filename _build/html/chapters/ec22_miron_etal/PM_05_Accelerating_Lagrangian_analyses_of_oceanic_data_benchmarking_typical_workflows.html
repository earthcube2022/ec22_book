
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows &#8212; EarthCube 2022 Call for Notebooks</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Handling Highly Imbalanced Data in Machine Learning Applications" href="../ec22_okeefe_etal/README.html" />
    <link rel="prev" title="2022 EarthCube Annual meeting" href="README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.webp" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">EarthCube 2022 Call for Notebooks</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  EarthCube 2022 Call
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../sources/index.html">
   EarthCube 2022 Notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../sources/dois.html">
   Notebook DOIs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Notebook Submissions
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_kwan_etal/README.html">
   Data Cleaning with Pandas and Jupyter Notebooks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_kwan_etal/notebooks/wyk_01_data_cleaning_with_pandas_and_jupyter_notebooks.html">
     Data Cleaning with Pandas and Jupyter Notebooks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_ji_etal/README.html">
   Magnetic Polarity Inversion Line Detection and Analysis Tool
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_ji_etal/AJ_01_MPIL_Detection_and_Analysis_Tool.html">
     AJ_01_MPIL_Detection_and_Analysis_Tool
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_abduallah_etal/README.html">
   Predicting Solar Flares with Machine Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_abduallah_etal/YA_01_PredictingSolarFlareswithMachineLearning.html">
     <strong>
      Predicting Solar Flares with Machine Learning
     </strong>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_khider_etal/README.html">
   PaleoHack: Putting EarthCube tools in the hands of paleogeoscientists
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_khider_etal/DK_v1_PaleoHack.html">
     PaleoHack: Putting EarthCube tools in the hands of paleogeoscientists
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_markowsky_etal/README.html">
   Visualizing Ice Core Datasets in Python Using a Jupyter Notebook Template
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_markowsky_etal/LM_01_Visualizing_Ice_Core_Datasets_in_Python_Using_a_Jupyter_Notebook_Template.html">
     Visualizing Ice Core Datasets in Python Using a Jupyter Notebook Template
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ec22_mckay_etal/README.html">
   Database interoperability, uncertainty quantification and reproducible workflows in the paleogeosciences
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_mills_etal/README.html">
   Intro to Argovis' API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_mills_etal/WM_01_intro_to_argovis_api.html">
     Intro to Argovis’ API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_mirkovich_etal/README.html">
   Assimilative Mapping of Geospace Observations (AMGeO)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_mirkovich_etal/WM_02_AMGeO-2.0.html">
     AMGeO 2.0: Crafting an API for Geospace Data Scientists
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="README.html">
   Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_okeefe_etal/README.html">
   Handling Highly Imbalanced Data in Machine Learning Applications
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_okeefe_etal/PO_02_Handling_Highly_Imbalanced_Data_in_Machine_Learning_Applications.html">
     Handling Highly Imbalanced Data in Machine Learning Applications
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_rotti_etal/README.html">
   EC_SEP_Visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_rotti_etal/SR_01_GSEP_events_catalog_and_time_series_dataset.html">
     GSEP Event Catalog and Time Series Dataset
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_tauxe_etal/README.html">
   Jupyter Notebooks as a bridge to the MagIC Database and Open Science
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_tauxe_etal/2022_MagIC_database_and_open_science.html">
     Jupyter Notebooks as a bridge to the MagIC Database and Open Science
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ec22_yu_etal/README.html">
   ICESpark
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ec22_yu_etal/ICESpark-EarthCube-2022-Annual-Meeting.html">
     ICESpark-EarthCube-2022-Annual-Meeting
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/ec22_miron_etal/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#authors">
     Authors
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#purpose">
     Purpose
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#technical-contributions">
     Technical contributions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#methodology">
     Methodology
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#results">
     Results
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#funding">
     Funding
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#keywords">
     Keywords
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#citation">
     Citation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#acknowledgements">
     Acknowledgements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#library-import">
     Library import
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#local-library-import">
     Local library import
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-overview">
   Data Overview
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#individual-netcdfs">
     Individual NetCDFs
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dimensions">
       Dimensions
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#variables">
       Variables
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contiguous-ragged-array">
     Contiguous Ragged Array
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#xarray">
   <em>
    Xarray
   </em>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#xarray-test-1-geographical-binning-of-any-variable">
     <em>
      Xarray
     </em>
     test 1: Geographical binning of any variable
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#xarray-test-2-extract-a-given-region">
     <em>
      Xarray
     </em>
     test 2: Extract a given region
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#xarray-test-3-operations-per-trajectory">
     <em>
      Xarray
     </em>
     test 3: Operations per trajectory
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#single-statistic-per-trajectory">
       Single statistic per trajectory
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#operations-per-trajectory">
       Operations per trajectory
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#simple-operation-by-chunks-or-blocks">
         Simple operation by chunks (or blocks)
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#more-complex-operation-where-dimensions-can-change-between-input-and-output">
         More complex operation where dimensions can change between input and output
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pandas">
   <em>
    Pandas
   </em>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas-test-1-geographical-binning-of-any-variable">
     <em>
      Pandas
     </em>
     test 1: Geographical binning of any variable
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas-test-2-extract-a-given-region">
     <em>
      Pandas
     </em>
     test 2: Extract a given region
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas-test-3-single-statistic-per-trajectory">
     <em>
      Pandas
     </em>
     test 3: Single statistic per trajectory
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#awkward-array">
   <em>
    Awkward Array
   </em>
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#awkward-array-test-1-geographical-binning-of-any-variable">
     <em>
      Awkward Array
     </em>
     test 1: Geographical binning of any variable
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#awkward-array-test-2-extract-a-given-region">
     <em>
      Awkward Array
     </em>
     test 2: Extract a given region
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#awkward-array-test-3-single-statistic-per-trajectory">
     <em>
      Awkward Array
     </em>
     test 3: Single statistic per trajectory
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#numba">
     Numba
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#discussion">
   Discussion
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#benchmark-speed">
     Benchmark speed
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#feedback">
     Feedback
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#future-development">
     Future development
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="accelerating-lagrangian-analyses-of-oceanic-data-benchmarking-typical-workflows">
<h1>Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows<a class="headerlink" href="#accelerating-lagrangian-analyses-of-oceanic-data-benchmarking-typical-workflows" title="Permalink to this headline">¶</a></h1>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Author1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Miron, Philippe&quot;</span><span class="p">,</span> <span class="s2">&quot;affiliation&quot;</span><span class="p">:</span> <span class="s2">&quot;Florida State University&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;pmiron@fsu.edu&quot;</span><span class="p">,</span> <span class="s2">&quot;orcid&quot;</span><span class="p">:</span> <span class="s2">&quot;0000-0002-8520-6221&quot;</span><span class="p">}</span>
<span class="n">Author2</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Elipot, Shane&quot;</span><span class="p">,</span> <span class="s2">&quot;affiliation&quot;</span><span class="p">:</span> <span class="s2">&quot;University of Miami&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;selipot@miami.edu&quot;</span><span class="p">,</span> <span class="s2">&quot;orcid&quot;</span><span class="p">:</span> <span class="s2">&quot;0000-0001-6051-5426 &quot;</span><span class="p">}</span>
<span class="n">Author3</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lumpkin, Rick&quot;</span><span class="p">,</span> <span class="s2">&quot;affiliation&quot;</span><span class="p">:</span> <span class="s2">&quot;NOAA’s Atlantic Oceanographic and Meteorological Laboratory&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;rick.lumpkin@noaa.gov&quot;</span><span class="p">,</span> <span class="s2">&quot;orcid&quot;</span><span class="p">:</span> <span class="s2">&quot;0000-0002-6690-1704 &quot;</span><span class="p">}</span>
<span class="n">Author4</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Dano, Bertrand&quot;</span><span class="p">,</span> <span class="s2">&quot;affiliation&quot;</span><span class="p">:</span> <span class="s2">&quot;NOAA’s Atlantic Oceanographic and Meteorological Laboratory&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;danob@miami.edu&quot;</span><span class="p">,</span> <span class="s2">&quot;orcid&quot;</span><span class="p">:</span> <span class="s2">&quot;0000-0002-3372-2566&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<h1>Table of Contents<span class="tocSkip"></span></h1>
<div class="toc">
    <ul class="toc-item">
        <li>
            <span>
                <a href="#Accelerating-Lagrangian-analyses-of-oceanic-data:-benchmarking-typical-workflows" data-toc-modified-id="Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows">
                    <span class="toc-item-num">1.&nbsp;</span>Accelerating Lagrangian analyses of oceanic data: benchmarking typical workflows
                </a>
            </span>
            <ul class="toc-item">
                <li>
                    <span>
                        <a href="#Authors" data-toc-modified-id="Authors"><span class="toc-item-num">1.1&nbsp;</span>Authors</a>
                    </span>
                </li>
            </ul>
        </li>
        <li>
            <span>
                <a href="#Table-of-Content" data-toc-modified-id="Table of Content"> <span class="toc-item-num">2.&nbsp;</span>Table of Content </a>
            </span>
        </li>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Purpose" data-toc-modified-id="Purpose"><span class="toc-item-num">2.1&nbsp;</span>Purpose</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Technical-contributions" data-toc-modified-id="Technical-contributions"><span class="toc-item-num">2.2&nbsp;</span>Technical contributions</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Methodology" data-toc-modified-id="Methodology"><span class="toc-item-num">2.4&nbsp;</span>Methodology</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Results" data-toc-modified-id="Results"><span class="toc-item-num">2.4&nbsp;</span>Results</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Funding" data-toc-modified-id="Funding"><span class="toc-item-num">2.5&nbsp;</span>Funding</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Keywords" data-toc-modified-id="Keywords"><span class="toc-item-num">2.6&nbsp;</span>Keywords</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Citation" data-toc-modified-id="Citation"><span class="toc-item-num">2.7&nbsp;</span>Citation</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Acknowledgements" data-toc-modified-id="Acknowledgements"><span class="toc-item-num">2.8&nbsp;</span>Acknowledgements</a>
                </span>
            </li>
        </ul>
        <li>
            <span>
                <a href="#Setup" data-toc-modified-id="Setup"><span class="toc-item-num">3.&nbsp;</span>Setup</a>
            </span>
        </li>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Library-import" data-toc-modified-id="Library-import"><span class="toc-item-num">3.1&nbsp;</span>Library import</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Local-library-import" data-toc-modified-id="Local-library-import"><span class="toc-item-num">3.2&nbsp;</span>Local library import</a>
                </span>
            </li>
        </ul>
        <li>
            <span>
                <a href="#Data-Overview" data-toc-modified-id="Data Overview"><span class="toc-item-num">4.&nbsp;</span>Data Overview</a>
            </span>
        </li>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Individual-NetCDFs" data-toc-modified-id="Individual NetCDFs"><span class="toc-item-num">4.1&nbsp;</span>Individual NetCDFs</a>
                </span>
            </li>
            <ul class="toc-item">
              <li>
                  <span>
                      <a href="#Dimensions" data-toc-modified-id="Dimensions"><span class="toc-item-num">4.1.1&nbsp;</span>Dimensions</a>
                  </span>
              </li>
              <li>
                  <span>
                      <a href="#Variables" data-toc-modified-id="Variables"><span class="toc-item-num">4.1.2&nbsp;</span>Variables</a>
                  </span>
              </li>
            </ul>
            <li>
                <span>
                    <a href="#Contiguous-Ragged-Array" data-toc-modified-id="Contiguous Ragged Array"><span class="toc-item-num">4.2&nbsp;</span>Contiguous Ragged Array</a>
                </span>
            </li>
        </ul>
        <li>
        <span>
            <a href="#Xarray" data-toc-modified-id="Xarray"><span class="toc-item-num">5.&nbsp;</span>Xarray</a>
        </span>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Xarray-test-1:-Geographical-binning-of-any-variable" data-toc-modified-id="Xarray test 1: Geographical binning of any variable"><span class="toc-item-num">5.1&nbsp;</span>Xarray test 1: Geographical binning of any variable</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Xarray-test-2:-Extract-a-given-region" data-toc-modified-id="Xarray test 2: Extract a given region"><span class="toc-item-num">5.2&nbsp;</span>Xarray test 2: Extract a given region</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Xarray-test-3:-Operations-per-trajectory" data-toc-modified-id="Xarray test 3: Operations per trajectory"><span class="toc-item-num">5.3&nbsp;</span>Xarray test 3: Operations per trajectory</a>
                </span>
            </li>
        <ul class="toc-item">
            <li>
        <span>
            <a href="#Single-statistic-per-trajectory" data-toc-modified-id="Single statistic per trajectory"><span class="toc-item-num">5.3.1&nbsp;</span>Single statistic per trajectory</a>
        </span>
            </li>
            <li>
        <span>
            <a href="#Operations-per-trajectory" data-toc-modified-id="Operations per trajectory"><span class="toc-item-num">5.3.2&nbsp;</span>Operations per trajectory</a>
        </span>
            </li>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Simple-operation-by-chunks-(or-blocks)" data-toc-modified-id="Simple operation by chunks (or blocks)"><span class="toc-item-num">5.3.1.1&nbsp;</span>Simple operation by chunks (or blocks)</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#More-complex-operation-where-dimensions-can-change-between-input-and-output" data-toc-modified-id="More complex operation where dimensions can change between input and output"><span class="toc-item-num">5.3.1.2&nbsp;</span>More complex operation where dimensions can change between input and output</a>
                </span>
            </li>
        </ul>
        </ul>
        </ul>
        <li>
        <span>
            <a href="#Pandas" data-toc-modified-id="Pandas"><span class="toc-item-num">6.&nbsp;</span>Pandas</a>
        </span>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Pandas-test-1:-Geographical-binning-of-any-variable" data-toc-modified-id="Pandas test 1: Geographical binning of any variable"><span class="toc-item-num">6.1&nbsp;</span>Pandas test 1: Geographical binning of any variable</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Pandas-test-2:-Extract-a-given-region" data-toc-modified-id="Pandas test 2: Extract a given region"><span class="toc-item-num">6.2&nbsp;</span>Pandas test 2: Extract a given region</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Pandas-test-3:-Single-statistic-per-trajectory" data-toc-modified-id="Pandas test 3: Single statistic per trajectory"><span class="toc-item-num">6.3&nbsp;</span>Pandas test 3: Single statistic per trajectory</a>
                </span>
            </li>
        </ul>
        </li>
        <li>
        <span>
            <a href="#Awkward-Array" data-toc-modified-id="Awkward Array"><span class="toc-item-num">7.&nbsp;</span>Awkward Array</a>
        </span>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Awkward-Array-test-1:-Geographical-binning-of-any-variable" data-toc-modified-id="Awkward Array test 1: Geographical binning of any variable"><span class="toc-item-num">7.1&nbsp;</span>Awkward Array test 1: Geographical binning of any variable</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Awkward-Array-test-2:-Extract-a-given-region" data-toc-modified-id="Awkward Array test 2: Extract a given region"><span class="toc-item-num">7.2&nbsp;</span>Awkward Array test 2: Extract a given region</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Awkward-Array-test-3:-Single-statistic-per-trajectory" data-toc-modified-id="Awkward Array test 3: Single statistic per trajectory"><span class="toc-item-num">7.3&nbsp;</span>Awkward Array test 3: Single statistic per trajectory</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Numba" data-toc-modified-id="Numba"><span class="toc-item-num">7.4&nbsp;</span>Numba</a>
                </span>
            </li>
        </ul>
        </li>
        <li>
        <span>
            <a href="#Discussion" data-toc-modified-id="Discussion"><span class="toc-item-num">8.&nbsp;</span>Discussion</a>
        </span>
        <ul class="toc-item">
            <li>
                <span>
                    <a href="#Benchmark-speed" data-toc-modified-id="Benchmark speed"><span class="toc-item-num">8.1&nbsp;</span>Benchmark speed</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Feedback" data-toc-modified-id="Feedback"><span class="toc-item-num">8.2&nbsp;</span>Feedback</a>
                </span>
            </li>
            <li>
                <span>
                    <a href="#Future-development" data-toc-modified-id="Future development"><span class="toc-item-num">8.3&nbsp;</span>Future development</a>
                </span>
            </li>
        </ul>
        </li>
        <li>
        <span>
            <a href="#References" data-toc-modified-id="References"><span class="toc-item-num">9.&nbsp;</span>References</a>
        </span>
        </li>
    </ul>
</div></div>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>For data, <em>Lagrangian</em> refers to oceanic and atmosphere information acquired by observing platforms drifting with the flow they are embedded within, but also refers more broadly to the data originating from uncrewed platforms, vehicles, and animals that gather data along their unrestricted and often complex paths. Because such paths traverse both spatial and temporal dimensions, Lagrangian data often convolve spatial and temporal information that cannot always readily be organized in common data structures and stored in standard file formats with the help of common libraries and standards. As such, for both originators and users, Lagrangian data present challenges that the <a class="reference external" href="https://github.com/Cloud-Drift">EarthCube CloudDrift</a> project aims to overcome.</p>
<p>This notebook consists of systematic evaluations and comparisons of workflows for Lagrangian data, using as a basis the velocity and sea surface temperature datasets emanating from the drifting buoys of the <a class="reference external" href="https://www.aoml.noaa.gov/phod/gdp/">Global Drifter Program</a> (GDP). Specifically, we evaluate the data structure associated with common existing libraries in <em>Python</em> (<a class="reference external" href="https://docs.xarray.dev/en/stable/">xarray</a>, <a class="reference external" href="https://pandas.pydata.org">pandas</a>, and <a class="reference external" href="https://awkward-array.org/quickstart.html">Awkward Array</a>) in order to test their adequacies for performing three common Lagrangian tasks:</p>
<ol class="simple">
<li><p>binning of a variable on an spatially-fixed grid (e.g. mean temperature map),</p></li>
<li><p>extracting data within given geographical and/or temporal windows (e.g. Gulf of Mexico),</p></li>
<li><p>analyses per trajectory (e.g. single statistics, spectral estimation by Fast Fourier Transform).</p></li>
</ol>
<p>Since the <em>CloudDrift</em> project aims at accelerating the use of Lagrangian data for atmospheric, oceanic, and climate sciences, we hope that the users of this notebook will provide us with feedback on its ease of use and the intuitiveness of the proposed methods in order to guide the on-going development of the <em>clouddrift</em> <em>Python</em> package.</p>
</div>
<div class="section" id="technical-contributions">
<h2>Technical contributions<a class="headerlink" href="#technical-contributions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Description of some challenges arising from the analysis of large, heterogeneous Lagrangian datasets.</p></li>
<li><p>Description of some data formats for Lagrangian analysis with <em>Python</em>.</p></li>
<li><p>Comparison of performances of established and developing <em>Python</em> packages and libraries.</p></li>
</ul>
</div>
<div class="section" id="methodology">
<h2>Methodology<a class="headerlink" href="#methodology" title="Permalink to this headline">¶</a></h2>
<p>The notebook proceeds in three steps:</p>
<ol class="simple">
<li><p>First, we download a subset of the hourly dataset of the GDP. Specifically, we access version 2.00 (beta) of the dataset that consists of a collection of 17,324 NetCDF files, one for each drifting buoy, available from a HHTPS (or FTP) <a class="reference external" href="https://www.aoml.noaa.gov/ftp/pub/phod/lumpkin/hourly/v2.00/netcdf/">server</a> of the GDP. Alternative methods to download these data are described on the website of the <a class="reference external" href="https://www.aoml.noaa.gov/phod/gdp/hourly_data.php">GDP DAC at NOAA AOML</a> and includes a newly-formed collection from the NOAA National Centers for Environmental Information with <a class="reference external" href="https://doi.org/10.25921/x46c-3620">doi:10.25921/x46c-3620</a>. We download a subset (which size can be scaled up or down) then proceed to aggregate the data from the individual files in one single file using a suggested format (the contiguous ragged array).</p></li>
<li><p>Second, we benchmark three libraries—<em>xarray</em>, <em>Pandas</em>, and <em>Awkward Array</em>—with typical Lagrangian workflow tasks such as the geographical binning of a variable, the extraction of the data for a given region, and operations performed per drifter trajectory.</p></li>
<li><p>Third, we discuss briefly future works for the upcoming <em>clouddrift</em> library, and seek to obtain feedback from the community to guide future development.</p></li>
</ol>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>In terms of python packages, we find that <em>Pandas</em> is intuitive with a simple syntax but does not perform efficiently with a large dataset. The complete GDP hourly dataset is currently <em>only</em> ~15 GB, but as part of <em>CloudDrift</em> we also want to support larger Lagrangian datasets (&gt;100 GB). On the other hand, <em>xarray</em> can interface with <em>Dask</em> to efficiently <em>lazy-load</em> large dataset but it requires custom adaptation to operate on a ragged array. In contrast, <em>Awkward Array</em> provides a novel approach by storing alongside the data an offset index in a manner that is transparent to the user, simplifying the analysis of non-uniform Lagrangian datasets. We find that it is also <em>fast</em> and can easily interface with <em>Numba</em> to further improve performances.</p>
<p>In terms of benchmark speed, each package show similar results for the geographical binning (test 1) and the operation per trajectory (test 3) benchmarks. For the extraction of a given region (test 2), <em>xarray</em> was found to be slower than both <em>Pandas</em> and <em>Awkward Array</em>. We note that speed and performance may not the deciding factor for all users and we believe that ease of use and simple intuitive syntax is as important for the end users. For this reason, we believe that the performance of <em>Awkward Array</em> and its ease of use make it a perfect framework to develop the CloudDrift library.</p>
</div>
<div class="section" id="funding">
<h2>Funding<a class="headerlink" href="#funding" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Award1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;agency&quot;</span><span class="p">:</span> <span class="s2">&quot;NSF EarthCube&quot;</span><span class="p">,</span> <span class="s2">&quot;award_code&quot;</span><span class="p">:</span> <span class="s2">&quot;2126413&quot;</span><span class="p">,</span> <span class="s2">&quot;award_URL&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.nsf.gov/awardsearch/showAward?AWD_ID=2126413&quot;</span><span class="p">}</span>
<span class="n">Award2</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;agency&quot;</span><span class="p">:</span> <span class="s2">&quot;Atlantic Oceanographic and Meteorological Laboratory&quot;</span><span class="p">,</span> <span class="s2">&quot;award_code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;award_URL&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.aoml.noaa.gov/global-drifter-program&quot;</span><span class="p">}</span>
<span class="n">Award3</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;agency&quot;</span><span class="p">:</span> <span class="s2">&quot;NOAA’s Global Ocean Monitoring and Observing Program&quot;</span><span class="p">,</span> <span class="s2">&quot;award_code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;award_URL&quot;</span><span class="p">:</span> <span class="s2">&quot;https://globalocean.noaa.gov&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="keywords">
<h2>Keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lagrangian&quot;</span><span class="p">,</span> <span class="s2">&quot;drifters&quot;</span><span class="p">,</span> <span class="s2">&quot;data structures&quot;</span><span class="p">,</span> <span class="s2">&quot;workflow tasks&quot;</span><span class="p">,</span> <span class="s2">&quot;benchmarks&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h2>
<p>P. Miron, S. Elipot, R. Lumpkin and B. Dano, Accelerating Lagrangian analysis of oceanic data: benchmarking typical workflows, 2022, 2022 EarthCube Annual Meeting, Accessed X/Y/2022 at <a class="reference external" href="https://github.com/Cloud-Drift/earthcube-meeting-2022">https://github.com/Cloud-Drift/earthcube-meeting-2022</a></p>
</div>
<div class="section" id="acknowledgements">
<h2>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>The CloudDrift team would like to acknowledge <a class="reference external" href="https://github.com/rabernat">Dr. Ryan Abernathey</a> for suggesting to create benchmarks on typical Lagrangian workflow tasks and <a class="reference external" href="https://github.com/jpivarski">Dr. Jim Pivarski</a> for assisting with Awkward array.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="library-import">
<h2>Library import<a class="headerlink" href="#library-import" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data manipulation</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">awkward</span> <span class="k">as</span> <span class="nn">ak</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="c1"># others</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">dask</span>
<span class="kn">import</span> <span class="nn">numba</span> <span class="k">as</span> <span class="nn">nb</span>
<span class="kn">import</span> <span class="nn">functools</span>

<span class="c1"># data retrieval</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">concurrent.futures</span> 
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="c1"># visualization</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">colors</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.axes_grid1</span> <span class="kn">import</span> <span class="n">make_axes_locatable</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">MaxNLocator</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">from</span> <span class="nn">cartopy.mpl.ticker</span> <span class="kn">import</span> <span class="n">LongitudeFormatter</span><span class="p">,</span> <span class="n">LatitudeFormatter</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeature</span>
<span class="kn">import</span> <span class="nn">cmocean</span>

<span class="c1"># we will see that the GDP DAC netcdf files contain non standard values that cause warnings</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span>

<span class="c1"># default settings visualization</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> 
                     <span class="s1">&#39;xtick.major.pad&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
                     <span class="s1">&#39;ytick.major.pad&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="c1"># system information</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">psutil</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="local-library-import">
<h2>Local library import<a class="headerlink" href="#local-library-import" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To run this notebook, we need to load on a number of functions from the `preprocess.py` file found within this repository.</span>
<span class="kn">from</span> <span class="nn">preprocess</span> <span class="kn">import</span> <span class="n">create_ragged_array</span><span class="p">,</span> <span class="n">create_ak</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="data-overview">
<h1>Data Overview<a class="headerlink" href="#data-overview" title="Permalink to this headline">¶</a></h1>
<p>In the first step of this notebook, we present the current format of the <a class="reference external" href="https://www.aoml.noaa.gov/phod/gdp/">Global Drifter Program (GDP)</a> dataset, and show how to transform it into a single archival file in which each variable is stored in an ragged fashion.</p>
<p>The GDP produces two interpolated datasets of drifter position, velocity and sea surface temperature from more than 20,000 drifters that have been released since 1979. One dataset is at 6-hour resolution (<a class="reference external" href="http://dx.doi.org/10.1175/1520-0426(1996)013%3C0900:QCAIOW%3E2.0.CO;2">Hansen and Poulain 1996</a>) and the other one is at hourly resolution (<a class="reference external" href="http://dx.doi.org/10.1002/2016JC011716">Elipot et al. 2016</a>). The files, one per drifter identified by its unique identification number (ID), are updated on a quarterly basis and are available via the <a class="reference external" href="https://www.aoml.noaa.gov/ftp/pub/phod/lumpkin/hourly/v2.00/netcdf/">HTTPS server</a> of the GDP Data Assembly Center (DAC).</p>
<p>Here we use a subset of the hourly drifter dataset of the GDP by setting the variable <code class="docutils literal notranslate"><span class="pre">subset_nb_drifters</span> <span class="pre">=</span> <span class="pre">500</span></code>. The suggested number is large enough to create an interesting dataset, yet without making the downloading cumbersome and the data processing too expensive. Feel free to scale down or up this value (from 1 to 17324), but beware that if you are running this notebook in a <em>Binder there is a 2 GB memory limitation</em> (running this Notebook with <code class="docutils literal notranslate"><span class="pre">subset_nb_drifters</span> <span class="pre">=</span> <span class="pre">500</span></code> requires close to 2 GB).</p>
<p><strong>Note that you must execute Sec. 4 to create the archive (<code class="docutils literal notranslate"><span class="pre">gdp_subset.nc</span></code>) required for Sec. 5, 6, and 7. Once the ragged array is created, those sections can be executed in any order.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">subset_nb_drifters</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># you can scale up/down this number (maximum value of 17324)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># output folder and official GDP https server</span>
<span class="c1"># Note: If you are running this notebook on a local computer and have already downloaded the individual NetCDF files </span>
<span class="c1"># independently of this notebook, you can move/copy these files to the folder destination shown below, </span>
<span class="c1"># or alternatively change the variable &#39;folder&#39; to your folder with the data</span>
<span class="n">folder</span> <span class="o">=</span>  <span class="s1">&#39;data/raw/&#39;</span>
<span class="n">input_url</span> <span class="o">=</span> <span class="s1">&#39;https://www.aoml.noaa.gov/ftp/pub/phod/lumpkin/hourly/v2.00/netcdf/&#39;</span>

<span class="c1"># load the complete list of drifter IDs from the AOML https</span>
<span class="n">urlpath</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">input_url</span><span class="p">)</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">urlpath</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;drifter_[0-9]*.nc&#39;</span><span class="p">)</span>
<span class="n">filelist</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="n">list_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">3</span><span class="p">])</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filelist</span><span class="p">])</span>

<span class="c1"># Here we &quot;randomly&quot; select a subset of ID numbers but produce reproducible results</span>
<span class="c1"># by actually setting the seed of the random generator</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># reproducible results</span>
<span class="n">subset_id</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">list_id</span><span class="p">,</span> <span class="n">subset_nb_drifters</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">fetch_netcdf</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Download and save file from the given url (if not present)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">isfile</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>

<span class="c1"># Typically it should take ~2 min for 500 drifters</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Fetching the </span><span class="si">{</span><span class="n">subset_nb_drifters</span><span class="si">}</span><span class="s1"> requested netCDF files (as a reference ~2min for 500 files).&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">exector</span><span class="p">:</span>
    <span class="c1"># create list of urls and paths</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">subset_id</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;drifter_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.nc&#39;</span>
        <span class="n">urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">input_url</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>
        <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>
    
    <span class="c1"># parallel retrieving of individual netCDF files</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">tqdm</span><span class="p">(</span><span class="n">exector</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fetch_netcdf</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">files</span><span class="p">),</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fetching the 500 requested netCDF files (as a reference ~2min for 500 files).
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████| 500/500 [00:00&lt;00:00, 319104.08it/s]
</pre></div>
</div>
</div>
</div>
<div class="section" id="individual-netcdfs">
<h2>Individual NetCDFs<a class="headerlink" href="#individual-netcdfs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dimensions">
<h3>Dimensions<a class="headerlink" href="#dimensions" title="Permalink to this headline">¶</a></h3>
<p>Each individual NetCDF file contains two main dimensions for its variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">['traj']</span></code> of length 1, since there is one trajectory per file (e.g. <code class="docutils literal notranslate"><span class="pre">ID</span></code>, <code class="docutils literal notranslate"><span class="pre">deploy_date</span></code>, <code class="docutils literal notranslate"><span class="pre">deploy_lon</span></code>, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">['obs']</span></code>: of length N, with N the number of observations along the trajectory (<code class="docutils literal notranslate"><span class="pre">lon</span></code>, <code class="docutils literal notranslate"><span class="pre">lat</span></code>, <code class="docutils literal notranslate"><span class="pre">ve</span></code>, <code class="docutils literal notranslate"><span class="pre">vn</span></code>, <code class="docutils literal notranslate"><span class="pre">sst</span></code>, etc.)</p></li>
</ul>
</div>
<div class="section" id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p>In each file, there are 20 numerical variables representing estimated quantities with dimensions <code class="docutils literal notranslate"><span class="pre">['traj',</span> <span class="pre">'obs']</span></code> (where <code class="docutils literal notranslate"><span class="pre">traj</span></code> = 1 since there is only one trajectory per file). There are 11 numerical variables with dimension <code class="docutils literal notranslate"><span class="pre">['traj']</span></code> that contain metadata unique to each drifter and file (e.g. Deployment date and time). In addition, there are 2 variables with one of their dimensions being <code class="docutils literal notranslate"><span class="pre">['traj']</span></code> that also contains non-numerical metadata (e.g. Buoy type). Further metadata pertaining to an individual drifter and to the whole dataset are contained in various <em>global attributes</em> of the NetCDF file.</p>
<p>To have a “peek” at the structure of the NetCDF files (dimensions, variables, and attributes), we load the first file in our list of files as an <em>xarray</em> dataset object using the <code class="docutils literal notranslate"><span class="pre">open_dataset</span></code>function. <em>xarray</em> offers a pleasant html visualization of a dataset (expand the view by clicking on the black arrows to the left).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">decode_times</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:           (traj: 1, obs: 1095)
Dimensions without coordinates: traj, obs
Data variables: (12/33)
    ID                (traj) |S10 b&#x27;2592&#x27;
    rowsize           (traj) int32 1095
    WMO               (traj) float64 4.401e+06
    expno             (traj) float64 9.046e+03
    deploy_date       (traj) float32 9.887e+08
    deploy_lat        (traj) float64 47.43
    ...                ...
    err_sst           (traj, obs) float64 0.074 0.077 0.086 ... 0.042 -1e+34
    err_sst1          (traj, obs) float64 0.224 0.158 0.113 ... 0.107 -1e+34
    err_sst2          (traj, obs) float64 0.236 0.185 0.142 ... 0.087 0.1 -1e+34
    flg_sst           (traj, obs) float64 5.0 5.0 5.0 5.0 ... 5.0 5.0 5.0 0.0
    flg_sst1          (traj, obs) float64 5.0 5.0 5.0 5.0 ... 5.0 5.0 5.0 0.0
    flg_sst2          (traj, obs) float64 4.0 4.0 4.0 4.0 ... 4.0 4.0 2.0 0.0
Attributes: (12/72)
    title:                      Global Drifter Program hourly drifting buoy c...
    id:                         Global Drifter Program ID 2592
    location_type:              Argos
    wmo_platform_code:          4400509
    ncei_template_version:      NCEI_NetCDF_Trajectory_Template_v2
    cdm_data_type:              Trajectory
    ...                         ...
    DrogueCenterDepth:          15 m
    DrogueDetectSensor:         submergence
    acknowledgement:            Elipot et al. (2016), Elipot et al. (2021) to...
    history:                    Version 2.00.  Metadata from dirall.dat and d...
    interpolation_method:       
    imei:                       </pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-6693507a-30e3-44e0-859a-94a00583297a' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-6693507a-30e3-44e0-859a-94a00583297a' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>traj</span>: 1</li><li><span>obs</span>: 1095</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-4ade2333-bc5b-488a-bd05-1878ddf8bcd8' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-4ade2333-bc5b-488a-bd05-1878ddf8bcd8' class='xr-section-summary'  title='Expand/collapse section'>Coordinates: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'></ul></div></li><li class='xr-section-item'><input id='section-b0d76dac-6417-41e0-b6c8-2337b4ac9e80' class='xr-section-summary-in' type='checkbox'  ><label for='section-b0d76dac-6417-41e0-b6c8-2337b4ac9e80' class='xr-section-summary' >Data variables: <span>(33)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ID</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S10</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f119dcb1-c5d9-4b64-9282-dc29483778fb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f119dcb1-c5d9-4b64-9282-dc29483778fb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a8d9ccca-1537-4ca3-9110-c72933db0a12' class='xr-var-data-in' type='checkbox'><label for='data-a8d9ccca-1537-4ca3-9110-c72933db0a12' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy ID</dd><dt><span>cf_role :</span></dt><dd>trajectory_id</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;2592&#x27;], dtype=&#x27;|S10&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>rowsize</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a3c0dc68-4399-4fcd-bb70-e5438c92618d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a3c0dc68-4399-4fcd-bb70-e5438c92618d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-40769b65-ee37-45b2-8243-6caae4bc9108' class='xr-var-data-in' type='checkbox'><label for='data-40769b65-ee37-45b2-8243-6caae4bc9108' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>number of obs for this trajectory</dd><dt><span>sample_dimension :</span></dt><dd>obs</dd></dl></div><div class='xr-var-data'><pre>array([1095], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WMO</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3a915b46-d4e3-4a99-82a9-35cc56fa09b7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3a915b46-d4e3-4a99-82a9-35cc56fa09b7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-89742a57-a729-48b3-831a-8f5204c5fc97' class='xr-var-data-in' type='checkbox'><label for='data-89742a57-a729-48b3-831a-8f5204c5fc97' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>World Meteorological Organization buoy identification number</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([4400509.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>expno</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-abb1faa0-b7ad-4e36-b14d-f2821beaa7b8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-abb1faa0-b7ad-4e36-b14d-f2821beaa7b8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9d16d162-5889-41b0-a0c6-dc6d1f28b695' class='xr-var-data-in' type='checkbox'><label for='data-9d16d162-5889-41b0-a0c6-dc6d1f28b695' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Experiment number</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd><dt><span>units :</span></dt><dd>count</dd></dl></div><div class='xr-var-data'><pre>array([9046.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-384868d7-2c6f-4ee6-9b58-d43f93974662' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-384868d7-2c6f-4ee6-9b58-d43f93974662' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a962c591-be84-4f0b-bfee-3f12b3a867b0' class='xr-var-data-in' type='checkbox'><label for='data-a962c591-be84-4f0b-bfee-3f12b3a867b0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment date and time</dd><dt><span>units :</span></dt><dd>seconds since 1970-01-01 00:00:00 UTC</dd><dt><span>history :</span></dt><dd>From deplog.dat</dd></dl></div><div class='xr-var-data'><pre>array([9.886752e+08], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_lat</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2b6e8152-93e1-4b9f-9276-3eeee6a13386' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2b6e8152-93e1-4b9f-9276-3eeee6a13386' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9e133d8f-2953-4a3b-a570-bfa5b2e37464' class='xr-var-data-in' type='checkbox'><label for='data-9e133d8f-2953-4a3b-a570-bfa5b2e37464' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>history :</span></dt><dd>From deplog.dat</dd></dl></div><div class='xr-var-data'><pre>array([47.433])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_lon</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2a25aa15-7b38-4d2d-90b1-fd811e4d5524' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2a25aa15-7b38-4d2d-90b1-fd811e4d5524' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-26ebf317-e23f-414a-90a7-9e3855f194f2' class='xr-var-data-in' type='checkbox'><label for='data-26ebf317-e23f-414a-90a7-9e3855f194f2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>history :</span></dt><dd>From deplog.dat</dd></dl></div><div class='xr-var-data'><pre>array([-52.167])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e4cc951b-26e9-4f6f-a320-f0f50f8950ef' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e4cc951b-26e9-4f6f-a320-f0f50f8950ef' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2c59fbc9-460d-4bbd-a26f-b1741a0ddfeb' class='xr-var-data-in' type='checkbox'><label for='data-2c59fbc9-460d-4bbd-a26f-b1741a0ddfeb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End date and time</dd><dt><span>units :</span></dt><dd>seconds since 1970-01-01 00:00:00 UTC</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([9.926496e+08], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_lat</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-4cecb755-b93d-4172-ab0d-9233c3cf0714' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4cecb755-b93d-4172-ab0d-9233c3cf0714' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cb922429-94a6-4ea3-9532-f8b34a493278' class='xr-var-data-in' type='checkbox'><label for='data-cb922429-94a6-4ea3-9532-f8b34a493278' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([47.22])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_lon</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c57f30db-f3e6-4fb6-8f3f-ecbcf44dffd9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c57f30db-f3e6-4fb6-8f3f-ecbcf44dffd9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3feb5f36-533f-44d4-b0a7-06ca4caded9b' class='xr-var-data-in' type='checkbox'><label for='data-3feb5f36-533f-44d4-b0a7-06ca4caded9b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([-54.04])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>drogue_lost_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-42bec49a-e422-4913-9ee9-0e6ec8cabb42' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-42bec49a-e422-4913-9ee9-0e6ec8cabb42' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8cadd382-e73c-4564-a3cd-da1a8b884e9b' class='xr-var-data-in' type='checkbox'><label for='data-8cadd382-e73c-4564-a3cd-da1a8b884e9b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Date of drogue loss (missing value=drogue still attached; 0=drogue status uncertain from beginning)</dd><dt><span>units :</span></dt><dd>seconds since 1970-01-01 00:00:00 UTC</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([0.], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>typedeath</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-61208904-eff0-4cee-b308-1c81fc580c00' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-61208904-eff0-4cee-b308-1c81fc580c00' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4eff1b8a-91f0-4a79-9dd1-add65e6dcbf3' class='xr-var-data-in' type='checkbox'><label for='data-4eff1b8a-91f0-4a79-9dd1-add65e6dcbf3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Type of death (0=buoy still alive, 1=buoy ran aground, 2=picked up by vessel, 3=stop transmitting, 4=sporadic transmissions, 5=bad batteries, 6=inactive status)</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([1.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>typebuoy</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S10</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6f26f043-6883-4617-8e43-d12ce6d67586' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6f26f043-6883-4617-8e43-d12ce6d67586' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-30ffa7d9-e838-4209-8866-95735e98a2cb' class='xr-var-data-in' type='checkbox'><label for='data-30ffa7d9-e838-4209-8866-95735e98a2cb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type (see https://www.aoml.noaa.gov/phod/dac/dirall.html)</dd><dt><span>history :</span></dt><dd>From dirall.dat</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;SVP    &#x27;], dtype=&#x27;|S10&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>longitude</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-50ebcde7-c8e6-4298-b7fb-d5f34974e097' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-50ebcde7-c8e6-4298-b7fb-d5f34974e097' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-55789cbb-72f3-4da9-842c-9e0c21031b54' class='xr-var-data-in' type='checkbox'><label for='data-55789cbb-72f3-4da9-842c-9e0c21031b54' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>valid_min :</span></dt><dd>-180.f</dd><dt><span>valid_max :</span></dt><dd>180.f</dd><dt><span>standard_name :</span></dt><dd>longitude</dd></dl></div><div class='xr-var-data'><pre>array([[-52.393  , -52.39307, -52.39296, ..., -54.04518, -54.04451, -54.04369]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>latitude</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-7a826ffa-d17f-4021-b04f-f654126d0f28' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7a826ffa-d17f-4021-b04f-f654126d0f28' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7f3b5032-229f-45b8-b704-3295e250e439' class='xr-var-data-in' type='checkbox'><label for='data-7f3b5032-229f-45b8-b704-3295e250e439' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>valid_min :</span></dt><dd>-90.f</dd><dt><span>valid_max :</span></dt><dd>90.f</dd><dt><span>standard_name :</span></dt><dd>latitude</dd></dl></div><div class='xr-var-data'><pre>array([[47.30746, 47.30759, 47.30786, ..., 47.21683, 47.21565, 47.21495]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon360</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-0579ac43-8c25-4fdf-ae41-713d880bfa68' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0579ac43-8c25-4fdf-ae41-713d880bfa68' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b14eefd6-daad-4af7-9f64-ac816bc61265' class='xr-var-data-in' type='checkbox'><label for='data-b14eefd6-daad-4af7-9f64-ac816bc61265' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>valid_min :</span></dt><dd>0.f</dd><dt><span>valid_max :</span></dt><dd>360.f</dd><dt><span>standard_name :</span></dt><dd>longitude</dd></dl></div><div class='xr-var-data'><pre>array([[307.607  , 307.60693, 307.60703, ..., 305.95483, 305.95547, 305.9563 ]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-4f3a3a2f-aecf-4f54-8b6a-ce48a8dbe5af' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4f3a3a2f-aecf-4f54-8b6a-ce48a8dbe5af' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-24440e25-1bff-48f0-b046-7a2d3a209060' class='xr-var-data-in' type='checkbox'><label for='data-24440e25-1bff-48f0-b046-7a2d3a209060' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>units :</span></dt><dd>seconds since 1970-01-01 00:00:00 UTC</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>valid_min :</span></dt><dd>-90.f</dd><dt><span>valid_max :</span></dt><dd>90.f</dd><dt><span>standard_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array([[9.887040e+08, 9.887076e+08, 9.887112e+08, ..., 9.926784e+08,
        9.926820e+08, 9.926856e+08]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ve</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1b5e3d7e-25d5-4611-8097-ada322258c1c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1b5e3d7e-25d5-4611-8097-ada322258c1c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-42924de9-9bc7-480e-a75e-49f4d42b5387' class='xr-var-data-in' type='checkbox'><label for='data-42924de9-9bc7-480e-a75e-49f4d42b5387' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Eastward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd><dt><span>data_min :</span></dt><dd>-0.3424</dd><dt><span>data_max :</span></dt><dd>0.298</dd><dt><span>standard_name :</span></dt><dd>surface_eastward_sea_water_velocity</dd></dl></div><div class='xr-var-data'><pre>array([[-0.0053, -0.0053, -0.005 , ...,  0.0369,  0.0334,  0.0315]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vn</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2a07f4e5-2cd1-4061-a48a-473c3e8605cd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2a07f4e5-2cd1-4061-a48a-473c3e8605cd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4d3eb7ee-2ae5-43fb-833b-17a5aec30f8d' class='xr-var-data-in' type='checkbox'><label for='data-4d3eb7ee-2ae5-43fb-833b-17a5aec30f8d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Northward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd><dt><span>data_min :</span></dt><dd>-0.3438</dd><dt><span>data_max :</span></dt><dd>0.3677</dd><dt><span>standard_name :</span></dt><dd>surface_northward_sea_water_velocity</dd></dl></div><div class='xr-var-data'><pre>array([[0.0004, 0.0007, 0.0015, ..., 0.0284, 0.0123, 0.0094]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lat</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-846c9f36-7043-4466-bda0-9b94ad43ae45' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-846c9f36-7043-4466-bda0-9b94ad43ae45' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6e443a74-3f56-4654-b233-53a7fb3f58c2' class='xr-var-data-in' type='checkbox'><label for='data-6e443a74-3f56-4654-b233-53a7fb3f58c2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([[0.00391, 0.00345, 0.00313, ..., 0.00792, 0.00873, 0.01097]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lon</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9d0f9d4f-dfba-40ce-ae5f-24f95f4409e8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9d0f9d4f-dfba-40ce-ae5f-24f95f4409e8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9d065add-7a88-4901-8385-aa6deb191171' class='xr-var-data-in' type='checkbox'><label for='data-9d065add-7a88-4901-8385-aa6deb191171' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([[0.00797, 0.00676, 0.00586, ..., 0.00197, 0.00231, 0.00303]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_ve</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-cea5bc41-900f-471b-90a0-fb84f65acda3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cea5bc41-900f-471b-90a0-fb84f65acda3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-70fed911-7c2e-4641-ac88-4cbeeac74008' class='xr-var-data-in' type='checkbox'><label for='data-70fed911-7c2e-4641-ac88-4cbeeac74008' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in eastward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><pre>array([[0.065 , 0.0603, 0.0548, ..., 0.0127, 0.0144, 0.0153]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_vn</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-345e36eb-2f9f-448f-a1f0-13e00c651dfa' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-345e36eb-2f9f-448f-a1f0-13e00c651dfa' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5a7750c6-2987-4487-b5d2-64ffbf89df94' class='xr-var-data-in' type='checkbox'><label for='data-5a7750c6-2987-4487-b5d2-64ffbf89df94' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in northward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><pre>array([[0.0279, 0.0284, 0.029 , ..., 0.0618, 0.0861, 0.0877]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gap</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c3f8058b-8eaa-4cf8-85e0-37d43bed0402' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c3f8058b-8eaa-4cf8-85e0-37d43bed0402' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-04850e1e-b023-4048-a6fa-d38d926d7e8f' class='xr-var-data-in' type='checkbox'><label for='data-04850e1e-b023-4048-a6fa-d38d926d7e8f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time interval between previous and next location fix</dd><dt><span>units :</span></dt><dd>seconds</dd></dl></div><div class='xr-var-data'><pre>array([[15638., 15638., 15638., ..., 11405., 11405., 11405.]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-44726a09-47b2-4419-96de-6b0ddec473b2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-44726a09-47b2-4419-96de-6b0ddec473b2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7faa5e92-1292-411a-b6b6-0327aa98372e' class='xr-var-data-in' type='checkbox'><label for='data-7faa5e92-1292-411a-b6b6-0327aa98372e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comment :</span></dt><dd>Estimated near-surface sea water temperature from drifting buoy measurements. It is the sum of the fitted near-surface non-diurnal sea water temperature and fitted diurnal sea water temperature anomaly. Discrepancies may occur because of rounding.</dd></dl></div><div class='xr-var-data'><pre>array([[ 2.73472e+02,  2.73100e+02,  2.72870e+02, ...,  2.79525e+02,
         2.79639e+02, -1.00000e+34]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst1</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-17f98f49-3d3a-4284-bd7b-14f17aa54f3d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-17f98f49-3d3a-4284-bd7b-14f17aa54f3d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-02a1cd4a-ea62-4a1c-aee4-96d120b49649' class='xr-var-data-in' type='checkbox'><label for='data-02a1cd4a-ea62-4a1c-aee4-96d120b49649' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>fitted non-diurnal sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comment :</span></dt><dd>estimated near-surface non-diurnal sea water temperature from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>array([[ 2.74126e+02,  2.73760e+02,  2.73513e+02, ...,  2.79681e+02,
         2.79638e+02, -1.00000e+34]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst2</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ec116aee-da27-477a-b04f-6ac5d821422c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ec116aee-da27-477a-b04f-6ac5d821422c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5fa0aaaf-bea3-4c1d-9544-0982d659c431' class='xr-var-data-in' type='checkbox'><label for='data-5fa0aaaf-bea3-4c1d-9544-0982d659c431' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>fitted diurnal sea water temperature anomaly</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comment :</span></dt><dd>estimated near-surface diurnal sea water temperature anomaly from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>array([[-6.54e-01, -6.60e-01, -6.43e-01, ..., -1.56e-01,  1.00e-03, -1.00e+34]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-94f38a0c-69d9-43d9-8119-3323afd49532' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-94f38a0c-69d9-43d9-8119-3323afd49532' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ff8e782d-e91a-4ec0-9f39-2cade57cbcb3' class='xr-var-data-in' type='checkbox'><label for='data-ff8e782d-e91a-4ec0-9f39-2cade57cbcb3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>standard uncertainty of fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comment :</span></dt><dd>estimated one standard error of near-surface sea water temperature estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>array([[ 7.4e-02,  7.7e-02,  8.6e-02, ...,  3.8e-02,  4.2e-02, -1.0e+34]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst1</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-8ed9079f-f2bc-4cb7-b869-0270554123bc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8ed9079f-f2bc-4cb7-b869-0270554123bc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-45e195cd-60f5-41d3-8e0d-3bd7cb08efa5' class='xr-var-data-in' type='checkbox'><label for='data-45e195cd-60f5-41d3-8e0d-3bd7cb08efa5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>standard uncertainty of fitted non-diurnal sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comment :</span></dt><dd>estimated one standard error of near-surface non-diurnal sea water temperature estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>array([[ 2.24e-01,  1.58e-01,  1.13e-01, ...,  7.20e-02,  1.07e-01, -1.00e+34]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst2</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-b6e1d7d1-5ece-4e29-8c68-edb92044b5ea' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b6e1d7d1-5ece-4e29-8c68-edb92044b5ea' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6a38c329-36d5-4f05-93cc-0ae4bfca6660' class='xr-var-data-in' type='checkbox'><label for='data-6a38c329-36d5-4f05-93cc-0ae4bfca6660' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>standard uncertainty of fitted diurnal sea water temperature anomaly</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comment :</span></dt><dd>estimated one standard error of near-surface diurnal sea water temperature anomaly estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>array([[ 2.36e-01,  1.85e-01,  1.42e-01, ...,  8.70e-02,  1.00e-01, -1.00e+34]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-dac269a1-dc33-47d2-9fef-a849171231ea' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dac269a1-dc33-47d2-9fef-a849171231ea' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9cbf3054-1aff-46b2-99d9-1a9107de2f19' class='xr-var-data-in' type='checkbox'><label for='data-9cbf3054-1aff-46b2-99d9-1a9107de2f19' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>fitted sea water temperature quality flag</dd><dt><span>standard_name :</span></dt><dd>quality flag</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd><dt><span>comment :</span></dt><dd>quality flag for fitted sea water temperature</dd></dl></div><div class='xr-var-data'><pre>array([[5., 5., 5., ..., 5., 5., 0.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst1</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-742cd97b-c0dc-4946-8b32-0344504542b7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-742cd97b-c0dc-4946-8b32-0344504542b7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-50794d51-4ca2-44ed-b23c-b2e5774f09ad' class='xr-var-data-in' type='checkbox'><label for='data-50794d51-4ca2-44ed-b23c-b2e5774f09ad' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>fitted non-diurnal sea water temperature quality flag</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd><dt><span>comment :</span></dt><dd>quality flag for fitted non-diurnal sea water temperature</dd></dl></div><div class='xr-var-data'><pre>array([[5., 5., 5., ..., 5., 5., 0.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst2</span></div><div class='xr-var-dims'>(traj, obs)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-503a8fda-1295-46eb-8bdb-d8c0829b25ad' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-503a8fda-1295-46eb-8bdb-d8c0829b25ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-eb8d5ee8-b18c-4871-9273-3861fed0da7d' class='xr-var-data-in' type='checkbox'><label for='data-eb8d5ee8-b18c-4871-9273-3861fed0da7d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>fitted diurnal sea water temperature anomaly quality flag</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate,-,-,-,-</dd><dt><span>comment :</span></dt><dd>quality flag for fitted diurnal sea water temperature anomaly</dd></dl></div><div class='xr-var-data'><pre>array([[4., 4., 4., ..., 4., 2., 0.]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-3b3c8e00-b3f0-4fc4-b6bb-12eeaa439652' class='xr-section-summary-in' type='checkbox'  ><label for='section-3b3c8e00-b3f0-4fc4-b6bb-12eeaa439652' class='xr-section-summary' >Attributes: <span>(72)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>Global Drifter Program hourly drifting buoy collection</dd><dt><span>id :</span></dt><dd>Global Drifter Program ID 2592</dd><dt><span>location_type :</span></dt><dd>Argos</dd><dt><span>wmo_platform_code :</span></dt><dd>4400509</dd><dt><span>ncei_template_version :</span></dt><dd>NCEI_NetCDF_Trajectory_Template_v2</dd><dt><span>cdm_data_type :</span></dt><dd>Trajectory</dd><dt><span>featureType :</span></dt><dd>trajectory</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>time_coverage_start :</span></dt><dd>2001-05-01T08:05:00Z</dd><dt><span>time_coverage_end :</span></dt><dd>2001-06-16T10:06:00Z</dd><dt><span>geospatial_lat_min :</span></dt><dd>46.430f</dd><dt><span>geospatial_lat_max :</span></dt><dd>47.429f</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lat_resolution :</span></dt><dd>tbd</dd><dt><span>geospatial_lon_min :</span></dt><dd>-54.271f</dd><dt><span>geospatial_lon_max :</span></dt><dd>-52.335f</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>geospatial_lon_resolution :</span></dt><dd>tbd</dd><dt><span>geospatial_bounds :</span></dt><dd>polygon (  180.000  46.430,  307.665  46.430,  307.665  47.429, 180.000  47.429, 180.000  46.430</dd><dt><span>date_created :</span></dt><dd>2021-01-21T15:01:53Z</dd><dt><span>date_modified :</span></dt><dd>2021-01-21T15:01:53Z</dd><dt><span>date_issued :</span></dt><dd>2021-01-21T15:01:53Z</dd><dt><span>publisher_name :</span></dt><dd>GDP Drifter DAC</dd><dt><span>publisher_email :</span></dt><dd>aoml.dftr@noaa.gov</dd><dt><span>publisher_url :</span></dt><dd>https://www.aoml.noaa.gov/phod/gdp</dd><dt><span>licence :</span></dt><dd>freely available</dd><dt><span>processing_level :</span></dt><dd>Level 2 QC by GDP drifter DAC</dd><dt><span>metadata_link :</span></dt><dd>https://www.aoml.noaa.gov/phod/dac/dirall.html</dd><dt><span>source :</span></dt><dd>source description</dd><dt><span>uuid :</span></dt><dd>n/a</dd><dt><span>naming_authority :</span></dt><dd>n/a</dd><dt><span>contributor_name :</span></dt><dd>NOAA Global Drifter Program</dd><dt><span>contributor_role :</span></dt><dd>Data Acquisition Center</dd><dt><span>institution :</span></dt><dd>NOAA Atlantic Oceanographic and Meteorological Laboratory</dd><dt><span>creator_name :</span></dt><dd>GDP drifter DAC</dd><dt><span>creator_url :</span></dt><dd>https://www.aoml.noaa.gov/phod/gdp</dd><dt><span>creator_email :</span></dt><dd>aoml.dftr@noaa.gov</dd><dt><span>doi :</span></dt><dd>10.1002/2016JC011716TBA</dd><dt><span>summary :</span></dt><dd>Global Drifter Program hourly data</dd><dt><span>comment :</span></dt><dd>Global Drifter Program hourly data</dd><dt><span>standard_name_vocabulary :</span></dt><dd>CF Standard Name Table v30</dd><dt><span>instrument_vocabulary :</span></dt><dd>n/a</dd><dt><span>keywords_vocabulary :</span></dt><dd>n/a</dd><dt><span>keywords :</span></dt><dd>drifter, surface current, interpolated</dd><dt><span>DeployingShip :</span></dt><dd>MAERSK PLACENTIA</dd><dt><span>DeploymentStatus :</span></dt><dd>good</dd><dt><span>BuoyTypeManufacturer :</span></dt><dd>Technocean</dd><dt><span>BuoyTypeSensorArray :</span></dt><dd>SVP</dd><dt><span>CurrentProgram :</span></dt><dd>9046</dd><dt><span>PurchaserFunding :</span></dt><dd>United States</dd><dt><span>SensorUpgrade :</span></dt><dd></dd><dt><span>Transmissions :</span></dt><dd>United States</dd><dt><span>DeployingCountry :</span></dt><dd>United States</dd><dt><span>DeploymentComments :</span></dt><dd></dd><dt><span>ManufactureYear :</span></dt><dd>NaN</dd><dt><span>ManufactureMonth :</span></dt><dd>NaN</dd><dt><span>ManufactureSensorType :</span></dt><dd>SVP</dd><dt><span>ManufactureVoltage :</span></dt><dd>56 volts</dd><dt><span>FloatDiameter :</span></dt><dd>38 cm</dd><dt><span>SubsfcFloatPresence :</span></dt><dd>0</dd><dt><span>DrogueType :</span></dt><dd>HOLY098</dd><dt><span>DrogueLength :</span></dt><dd>5.5 m</dd><dt><span>DrogueBallast :</span></dt><dd>2 kg</dd><dt><span>DragAreaAboveDrogue :</span></dt><dd>16.1 m^2</dd><dt><span>DragAreaOfDrogue :</span></dt><dd>712.8 m^2</dd><dt><span>DragAreaRatio :</span></dt><dd>44.2733</dd><dt><span>DrogueCenterDepth :</span></dt><dd>15 m</dd><dt><span>DrogueDetectSensor :</span></dt><dd>submergence</dd><dt><span>acknowledgement :</span></dt><dd>Elipot et al. (2016), Elipot et al. (2021) to be submitted. Global Drifter Program quality-controlled hourly interpolated data from ocean surface drifting buoys, version 2.00. NOAA National Centers for Environmental Information. https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016JC011716TBA.</dd><dt><span>history :</span></dt><dd>Version 2.00.  Metadata from dirall.dat and deplog.dat</dd><dt><span>interpolation_method :</span></dt><dd></dd><dt><span>imei :</span></dt><dd></dd></dl></div></li></ul></div></div></div></div>
</div>
</div>
</div>
<div class="section" id="contiguous-ragged-array">
<h2>Contiguous Ragged Array<a class="headerlink" href="#contiguous-ragged-array" title="Permalink to this headline">¶</a></h2>
<p>In the GDP dataset, the number of observations varies from <code class="docutils literal notranslate"><span class="pre">len(['obs'])=13</span></code> to <code class="docutils literal notranslate"><span class="pre">len(['obs'])=66417</span></code>. As such, it seems inefficient to create bidimensional datastructure <code class="docutils literal notranslate"><span class="pre">['traj',</span> <span class="pre">'obs']</span></code>, commonly used by Lagrangian numerical simulation tools such as <a class="reference external" href="https://oceanparcels.org/">Ocean Parcels</a> and <a class="reference external" href="https://opendrift.github.io/">OpenDrift</a> that tend to generate trajectories of equal or similar lengths.</p>
<p>Here, we propose to combine the data from the individual netCDFs files into a <a class="reference external" href="https://cfconventions.org/cf-conventions/cf-conventions.html#_contiguous_ragged_array_representation"><em>contiguous ragged array</em></a> eventually written in a single NetCDF file in order to simplify data distribution, decrease metadata redundancies, and efficiently store a Lagrangian data collection of uneven lengths. The aggregation process (conducted with the <code class="docutils literal notranslate"><span class="pre">create_ragged_array</span></code> function found in the module <code class="docutils literal notranslate"><span class="pre">preprocess.py</span></code>) also converts to variables some of the metadata originally stored as attributes in the individual NetCDFs. The final structure contains 21 variables with dimension <code class="docutils literal notranslate"><span class="pre">['obs']</span></code> and 38 variables with dimension <code class="docutils literal notranslate"><span class="pre">['traj']</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">create_ragged_array</span><span class="p">(</span><span class="n">files</span><span class="p">)</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;gdp_subset.nc&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████████| 500/500 [00:08&lt;00:00, 60.40it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># using the previously downloaded files</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;data/gdp_subset.nc&#39;</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                (traj: 500, obs: 4786301)
Coordinates:
    ID                     (traj) int64 2592 6428 13566 ... 68246720 68248530
    lon                    (obs) float32 ...
    lat                    (obs) float32 ...
    time                   (obs) datetime64[ns] ...
    ids                    (obs) int64 ...
Dimensions without coordinates: traj, obs
Data variables: (12/54)
    rowsize                (traj) int64 1095 19132 6631 17906 ... 643 1843 1176
    location_type          (traj) bool False False False ... True True True
    WMO                    (traj) int32 4400509 1600536 ... 4601712 4601740
    expno                  (traj) int32 9046 9435 7325 ... 21312 21312 21312
    deploy_date            (traj) datetime64[ns] 2001-05-01 ... 1970-01-01
    deploy_lon             (traj) float32 -52.17 71.24 -97.16 ... -151.0 -143.4
    ...                     ...
    err_sst                (obs) float32 ...
    err_sst1               (obs) float32 ...
    err_sst2               (obs) float32 ...
    flg_sst                (obs) int8 ...
    flg_sst1               (obs) int8 ...
    flg_sst2               (obs) int8 ...
Attributes: (12/15)
    title:             Global Drifter Program hourly drifting buoy collection
    history:           Version 2.00.  Metadata from dirall.dat and deplog.dat
    Conventions:       CF-1.6
    date_created:      2022-05-20T14:48:40.763710
    publisher_name:    GDP Drifter DAC
    publisher_email:   aoml.dftr@noaa.gov
    ...                ...
    metadata_link:     https://www.aoml.noaa.gov/phod/dac/dirall.html
    contributor_name:  NOAA Global Drifter Program
    contributor_role:  Data Acquisition Center
    institution:       NOAA Atlantic Oceanographic and Meteorological Laboratory
    acknowledgement:   Elipot et al. (2022) to be submitted. Elipot et al. (2...
    summary:           Global Drifter Program hourly data</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c49a3942-f4be-4ebf-84b2-4cbce409e624' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c49a3942-f4be-4ebf-84b2-4cbce409e624' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>traj</span>: 500</li><li><span>obs</span>: 4786301</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-af892d44-738d-40e0-a47e-f503280af97c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-af892d44-738d-40e0-a47e-f503280af97c' class='xr-section-summary' >Coordinates: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ID</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6de941ed-0d6f-466c-b5e4-5fce98ae7909' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6de941ed-0d6f-466c-b5e4-5fce98ae7909' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8347178d-4216-46d6-84d0-2ef3f806eb3e' class='xr-var-data-in' type='checkbox'><label for='data-8347178d-4216-46d6-84d0-2ef3f806eb3e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy ID</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([    2592,     6428,    13566, ..., 68244730, 68246720, 68248530])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-14ab5d01-ef4a-4da1-967b-f2e5bdee444b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-14ab5d01-ef4a-4da1-967b-f2e5bdee444b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8f2efeac-b958-421c-b343-ec808b541019' class='xr-var-data-in' type='checkbox'><label for='data-8f2efeac-b958-421c-b343-ec808b541019' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1383c648-3605-47c9-82c0-c6e97050ceaa' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1383c648-3605-47c9-82c0-c6e97050ceaa' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ae60b3d1-5d4f-4f91-879f-4a94fac2c79d' class='xr-var-data-in' type='checkbox'><label for='data-ae60b3d1-5d4f-4f91-879f-4a94fac2c79d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-875430aa-85fb-4799-ab0f-5557971dddd1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-875430aa-85fb-4799-ab0f-5557971dddd1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-340f076d-9553-48d5-ba2e-326f07147c8a' class='xr-var-data-in' type='checkbox'><label for='data-340f076d-9553-48d5-ba2e-326f07147c8a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=datetime64[ns]]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3d4c5c6d-7dd4-4168-9c6a-c69aaed0566c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3d4c5c6d-7dd4-4168-9c6a-c69aaed0566c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8394ad48-9e24-4cf8-bd4e-123b615941de' class='xr-var-data-in' type='checkbox'><label for='data-8394ad48-9e24-4cf8-bd4e-123b615941de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=int64]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-2c486f7a-6066-4149-9a29-ecad64aaf81e' class='xr-section-summary-in' type='checkbox'  ><label for='section-2c486f7a-6066-4149-9a29-ecad64aaf81e' class='xr-section-summary' >Data variables: <span>(54)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>rowsize</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9c3157b7-2e3b-411f-9e7d-78de9d86de7e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9c3157b7-2e3b-411f-9e7d-78de9d86de7e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36f16c0b-3571-4721-bbd9-a4c3011f507e' class='xr-var-data-in' type='checkbox'><label for='data-36f16c0b-3571-4721-bbd9-a4c3011f507e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of observations per trajectory</dd><dt><span>sample_dimension :</span></dt><dd>obs</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([ 1095, 19132,  6631, ...,   643,  1843,  1176])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>location_type</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e9ec77c4-3e38-46e1-a990-236b047ddc3d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e9ec77c4-3e38-46e1-a990-236b047ddc3d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-480ab8b3-80f9-406b-bd42-f7083be47e18' class='xr-var-data-in' type='checkbox'><label for='data-480ab8b3-80f9-406b-bd42-f7083be47e18' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Satellite-based location system</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>comments :</span></dt><dd>0 (Argos), 1 (GPS)</dd></dl></div><div class='xr-var-data'><pre>array([False, False, False, ...,  True,  True,  True])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WMO</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9ec50e20-ef60-4bd1-a093-71e9b7df7999' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9ec50e20-ef60-4bd1-a093-71e9b7df7999' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-927bce7c-f8b6-4c4d-921f-eb4335eb5e85' class='xr-var-data-in' type='checkbox'><label for='data-927bce7c-f8b6-4c4d-921f-eb4335eb5e85' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>World Meteorological Organization buoy identification number</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([4400509, 1600536, 3400513, ..., 4402590, 4601712, 4601740], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>expno</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-d2120f27-0b47-471c-953b-f649e14ce57f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d2120f27-0b47-471c-953b-f649e14ce57f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-deb5ef8d-82eb-43ee-9e2b-c5c4725ab776' class='xr-var-data-in' type='checkbox'><label for='data-deb5ef8d-82eb-43ee-9e2b-c5c4725ab776' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Experiment number</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([ 9046,  9435,  7325, ..., 21312, 21312, 21312], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-71369ac9-60a9-487b-a479-7bfca2986931' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-71369ac9-60a9-487b-a479-7bfca2986931' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6902dc1a-371e-4c68-8d78-145a1bae97c0' class='xr-var-data-in' type='checkbox'><label for='data-6902dc1a-371e-4c68-8d78-145a1bae97c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment date and time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2001-05-01T00:00:00.000000000&#x27;, &#x27;2001-01-11T00:00:00.000000000&#x27;,
       &#x27;2002-02-27T00:00:00.000000000&#x27;, ..., &#x27;1970-01-01T00:00:00.000000000&#x27;,
       &#x27;1970-01-01T00:00:00.000000000&#x27;, &#x27;1970-01-01T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_lon</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-470fd939-5d63-4469-b505-3a8eb0791c75' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-470fd939-5d63-4469-b505-3a8eb0791c75' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dfa0852b-310c-4839-b991-f2511db1333e' class='xr-var-data-in' type='checkbox'><label for='data-dfa0852b-310c-4839-b991-f2511db1333e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([ -52.167,   71.238,  -97.163, ...,  -47.03 , -151.01 , -143.44 ],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_lat</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-89471a79-7a38-476e-b083-9a8ca4acbb10' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-89471a79-7a38-476e-b083-9a8ca4acbb10' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e1e98753-beb1-4ebc-8621-84a646738054' class='xr-var-data-in' type='checkbox'><label for='data-e1e98753-beb1-4ebc-8621-84a646738054' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([ 47.433, -48.187, -58.005, ...,  60.138,  24.27 ,  39.02 ],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-bde61eeb-e9b9-42f6-8ef0-ede9ab644b69' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bde61eeb-e9b9-42f6-8ef0-ede9ab644b69' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a61bcd8e-e3a6-40f4-bca8-79700d5d7cf7' class='xr-var-data-in' type='checkbox'><label for='data-a61bcd8e-e3a6-40f4-bca8-79700d5d7cf7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End date and time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2001-06-16T00:00:00.000000000&#x27;, &#x27;2003-03-29T00:00:00.000000000&#x27;,
       &#x27;2002-12-02T00:00:00.000000000&#x27;, ..., &#x27;2020-05-17T00:00:00.000000000&#x27;,
       &#x27;1970-01-01T00:00:00.000000000&#x27;, &#x27;1970-01-01T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_lat</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-95c3220e-5b88-4e7f-b8ca-047656139596' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-95c3220e-5b88-4e7f-b8ca-047656139596' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-349e7034-fc6d-4931-b682-b24ea541af82' class='xr-var-data-in' type='checkbox'><label for='data-349e7034-fc6d-4931-b682-b24ea541af82' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([ 4.722e+01, -4.494e+01, -4.866e+01, ...,  6.435e+01, -1.000e+34,
       -1.000e+34], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_lon</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f8eadabe-3d4d-41ff-a8ce-6ebb58df5412' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f8eadabe-3d4d-41ff-a8ce-6ebb58df5412' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9d8b2b76-57a5-486c-96d2-bcfcdf555629' class='xr-var-data-in' type='checkbox'><label for='data-9d8b2b76-57a5-486c-96d2-bcfcdf555629' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([-5.4040e+01, -1.3421e+02, -3.8290e+01, ..., -5.2350e+01, -1.0000e+34,
       -1.0000e+34], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>drogue_lost_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3db939c9-2b11-4ab5-b299-5081682ef4fe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3db939c9-2b11-4ab5-b299-5081682ef4fe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dabbeccc-238b-468a-93f3-f43e14d7bffe' class='xr-var-data-in' type='checkbox'><label for='data-dabbeccc-238b-468a-93f3-f43e14d7bffe' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Date and time of drogue loss</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;1970-01-01T00:00:00.000000000&#x27;, &#x27;2001-04-25T00:00:00.000000000&#x27;,
       &#x27;2002-12-02T00:00:00.000000000&#x27;, ..., &#x27;2020-04-24T00:00:00.000000000&#x27;,
       &#x27;1970-01-01T00:00:00.000000000&#x27;, &#x27;1970-01-01T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>type_death</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-481d8bde-d45b-4cdd-8cb2-9fc8be4ef52a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-481d8bde-d45b-4cdd-8cb2-9fc8be4ef52a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ac2228e4-d1be-4614-b16a-d2841a03eb0f' class='xr-var-data-in' type='checkbox'><label for='data-ac2228e4-d1be-4614-b16a-d2841a03eb0f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Type of death</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>comments :</span></dt><dd>0 (buoy still alive), 1 (buoy ran aground), 2 (picked up by vessel), 3 (stop transmitting), 4 (sporadic transmissions), 5 (bad batteries), 6 (inactive status)</dd></dl></div><div class='xr-var-data'><pre>array([1, 3, 3, ..., 2, 0, 0], dtype=int8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>type_buoy</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-b305ffb5-df39-49ce-a538-c85f5c8d8edb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b305ffb5-df39-49ce-a538-c85f5c8d8edb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bee13084-dee2-4624-a74f-0d45a7c51340' class='xr-var-data-in' type='checkbox'><label for='data-bee13084-dee2-4624-a74f-0d45a7c51340' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type (see https://www.aoml.noaa.gov/phod/dac/dirall.html)</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;SVP    &#x27;, b&#x27;SVPB   &#x27;, b&#x27;SVP    &#x27;, ..., b&#x27;SVP    &#x27;, b&#x27;SVPB   &#x27;,
       b&#x27;SVPB   &#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeploymentShip</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ecbf690f-c4ac-4da6-9d6d-9a41fa6345db' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ecbf690f-c4ac-4da6-9d6d-9a41fa6345db' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b2bbcd51-a929-4dca-877a-e1e4d9dc68a6' class='xr-var-data-in' type='checkbox'><label for='data-b2bbcd51-a929-4dca-877a-e1e4d9dc68a6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Name of deployment ship</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;MAERSK PLACENTI&#x27;, b&#x27;MARION DUFRESNE&#x27;, b&#x27;POLAR STAR&#x27;, ..., b&#x27;UNKNOWN&#x27;,
       b&#x27;ENTERPRISE&#x27;, b&#x27;Air deployed&#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeploymentStatus</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-7bc7d969-5027-45cf-804d-fc7b67be8576' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7bc7d969-5027-45cf-804d-fc7b67be8576' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e625365-1644-47e8-9c58-be224d940d8f' class='xr-var-data-in' type='checkbox'><label for='data-8e625365-1644-47e8-9c58-be224d940d8f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment status</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;good&#x27;, b&#x27;good&#x27;, b&#x27;good&#x27;, ..., b&#x27;good&#x27;, b&#x27;good&#x27;, b&#x27;good&#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>BuoyTypeManufacturer</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3f6ad2d0-1f1b-4ae2-b8eb-b937664c3ca6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3f6ad2d0-1f1b-4ae2-b8eb-b937664c3ca6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ce5b7d48-b3e8-45d8-9628-18b44b32dfce' class='xr-var-data-in' type='checkbox'><label for='data-ce5b7d48-b3e8-45d8-9628-18b44b32dfce' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type manufacturer</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;Technocean&#x27;, b&#x27;Metocean&#x27;, b&#x27;Clearwater&#x27;, ..., b&#x27;SIO&#x27;, b&#x27;SIO&#x27;, b&#x27;SIO&#x27;],
      dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>BuoyTypeSensorArray</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-4bb3a620-2e9a-4195-8611-5ff0d6470b54' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4bb3a620-2e9a-4195-8611-5ff0d6470b54' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c1ba198e-f5d7-4410-976f-12abe936e20a' class='xr-var-data-in' type='checkbox'><label for='data-c1ba198e-f5d7-4410-976f-12abe936e20a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type sensor array</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;SVP&#x27;, b&#x27;SVPBD&#x27;, b&#x27;SVP&#x27;, ..., b&#x27;SVPGHI&#x27;, b&#x27;BD2GHI&#x27;, b&#x27;BD2GHI&#x27;],
      dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>CurrentProgram</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9b351afa-f935-445c-86d4-113428fc81b0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9b351afa-f935-445c-86d4-113428fc81b0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-397de637-bf8a-4941-b5a9-75a81982bd7b' class='xr-var-data-in' type='checkbox'><label for='data-397de637-bf8a-4941-b5a9-75a81982bd7b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Current Program</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([ 9046.,  9435.,  7325., ..., 21312., 21312., 21312.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>PurchaserFunding</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a07e87a2-564f-4dfe-8d29-728b4ed567d9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a07e87a2-564f-4dfe-8d29-728b4ed567d9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c7ddec42-65da-43b6-8628-5477399fbd12' class='xr-var-data-in' type='checkbox'><label for='data-c7ddec42-65da-43b6-8628-5477399fbd12' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Purchaser funding</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;United States&#x27;, b&#x27;France&#x27;, b&#x27;NOAA&#x27;, ..., b&#x27;NOAA&#x27;, b&#x27;NOAA&#x27;, b&#x27;NOAA&#x27;],
      dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SensorUpgrade</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c37c4767-c493-4a1d-9f88-0634b108c8fe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c37c4767-c493-4a1d-9f88-0634b108c8fe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-81b4fa33-f245-4124-a2ab-536d79d0973f' class='xr-var-data-in' type='checkbox'><label for='data-81b4fa33-f245-4124-a2ab-536d79d0973f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Sensor upgrade</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;&#x27;, b&#x27;France&#x27;, b&#x27;&#x27;, ..., b&#x27;&#x27;, b&#x27;NOAA&#x27;, b&#x27;NOAA&#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Transmissions</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2d993c78-542c-43e6-9cbb-e9728130e9e4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2d993c78-542c-43e6-9cbb-e9728130e9e4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ed56d49e-4551-450a-a392-a1dd372fd17e' class='xr-var-data-in' type='checkbox'><label for='data-ed56d49e-4551-450a-a392-a1dd372fd17e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Transmissions</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;United States&#x27;, b&#x27;France&#x27;, b&#x27;NOAA&#x27;, ..., b&#x27;NOAA&#x27;, b&#x27;NOAA&#x27;, b&#x27;NOAA&#x27;],
      dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeployingCountry</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6b70cc5b-ec0d-4b5b-8686-1bfe34b19c58' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6b70cc5b-ec0d-4b5b-8686-1bfe34b19c58' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-78fd2ead-0383-4b55-a136-8cc9a998f768' class='xr-var-data-in' type='checkbox'><label for='data-78fd2ead-0383-4b55-a136-8cc9a998f768' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deploying country</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;United States&#x27;, b&#x27;France&#x27;, b&#x27;United States&#x27;, ..., b&#x27;United Kingdom&#x27;,
       b&#x27;United States&#x27;, b&#x27;United States&#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeploymentComments</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a94165df-9747-49a2-8de5-56ca74b7c42a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a94165df-9747-49a2-8de5-56ca74b7c42a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0c5b3c69-0c20-432e-9c7e-ea54631703cb' class='xr-var-data-in' type='checkbox'><label for='data-0c5b3c69-0c20-432e-9c7e-ea54631703cb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment comments</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;&#x27;, b&#x27;&#x27;, b&#x27;&#x27;, ..., b&#x27;Coordinated by &#x27;, b&#x27;&#x27;, b&#x27;Coordinated by &#x27;],
      dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureYear</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2e5baffb-aba1-4ac5-a800-c0b131f8c80d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2e5baffb-aba1-4ac5-a800-c0b131f8c80d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3d73e9f2-8c46-42bb-bf24-717c504c361f' class='xr-var-data-in' type='checkbox'><label for='data-3d73e9f2-8c46-42bb-bf24-717c504c361f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture year</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([nan, nan, nan, ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureMonth</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e7b31a9a-6f61-48af-9796-1982cb16c79b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e7b31a9a-6f61-48af-9796-1982cb16c79b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0bbdeb46-7ebe-41a0-a68e-3991ca52bb34' class='xr-var-data-in' type='checkbox'><label for='data-0bbdeb46-7ebe-41a0-a68e-3991ca52bb34' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture month</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([nan, nan, nan, ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureSensorType</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S5</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9d9b22e8-ca02-499c-b42c-cb06521fc531' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9d9b22e8-ca02-499c-b42c-cb06521fc531' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c6417e12-d8b7-4519-abeb-3ca3ab739a87' class='xr-var-data-in' type='checkbox'><label for='data-c6417e12-d8b7-4519-abeb-3ca3ab739a87' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture Sensor Type</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;SVP&#x27;, b&#x27;SVPBD&#x27;, b&#x27;SVP&#x27;, ..., b&#x27;&#x27;, b&#x27;&#x27;, b&#x27;&#x27;], dtype=&#x27;|S5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureVoltage</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-937fd546-c313-4c21-a8e7-f1c4ca2b9887' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-937fd546-c313-4c21-a8e7-f1c4ca2b9887' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7d557631-adce-4333-8124-37e3078fdbd7' class='xr-var-data-in' type='checkbox'><label for='data-7d557631-adce-4333-8124-37e3078fdbd7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture voltage</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([56., 84., 56., ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>FloatDiameter</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-32fde981-3703-4312-b25d-fa4e2f84abbf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-32fde981-3703-4312-b25d-fa4e2f84abbf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-09cf1dae-d7ec-40c8-9958-efb147d52cdb' class='xr-var-data-in' type='checkbox'><label for='data-09cf1dae-d7ec-40c8-9958-efb147d52cdb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Diameter of surface floater</dd><dt><span>units :</span></dt><dd>cm</dd></dl></div><div class='xr-var-data'><pre>array([38., 41., 34., ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SubsfcFloatPresence</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-38d52d91-8b4d-4f8c-96e2-b8ed005505df' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-38d52d91-8b4d-4f8c-96e2-b8ed005505df' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1e294a14-7530-4b0f-8f91-8d1174ed0f21' class='xr-var-data-in' type='checkbox'><label for='data-1e294a14-7530-4b0f-8f91-8d1174ed0f21' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Subsurface Float Presence</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([False,  True, False, ...,  True,  True,  True])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueType</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-141bd689-7f2c-464e-aaf1-faefc433cd2f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-141bd689-7f2c-464e-aaf1-faefc433cd2f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f0a8e754-7746-4b4d-9b19-41f03d251545' class='xr-var-data-in' type='checkbox'><label for='data-f0a8e754-7746-4b4d-9b19-41f03d251545' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>drogue_type :</span></dt><dd>Drogue Type</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;SVP    &#x27;, b&#x27;SVPB   &#x27;, b&#x27;SVP    &#x27;, ..., b&#x27;SVP    &#x27;, b&#x27;SVPB   &#x27;,
       b&#x27;SVPB   &#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueLength</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-d1471501-8e5a-40e2-a71b-f837b638af58' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d1471501-8e5a-40e2-a71b-f837b638af58' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a986b985-3bf9-4c72-85af-475c057c97e9' class='xr-var-data-in' type='checkbox'><label for='data-a986b985-3bf9-4c72-85af-475c057c97e9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Length of drogue.</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([5.5, 6.4, 5.6, ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueBallast</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e659360c-9051-40df-96aa-2fd946da48f9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e659360c-9051-40df-96aa-2fd946da48f9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-aeffea46-4b59-4555-899c-0a79a479bd4d' class='xr-var-data-in' type='checkbox'><label for='data-aeffea46-4b59-4555-899c-0a79a479bd4d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Weight of the drogue&#x27;s ballast.</dd><dt><span>units :</span></dt><dd>kg</dd></dl></div><div class='xr-var-data'><pre>array([2. , 3.5, 2. , ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DragAreaAboveDrogue</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a03b9e68-5003-4930-80fc-caa1f715adec' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a03b9e68-5003-4930-80fc-caa1f715adec' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-71d35c85-dcd9-4b11-a672-836e8e8d8135' class='xr-var-data-in' type='checkbox'><label for='data-71d35c85-dcd9-4b11-a672-836e8e8d8135' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drag area above drogue.</dd><dt><span>units :</span></dt><dd>m^2</dd></dl></div><div class='xr-var-data'><pre>array([16.1, 21. , 20.5, ...,  nan,  nan,  nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DragAreaOfDrogue</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-8d3b0638-2b7b-4e40-84d2-aefe770fa456' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8d3b0638-2b7b-4e40-84d2-aefe770fa456' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-272ed499-b80b-4e69-9a8e-d22e94a22aca' class='xr-var-data-in' type='checkbox'><label for='data-272ed499-b80b-4e69-9a8e-d22e94a22aca' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drag area drogue.</dd><dt><span>units :</span></dt><dd>m^2</dd></dl></div><div class='xr-var-data'><pre>array([712.8 , 840.  , 912.98, ...,    nan,    nan,    nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DragAreaRatio</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-816ac7d7-b6dc-4a54-b578-53600f6ddf1f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-816ac7d7-b6dc-4a54-b578-53600f6ddf1f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c9402a37-56a3-4bf2-ba33-d8992a85c347' class='xr-var-data-in' type='checkbox'><label for='data-c9402a37-56a3-4bf2-ba33-d8992a85c347' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drag area ratio</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([44.2733, 40.    , 44.5356, ...,     nan,     nan,     nan],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueCenterDepth</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-5a2406b0-849f-40bc-8321-7ab70fbe225e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5a2406b0-849f-40bc-8321-7ab70fbe225e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dff94aaa-7ec4-42c8-a8fa-d4c1d3ec7c44' class='xr-var-data-in' type='checkbox'><label for='data-dff94aaa-7ec4-42c8-a8fa-d4c1d3ec7c44' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Average depth of the drogue.</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><pre>array([15., 15., 15., ..., nan, nan, nan], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueDetectSensor</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-25e49a8c-982c-4d0c-9afa-b5b08665896a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-25e49a8c-982c-4d0c-9afa-b5b08665896a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1d4b6bd8-f8f1-4048-ac42-3293176ee58d' class='xr-var-data-in' type='checkbox'><label for='data-1d4b6bd8-f8f1-4048-ac42-3293176ee58d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drogue detection sensor</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;submergence&#x27;, b&#x27;submergence&#x27;, b&#x27;submergence&#x27;, ..., b&#x27;unknown&#x27;,
       b&#x27;unknown&#x27;, b&#x27;unknown&#x27;], dtype=&#x27;|S15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ve</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9d745711-b0b7-4bc0-a755-ae2f5bfeefa2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9d745711-b0b7-4bc0-a755-ae2f5bfeefa2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-af1294d1-ef9a-4710-9d22-4170673b53b4' class='xr-var-data-in' type='checkbox'><label for='data-af1294d1-ef9a-4710-9d22-4170673b53b4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Eastward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vn</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e78bc0f8-3919-4ffd-a374-a629b65abc6b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e78bc0f8-3919-4ffd-a374-a629b65abc6b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a45c8843-79cd-42d1-bf7a-05c83ba074f8' class='xr-var-data-in' type='checkbox'><label for='data-a45c8843-79cd-42d1-bf7a-05c83ba074f8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Northward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gap</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-fe576b1a-2ce1-43c8-aae5-2258005e692b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fe576b1a-2ce1-43c8-aae5-2258005e692b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9bfa1bb5-3757-4a1d-9255-c8623fa29e21' class='xr-var-data-in' type='checkbox'><label for='data-9bfa1bb5-3757-4a1d-9255-c8623fa29e21' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time interval between previous and next location</dd><dt><span>units :</span></dt><dd>s</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-89e22682-7551-4b9c-b75a-0462585e664d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-89e22682-7551-4b9c-b75a-0462585e664d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cfd37dc5-2a74-4387-ab5f-b9541756eab6' class='xr-var-data-in' type='checkbox'><label for='data-cfd37dc5-2a74-4387-ab5f-b9541756eab6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9db23c82-056f-46f1-9298-cd5103c4fc2f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9db23c82-056f-46f1-9298-cd5103c4fc2f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e57ff02-ef14-46ad-b4fa-3eda415436a1' class='xr-var-data-in' type='checkbox'><label for='data-8e57ff02-ef14-46ad-b4fa-3eda415436a1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_ve</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-d5c51056-cb87-4806-ac44-2fab9905804e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d5c51056-cb87-4806-ac44-2fab9905804e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6bd31f1f-fe0c-44de-b9ad-d57709b96356' class='xr-var-data-in' type='checkbox'><label for='data-6bd31f1f-fe0c-44de-b9ad-d57709b96356' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in eastward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_vn</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ead63049-34b3-4326-ab88-07dc572d5bac' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ead63049-34b3-4326-ab88-07dc572d5bac' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d85855e7-e154-4c29-9122-14349d52119f' class='xr-var-data-in' type='checkbox'><label for='data-d85855e7-e154-4c29-9122-14349d52119f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in northward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>drogue_status</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3c6a1714-2aed-434c-b290-bcd3d9dc0857' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3c6a1714-2aed-434c-b290-bcd3d9dc0857' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-16e7d99a-b429-42b7-8b3d-74f034ff1b4f' class='xr-var-data-in' type='checkbox'><label for='data-16e7d99a-b429-42b7-8b3d-74f034ff1b4f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Status indicating the presence of the drogue</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>1,0</dd><dt><span>flag_meanings :</span></dt><dd>drogued, undrogued</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=bool]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9a2e8677-3785-48c5-9483-5f0816788a2d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9a2e8677-3785-48c5-9483-5f0816788a2d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c941c100-788a-4641-8c12-bb10859a9dba' class='xr-var-data-in' type='checkbox'><label for='data-c941c100-788a-4641-8c12-bb10859a9dba' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface sea water temperature from drifting buoy measurements. It is the sum of the fitted near-surface non-diurnal sea water temperature and fitted diurnal sea water temperature anomaly. Discrepancies may occur because of rounding.</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst1</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3be78d4a-a53f-4dac-a94f-ba6eaa67e3ce' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3be78d4a-a53f-4dac-a94f-ba6eaa67e3ce' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-18cd9d57-f858-4c77-905b-bfd3d3601f01' class='xr-var-data-in' type='checkbox'><label for='data-18cd9d57-f858-4c77-905b-bfd3d3601f01' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted non-diurnal sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface non-diurnal sea water temperature from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst2</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-92d8fc4c-7620-4554-bdbd-6041c4b3e1d9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-92d8fc4c-7620-4554-bdbd-6041c4b3e1d9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-39107f9c-64f6-4a50-a7bb-bafbb54283f1' class='xr-var-data-in' type='checkbox'><label for='data-39107f9c-64f6-4a50-a7bb-bafbb54283f1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted diurnal sea water temperature anomaly</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface diurnal sea water temperature anomaly from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a1588a0b-e631-4b65-b1f6-34666714fa16' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a1588a0b-e631-4b65-b1f6-34666714fa16' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e502e07-ddd2-4940-b234-07fec0457e08' class='xr-var-data-in' type='checkbox'><label for='data-8e502e07-ddd2-4940-b234-07fec0457e08' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Standard uncertainty of fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated one standard error of near-surface sea water temperature estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst1</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c307711f-ac91-40cc-b491-f59fb1742359' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c307711f-ac91-40cc-b491-f59fb1742359' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-150b561a-9fe7-41c9-b1f7-86d02e8f3f42' class='xr-var-data-in' type='checkbox'><label for='data-150b561a-9fe7-41c9-b1f7-86d02e8f3f42' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Standard uncertainty of fitted non-diurnal sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated one standard error of near-surface non-diurnal sea water temperature estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst2</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-26ea5c79-03b6-4dbe-a019-c786b818658c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-26ea5c79-03b6-4dbe-a019-c786b818658c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b4660b13-97e3-439b-8953-c6fdcaa49bbf' class='xr-var-data-in' type='checkbox'><label for='data-b4660b13-97e3-439b-8953-c6fdcaa49bbf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Standard uncertainty of fitted diurnal sea water temperature anomaly</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated one standard error of near-surface diurnal sea water temperature anomaly estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2286a8d1-9579-4f5b-b786-840201162319' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2286a8d1-9579-4f5b-b786-840201162319' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-33fd30fb-411f-432b-a9e9-7c6d8a011de7' class='xr-var-data-in' type='checkbox'><label for='data-33fd30fb-411f-432b-a9e9-7c6d8a011de7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted sea water temperature quality flag</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=int8]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst1</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-5c9a1069-0411-4a37-b7af-5720252c1bba' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5c9a1069-0411-4a37-b7af-5720252c1bba' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-50139737-89d7-4b70-9152-0dab31674d04' class='xr-var-data-in' type='checkbox'><label for='data-50139737-89d7-4b70-9152-0dab31674d04' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted non-diurnal sea water temperature quality flag</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=int8]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst2</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ec6361f6-f385-43aa-9788-29e253e17d24' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ec6361f6-f385-43aa-9788-29e253e17d24' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-166f7020-70eb-4591-a8d1-6dba093f005f' class='xr-var-data-in' type='checkbox'><label for='data-166f7020-70eb-4591-a8d1-6dba093f005f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted diurnal sea water temperature anomaly quality flag</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd></dl></div><div class='xr-var-data'><pre>[4786301 values with dtype=int8]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9bfb5c5f-f6c6-4d95-9978-4f22e6c6e70c' class='xr-section-summary-in' type='checkbox'  ><label for='section-9bfb5c5f-f6c6-4d95-9978-4f22e6c6e70c' class='xr-section-summary' >Attributes: <span>(15)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>Global Drifter Program hourly drifting buoy collection</dd><dt><span>history :</span></dt><dd>Version 2.00.  Metadata from dirall.dat and deplog.dat</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>date_created :</span></dt><dd>2022-05-20T14:48:40.763710</dd><dt><span>publisher_name :</span></dt><dd>GDP Drifter DAC</dd><dt><span>publisher_email :</span></dt><dd>aoml.dftr@noaa.gov</dd><dt><span>publisher_url :</span></dt><dd>https://www.aoml.noaa.gov/phod/gdp</dd><dt><span>licence :</span></dt><dd>MIT License</dd><dt><span>processing_level :</span></dt><dd>Level 2 QC by GDP drifter DAC</dd><dt><span>metadata_link :</span></dt><dd>https://www.aoml.noaa.gov/phod/dac/dirall.html</dd><dt><span>contributor_name :</span></dt><dd>NOAA Global Drifter Program</dd><dt><span>contributor_role :</span></dt><dd>Data Acquisition Center</dd><dt><span>institution :</span></dt><dd>NOAA Atlantic Oceanographic and Meteorological Laboratory</dd><dt><span>acknowledgement :</span></dt><dd>Elipot et al. (2022) to be submitted. Elipot et al. (2016). Global Drifter Program quality-controlled hourly interpolated data from ocean surface drifting buoys, version 2.00. NOAA National Centers for Environmental Information. https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016JC011716TBA. Accessed [date].</dd><dt><span>summary :</span></dt><dd>Global Drifter Program hourly data</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>In this <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> object, the data from the five hundred trajectories (here ordered by ID number by choice) are stored one after the other along the <code class="docutils literal notranslate"><span class="pre">obs</span></code> dimension. To be able to track the sizes of each consecutive trajectory, we have created a new array variable in this dataset called <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> which contains all trajectory lengths.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">rowsize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;rowsize&#x27; (traj: 500)&gt;
array([ 1095, 19132,  6631, ...,   643,  1843,  1176])
Coordinates:
    ID       (traj) int64 2592 6428 13566 17927 ... 68244730 68246720 68248530
Dimensions without coordinates: traj
Attributes:
    long_name:         Number of observations per trajectory
    sample_dimension:  obs
    units:             -</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'rowsize'</div><ul class='xr-dim-list'><li><span>traj</span>: 500</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-df779aca-7936-473c-af82-eff915faba9e' class='xr-array-in' type='checkbox' checked><label for='section-df779aca-7936-473c-af82-eff915faba9e' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>1095 19132 6631 17906 5738 9897 9806 ... 221 658 657 643 1843 1176</span></div><div class='xr-array-data'><pre>array([ 1095, 19132,  6631, ...,   643,  1843,  1176])</pre></div></div></li><li class='xr-section-item'><input id='section-0ca6ac06-df0c-4113-93bb-a45decdadfc8' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0ca6ac06-df0c-4113-93bb-a45decdadfc8' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ID</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>2592 6428 ... 68246720 68248530</div><input id='attrs-81f93a31-6dcd-4f4f-8da8-3b3492a6bc79' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-81f93a31-6dcd-4f4f-8da8-3b3492a6bc79' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-226a808d-357d-4866-a109-100915005e7f' class='xr-var-data-in' type='checkbox'><label for='data-226a808d-357d-4866-a109-100915005e7f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy ID</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([    2592,     6428,    13566, ..., 68244730, 68246720, 68248530])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1cb2f358-c48e-49ac-a340-657589cfd36d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1cb2f358-c48e-49ac-a340-657589cfd36d' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of observations per trajectory</dd><dt><span>sample_dimension :</span></dt><dd>obs</dd><dt><span>units :</span></dt><dd>-</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>In summary, we find that the structure of such a contiguous ragged array is perhaps not as straightforward as a two-dimensional array, but nevertheless it has several advantages:</p>
<ul class="simple">
<li><p>Only one file is needed to hold the complete dataset and less storage space is needed than for 2D matrix</p></li>
<li><p>The extra <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> variable is a small addition to the original data that will be useful to access data per trajectory (see next section)</p></li>
<li><p>It should be efficient to perform reduce operation (e.g. <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">std</span></code>, etc.) on the full dataset since the data is stored in a continuous array.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">ds</span>
</pre></div>
</div>
</div>
</div>
<p>In the second and next step of the notebook, we benchmark different data science <em>Python</em> libraries. For this, the following sections present three typical Lagrangian tasks which are conducted successively using <em>xarray</em>, <em>Pandas</em>, and finally <em>Awkward Arrays</em>.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="xarray">
<h1><em>Xarray</em><a class="headerlink" href="#xarray" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">path_gdp</span> <span class="o">=</span> <span class="s1">&#39;data/gdp_subset.nc&#39;</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">path_gdp</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="p">{})</span> <span class="c1"># chunks={} to automatically select chunks size</span>
</pre></div>
</div>
</div>
</div>
<p>The <a class="reference external" href="https://docs.xarray.dev/en/stable/"><em>xarray</em></a> package provides a nice html interface that allows us to quickly scroll to the variables of the xr.Dataset, look at its attributes, and get information about the underlying data structure. Xarray also supports reading the data in <em>chunks</em> which are pieces of the underlying data, represented as many <em>NumPy</em> (or <em>NumPy</em>-like) arrays. The size of the <em>chunks</em> is critical to optimize advanced algorithms. Using the default settings (with <code class="docutils literal notranslate"><span class="pre">chunks={}</span></code>), we can see that there is only one chunk per dimension, since the length of one of the variable can easily fit in memory (click on the disk symbol to the right to expand the information and visually see the chunk size).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                (traj: 500, obs: 4786301)
Coordinates:
    ID                     (traj) int64 dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    lon                    (obs) float32 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    lat                    (obs) float32 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    time                   (obs) datetime64[ns] dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    ids                    (obs) int64 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
Dimensions without coordinates: traj, obs
Data variables: (12/54)
    rowsize                (traj) int64 dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    location_type          (traj) bool dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    WMO                    (traj) int32 dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    expno                  (traj) int32 dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    deploy_date            (traj) datetime64[ns] dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    deploy_lon             (traj) float32 dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;
    ...                     ...
    err_sst                (obs) float32 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    err_sst1               (obs) float32 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    err_sst2               (obs) float32 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    flg_sst                (obs) int8 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    flg_sst1               (obs) int8 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
    flg_sst2               (obs) int8 dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;
Attributes: (12/15)
    title:             Global Drifter Program hourly drifting buoy collection
    history:           Version 2.00.  Metadata from dirall.dat and deplog.dat
    Conventions:       CF-1.6
    date_created:      2022-05-20T14:48:40.763710
    publisher_name:    GDP Drifter DAC
    publisher_email:   aoml.dftr@noaa.gov
    ...                ...
    metadata_link:     https://www.aoml.noaa.gov/phod/dac/dirall.html
    contributor_name:  NOAA Global Drifter Program
    contributor_role:  Data Acquisition Center
    institution:       NOAA Atlantic Oceanographic and Meteorological Laboratory
    acknowledgement:   Elipot et al. (2022) to be submitted. Elipot et al. (2...
    summary:           Global Drifter Program hourly data</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-116f63de-b558-4298-ac79-2567ba2ef6c2' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-116f63de-b558-4298-ac79-2567ba2ef6c2' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>traj</span>: 500</li><li><span>obs</span>: 4786301</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-9fc1f62b-db6a-4f4d-b52c-d149beaac776' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9fc1f62b-db6a-4f4d-b52c-d149beaac776' class='xr-section-summary' >Coordinates: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ID</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-5628318b-fe28-42b8-b048-cc1b3c46041d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5628318b-fe28-42b8-b048-cc1b3c46041d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9de36f5b-d1b3-4832-b8f3-08466ae95495' class='xr-var-data-in' type='checkbox'><label for='data-9de36f5b-d1b3-4832-b8f3-08466ae95495' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy ID</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 3.91 kiB </td>
                        <td> 3.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-21158a9f-1860-46fe-93cf-745c69f35fa8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-21158a9f-1860-46fe-93cf-745c69f35fa8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-532ac473-215d-4cb5-a9bd-f080fa524312' class='xr-var-data-in' type='checkbox'><label for='data-532ac473-215d-4cb5-a9bd-f080fa524312' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-7d25a86f-7485-460a-9b44-1389371a26d5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7d25a86f-7485-460a-9b44-1389371a26d5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a7372c74-8c18-48b2-b91c-7c3c6d07be20' class='xr-var-data-in' type='checkbox'><label for='data-a7372c74-8c18-48b2-b91c-7c3c6d07be20' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-493247f4-4986-4e2d-b40c-66d28b56e797' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-493247f4-4986-4e2d-b40c-66d28b56e797' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f12c9019-1071-4be0-8767-5b58430c13e8' class='xr-var-data-in' type='checkbox'><label for='data-f12c9019-1071-4be0-8767-5b58430c13e8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 36.52 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-59f0967f-44d0-4d76-8624-e0d0e545c17b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-59f0967f-44d0-4d76-8624-e0d0e545c17b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a51dcb3e-bd26-4fc8-8f4c-2a1003a504bc' class='xr-var-data-in' type='checkbox'><label for='data-a51dcb3e-bd26-4fc8-8f4c-2a1003a504bc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 36.52 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-a9cc62c3-a159-4a74-bcd3-757a555a8b3e' class='xr-section-summary-in' type='checkbox'  ><label for='section-a9cc62c3-a159-4a74-bcd3-757a555a8b3e' class='xr-section-summary' >Data variables: <span>(54)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>rowsize</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-ef8587cf-37be-451d-a278-387e82aaba5e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ef8587cf-37be-451d-a278-387e82aaba5e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-63a9a6a2-b4ab-4e7b-b26c-cce1a36fa568' class='xr-var-data-in' type='checkbox'><label for='data-63a9a6a2-b4ab-4e7b-b26c-cce1a36fa568' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Number of observations per trajectory</dd><dt><span>sample_dimension :</span></dt><dd>obs</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 3.91 kiB </td>
                        <td> 3.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>location_type</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-54c513ae-f3d8-46ee-a7f7-205dc5da933c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-54c513ae-f3d8-46ee-a7f7-205dc5da933c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f4caf0c6-b446-449f-84ce-c40440a2cb82' class='xr-var-data-in' type='checkbox'><label for='data-f4caf0c6-b446-449f-84ce-c40440a2cb82' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Satellite-based location system</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>comments :</span></dt><dd>0 (Argos), 1 (GPS)</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 500 B </td>
                        <td> 500 B </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> bool </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WMO</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-ff5beeef-bcf6-40ec-a288-58ee0aab5591' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ff5beeef-bcf6-40ec-a288-58ee0aab5591' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9d0dc845-e60e-40d5-8c7a-bdb50c01592f' class='xr-var-data-in' type='checkbox'><label for='data-9d0dc845-e60e-40d5-8c7a-bdb50c01592f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>World Meteorological Organization buoy identification number</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>expno</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-331071ce-2a7d-4e2f-8957-94df5f22d993' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-331071ce-2a7d-4e2f-8957-94df5f22d993' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9c4bd8ee-8ee7-41dd-a7f3-329e43f35d4d' class='xr-var-data-in' type='checkbox'><label for='data-9c4bd8ee-8ee7-41dd-a7f3-329e43f35d4d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Experiment number</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-fed409cf-83aa-410a-b848-956073b9eb62' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fed409cf-83aa-410a-b848-956073b9eb62' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bf7c1c2d-cbf2-4312-ac38-07c2c9aa6272' class='xr-var-data-in' type='checkbox'><label for='data-bf7c1c2d-cbf2-4312-ac38-07c2c9aa6272' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment date and time</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 3.91 kiB </td>
                        <td> 3.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_lon</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-e6cdd375-b71a-4807-89f9-45deb6d933a6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6cdd375-b71a-4807-89f9-45deb6d933a6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4af4003a-364f-4a53-a63a-d312627e7823' class='xr-var-data-in' type='checkbox'><label for='data-4af4003a-364f-4a53-a63a-d312627e7823' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>deploy_lat</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-9a2fc379-bb08-4594-92e4-954ec5764673' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9a2fc379-bb08-4594-92e4-954ec5764673' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-61c4a2c0-3ee0-48a6-821b-a1008528411d' class='xr-var-data-in' type='checkbox'><label for='data-61c4a2c0-3ee0-48a6-821b-a1008528411d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-86a8b624-424f-4f79-a3a5-4b6c9937c6e9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-86a8b624-424f-4f79-a3a5-4b6c9937c6e9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-18e359ed-a43e-434f-bf4b-3d9c06168266' class='xr-var-data-in' type='checkbox'><label for='data-18e359ed-a43e-434f-bf4b-3d9c06168266' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End date and time</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 3.91 kiB </td>
                        <td> 3.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_lat</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-6aee36d9-286f-4809-b4c2-6f421f357aca' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6aee36d9-286f-4809-b4c2-6f421f357aca' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ce30fc38-db8b-4f98-a1a5-b24c5db75cc6' class='xr-var-data-in' type='checkbox'><label for='data-ce30fc38-db8b-4f98-a1a5-b24c5db75cc6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>end_lon</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-54032eda-0031-4314-ad89-80ae81e2f82e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-54032eda-0031-4314-ad89-80ae81e2f82e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6d91e144-bd7b-4bb0-add0-caa74701ef00' class='xr-var-data-in' type='checkbox'><label for='data-6d91e144-bd7b-4bb0-add0-caa74701ef00' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>End longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>drogue_lost_date</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-b39d81f1-0de5-4077-a3b5-7c275cfa8227' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b39d81f1-0de5-4077-a3b5-7c275cfa8227' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1268944b-57c5-4bd3-b57e-67b44c7c505b' class='xr-var-data-in' type='checkbox'><label for='data-1268944b-57c5-4bd3-b57e-67b44c7c505b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Date and time of drogue loss</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 3.91 kiB </td>
                        <td> 3.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>type_death</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-23b8d498-be88-4e0f-b767-ad81fdfdefed' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-23b8d498-be88-4e0f-b767-ad81fdfdefed' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dc71db50-79a0-4f1d-af32-e72ade5711d6' class='xr-var-data-in' type='checkbox'><label for='data-dc71db50-79a0-4f1d-af32-e72ade5711d6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Type of death</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>comments :</span></dt><dd>0 (buoy still alive), 1 (buoy ran aground), 2 (picked up by vessel), 3 (stop transmitting), 4 (sporadic transmissions), 5 (bad batteries), 6 (inactive status)</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 500 B </td>
                        <td> 500 B </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int8 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>type_buoy</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-43795253-2b4a-4377-a3a5-ff0d013b8c5b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-43795253-2b4a-4377-a3a5-ff0d013b8c5b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4b389821-b3b2-4b1e-a8e4-60600cf69c22' class='xr-var-data-in' type='checkbox'><label for='data-4b389821-b3b2-4b1e-a8e4-60600cf69c22' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type (see https://www.aoml.noaa.gov/phod/dac/dirall.html)</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeploymentShip</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-8b92485e-fb2d-42b2-9ac8-1afa10e42e80' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8b92485e-fb2d-42b2-9ac8-1afa10e42e80' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bcdddc8a-1279-4177-8d6f-30c4c8322cbb' class='xr-var-data-in' type='checkbox'><label for='data-bcdddc8a-1279-4177-8d6f-30c4c8322cbb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Name of deployment ship</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeploymentStatus</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-77f20fd6-1812-48f4-b162-90f9ae31ae18' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-77f20fd6-1812-48f4-b162-90f9ae31ae18' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-09f35ad6-630b-4642-a29f-05954ff76e9d' class='xr-var-data-in' type='checkbox'><label for='data-09f35ad6-630b-4642-a29f-05954ff76e9d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment status</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>BuoyTypeManufacturer</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-b774ee80-26d7-47ad-87a2-248f371a3062' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b774ee80-26d7-47ad-87a2-248f371a3062' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9bfad035-7b75-4ead-9ff7-058d84b5829f' class='xr-var-data-in' type='checkbox'><label for='data-9bfad035-7b75-4ead-9ff7-058d84b5829f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type manufacturer</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>BuoyTypeSensorArray</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-bc292488-ff8b-4425-adc3-ed353fdce63a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bc292488-ff8b-4425-adc3-ed353fdce63a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-59efe4a9-b3ef-4022-b620-459212583831' class='xr-var-data-in' type='checkbox'><label for='data-59efe4a9-b3ef-4022-b620-459212583831' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Buoy type sensor array</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>CurrentProgram</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-9b3c1183-e81f-4f60-a576-9c32c403f856' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9b3c1183-e81f-4f60-a576-9c32c403f856' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-231ddee0-bc3a-4217-a96d-0014a2f9fc8a' class='xr-var-data-in' type='checkbox'><label for='data-231ddee0-bc3a-4217-a96d-0014a2f9fc8a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Current Program</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 3.91 kiB </td>
                        <td> 3.91 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>PurchaserFunding</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-7ee40196-fde6-476e-87d8-21e27a691708' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7ee40196-fde6-476e-87d8-21e27a691708' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ff62d5e7-4a52-40a5-86c2-c45c251a9603' class='xr-var-data-in' type='checkbox'><label for='data-ff62d5e7-4a52-40a5-86c2-c45c251a9603' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Purchaser funding</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SensorUpgrade</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-2081014d-d797-4464-97af-5c2f170262a2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2081014d-d797-4464-97af-5c2f170262a2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dfe620c6-2cad-4807-a4b0-4b8ebcd540df' class='xr-var-data-in' type='checkbox'><label for='data-dfe620c6-2cad-4807-a4b0-4b8ebcd540df' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Sensor upgrade</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Transmissions</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-5070bf47-214a-4269-a254-9bd73d237342' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5070bf47-214a-4269-a254-9bd73d237342' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d880b3ec-8b18-45b3-bf01-6d3b2f072b32' class='xr-var-data-in' type='checkbox'><label for='data-d880b3ec-8b18-45b3-bf01-6d3b2f072b32' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Transmissions</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeployingCountry</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-4333c5ad-a424-4371-a43a-db21b55c6376' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4333c5ad-a424-4371-a43a-db21b55c6376' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0514c46c-8df5-45c2-924c-04092564b4b4' class='xr-var-data-in' type='checkbox'><label for='data-0514c46c-8df5-45c2-924c-04092564b4b4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deploying country</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DeploymentComments</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-f4902603-b011-437f-a5d1-204664b1becc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f4902603-b011-437f-a5d1-204664b1becc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-22eb5df5-00b9-456f-a01f-03cc7ec6cd56' class='xr-var-data-in' type='checkbox'><label for='data-22eb5df5-00b9-456f-a01f-03cc7ec6cd56' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Deployment comments</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureYear</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-0ff7518a-246b-4e49-ac65-90ccd6efecd9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0ff7518a-246b-4e49-ac65-90ccd6efecd9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-16dd9f24-2ceb-4740-9e80-3a87e0426bb1' class='xr-var-data-in' type='checkbox'><label for='data-16dd9f24-2ceb-4740-9e80-3a87e0426bb1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture year</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureMonth</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-9fd3a891-a2c2-4788-b193-f1960008001b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9fd3a891-a2c2-4788-b193-f1960008001b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2510994f-34dd-4b6f-acc4-5100f4d9aaf3' class='xr-var-data-in' type='checkbox'><label for='data-2510994f-34dd-4b6f-acc4-5100f4d9aaf3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture month</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureSensorType</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S5</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-6984c280-3fe3-4258-8d16-678dfc05e636' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6984c280-3fe3-4258-8d16-678dfc05e636' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5e51a19f-3a8c-4548-b309-4d79057d685c' class='xr-var-data-in' type='checkbox'><label for='data-5e51a19f-3a8c-4548-b309-4d79057d685c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture Sensor Type</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 2.44 kiB </td>
                        <td> 2.44 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S5 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ManufactureVoltage</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-1b65efe4-51d8-4461-9f92-a1d3d90ed0bb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1b65efe4-51d8-4461-9f92-a1d3d90ed0bb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0f01ce58-09f7-43f1-a2ce-f89e888badc9' class='xr-var-data-in' type='checkbox'><label for='data-0f01ce58-09f7-43f1-a2ce-f89e888badc9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Manufacture voltage</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>FloatDiameter</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-0ac8ead6-e157-4f8d-8baf-8b805498f97c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0ac8ead6-e157-4f8d-8baf-8b805498f97c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2f8fd407-7116-4048-9846-4d4ffd3df8dd' class='xr-var-data-in' type='checkbox'><label for='data-2f8fd407-7116-4048-9846-4d4ffd3df8dd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Diameter of surface floater</dd><dt><span>units :</span></dt><dd>cm</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SubsfcFloatPresence</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-822777aa-35c3-487f-9394-d70c9aa42242' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-822777aa-35c3-487f-9394-d70c9aa42242' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-92579ef7-15b0-4bcf-952d-682277df2c43' class='xr-var-data-in' type='checkbox'><label for='data-92579ef7-15b0-4bcf-952d-682277df2c43' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Subsurface Float Presence</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 500 B </td>
                        <td> 500 B </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> bool </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueType</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-fb84f261-b2d2-45a6-96a0-feaff0f17d4e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fb84f261-b2d2-45a6-96a0-feaff0f17d4e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3a39de6f-ed8e-4e2a-b355-cbd46fb9b2ae' class='xr-var-data-in' type='checkbox'><label for='data-3a39de6f-ed8e-4e2a-b355-cbd46fb9b2ae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>drogue_type :</span></dt><dd>Drogue Type</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueLength</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-8f38f524-9705-4246-bac2-77a526d7cda4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8f38f524-9705-4246-bac2-77a526d7cda4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a9fa89f-6787-4f00-a667-a38541dfca7a' class='xr-var-data-in' type='checkbox'><label for='data-2a9fa89f-6787-4f00-a667-a38541dfca7a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Length of drogue.</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueBallast</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-6468cb02-a002-414d-bf63-4d631654ac62' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6468cb02-a002-414d-bf63-4d631654ac62' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-88a3191d-70e1-41e3-bf6a-9789cf499cc6' class='xr-var-data-in' type='checkbox'><label for='data-88a3191d-70e1-41e3-bf6a-9789cf499cc6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Weight of the drogue&#x27;s ballast.</dd><dt><span>units :</span></dt><dd>kg</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DragAreaAboveDrogue</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-a9181dc0-8def-4d5e-b81f-a01293e9da43' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a9181dc0-8def-4d5e-b81f-a01293e9da43' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-19476b66-3fe7-4d92-b642-fb8be0ed856f' class='xr-var-data-in' type='checkbox'><label for='data-19476b66-3fe7-4d92-b642-fb8be0ed856f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drag area above drogue.</dd><dt><span>units :</span></dt><dd>m^2</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DragAreaOfDrogue</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-f4b7e555-dff9-4ba4-a5ce-d8192c9fc0b9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f4b7e555-dff9-4ba4-a5ce-d8192c9fc0b9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-24531171-6b14-4036-a3ec-2aee7053ca07' class='xr-var-data-in' type='checkbox'><label for='data-24531171-6b14-4036-a3ec-2aee7053ca07' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drag area drogue.</dd><dt><span>units :</span></dt><dd>m^2</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DragAreaRatio</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-39fb77ee-750d-4054-bda2-6d5edc73c2a4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-39fb77ee-750d-4054-bda2-6d5edc73c2a4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-000474d3-0ad1-4b5f-9be7-add8ffc5add0' class='xr-var-data-in' type='checkbox'><label for='data-000474d3-0ad1-4b5f-9be7-add8ffc5add0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drag area ratio</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueCenterDepth</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-c38ee263-d481-4d90-9070-99ad856e59fc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c38ee263-d481-4d90-9070-99ad856e59fc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b84f0ecf-a49e-4f37-aa36-6b7e7182d956' class='xr-var-data-in' type='checkbox'><label for='data-b84f0ecf-a49e-4f37-aa36-6b7e7182d956' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Average depth of the drogue.</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 1.95 kiB </td>
                        <td> 1.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>DrogueDetectSensor</span></div><div class='xr-var-dims'>(traj)</div><div class='xr-var-dtype'>|S15</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(500,), meta=np.ndarray&gt;</div><input id='attrs-76fc870b-af98-418c-9090-6bb4f3c98427' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-76fc870b-af98-418c-9090-6bb4f3c98427' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-485e1bab-ca51-46cb-85be-38bf9b7ee4a7' class='xr-var-data-in' type='checkbox'><label for='data-485e1bab-ca51-46cb-85be-38bf9b7ee4a7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Drogue detection sensor</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 7.32 kiB </td>
                        <td> 7.32 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (500,) </td>
                        <td> (500,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> |S15 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >500</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ve</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-22040af9-3aec-41b5-a001-71e64bfed447' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-22040af9-3aec-41b5-a001-71e64bfed447' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8cf428d8-9aba-40b1-8b80-d5ec5c313190' class='xr-var-data-in' type='checkbox'><label for='data-8cf428d8-9aba-40b1-8b80-d5ec5c313190' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Eastward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vn</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-2f36f126-1f85-4328-82f5-519be478a945' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2f36f126-1f85-4328-82f5-519be478a945' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2fab950a-6c81-49df-bcb0-1ccdf60afa34' class='xr-var-data-in' type='checkbox'><label for='data-2fab950a-6c81-49df-bcb0-1ccdf60afa34' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Northward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gap</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-483464b8-a432-4049-8c3c-163bd45dab90' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-483464b8-a432-4049-8c3c-163bd45dab90' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-12068e3c-bf78-455b-aa3d-11ee2a74c3b2' class='xr-var-data-in' type='checkbox'><label for='data-12068e3c-bf78-455b-aa3d-11ee2a74c3b2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time interval between previous and next location</dd><dt><span>units :</span></dt><dd>s</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-6bf34c3a-7967-4354-93c5-f65d639b7459' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6bf34c3a-7967-4354-93c5-f65d639b7459' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4d7cbfd7-a2fa-4c76-a997-c9bf77ff00e0' class='xr-var-data-in' type='checkbox'><label for='data-4d7cbfd7-a2fa-4c76-a997-c9bf77ff00e0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-d67ef0ab-4a13-4af9-91eb-f4f1fffd0e41' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d67ef0ab-4a13-4af9-91eb-f4f1fffd0e41' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d0af9016-b61c-4738-bb9e-0f087e4f8ceb' class='xr-var-data-in' type='checkbox'><label for='data-d0af9016-b61c-4738-bb9e-0f087e4f8ceb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_ve</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-e04cceac-e402-4761-a8a2-2385b8333e20' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e04cceac-e402-4761-a8a2-2385b8333e20' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8a819bc1-5198-4ab8-a2cd-3a05fa6441b7' class='xr-var-data-in' type='checkbox'><label for='data-8a819bc1-5198-4ab8-a2cd-3a05fa6441b7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in eastward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_vn</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-95880e7d-b2fb-463f-b4a9-9c5f433eb39f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-95880e7d-b2fb-463f-b4a9-9c5f433eb39f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4a3635dd-d5a1-4182-ac1a-904d0b9fc3fb' class='xr-var-data-in' type='checkbox'><label for='data-4a3635dd-d5a1-4182-ac1a-904d0b9fc3fb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>95% confidence interval in northward velocity</dd><dt><span>units :</span></dt><dd>m/s</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>drogue_status</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-590bdc0c-83c6-4fe4-8fa6-cd1687d31cef' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-590bdc0c-83c6-4fe4-8fa6-cd1687d31cef' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d5f95208-3d7a-419a-a788-16e97c63d5ad' class='xr-var-data-in' type='checkbox'><label for='data-d5f95208-3d7a-419a-a788-16e97c63d5ad' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Status indicating the presence of the drogue</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>1,0</dd><dt><span>flag_meanings :</span></dt><dd>drogued, undrogued</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 4.56 MiB </td>
                        <td> 4.56 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> bool </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-85ec2036-2052-4d64-969f-7ce027dccd0f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-85ec2036-2052-4d64-969f-7ce027dccd0f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-434ba0fd-3f6a-45c2-af9f-051a5e72bfd8' class='xr-var-data-in' type='checkbox'><label for='data-434ba0fd-3f6a-45c2-af9f-051a5e72bfd8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface sea water temperature from drifting buoy measurements. It is the sum of the fitted near-surface non-diurnal sea water temperature and fitted diurnal sea water temperature anomaly. Discrepancies may occur because of rounding.</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst1</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-6ec202d2-354a-4092-be09-68b72ff9e54c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6ec202d2-354a-4092-be09-68b72ff9e54c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c0b5866d-fff1-48f5-b429-7043f63b982f' class='xr-var-data-in' type='checkbox'><label for='data-c0b5866d-fff1-48f5-b429-7043f63b982f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted non-diurnal sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface non-diurnal sea water temperature from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst2</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-92988d43-df7f-4992-a9fb-8b81da42cbb6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-92988d43-df7f-4992-a9fb-8b81da42cbb6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7f8e80f3-c018-471d-b22f-cf4dc461f672' class='xr-var-data-in' type='checkbox'><label for='data-7f8e80f3-c018-471d-b22f-cf4dc461f672' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted diurnal sea water temperature anomaly</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface diurnal sea water temperature anomaly from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-9c6ae6d0-49b7-48b1-b6ee-3360c15fece3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9c6ae6d0-49b7-48b1-b6ee-3360c15fece3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e8205a7-d264-435e-8611-ac8e85343b3b' class='xr-var-data-in' type='checkbox'><label for='data-8e8205a7-d264-435e-8611-ac8e85343b3b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Standard uncertainty of fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated one standard error of near-surface sea water temperature estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst1</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-851a015f-bb88-42e4-8bd4-235065453db1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-851a015f-bb88-42e4-8bd4-235065453db1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5cb5423d-254b-4168-9c98-cbcb0ffdb477' class='xr-var-data-in' type='checkbox'><label for='data-5cb5423d-254b-4168-9c98-cbcb0ffdb477' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Standard uncertainty of fitted non-diurnal sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated one standard error of near-surface non-diurnal sea water temperature estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst2</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-1118287d-8af0-468c-95a5-43f4aa148591' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1118287d-8af0-468c-95a5-43f4aa148591' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-786009b8-676a-4704-9afe-3ef90207a002' class='xr-var-data-in' type='checkbox'><label for='data-786009b8-676a-4704-9afe-3ef90207a002' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Standard uncertainty of fitted diurnal sea water temperature anomaly</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated one standard error of near-surface diurnal sea water temperature anomaly estimate from drifting buoy measurements</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 18.26 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-d5a6ff68-9b78-452f-9b86-25a639b2c42a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d5a6ff68-9b78-452f-9b86-25a639b2c42a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9317a7b8-426a-42b2-8fc1-d5b9b959b9a1' class='xr-var-data-in' type='checkbox'><label for='data-9317a7b8-426a-42b2-8fc1-d5b9b959b9a1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted sea water temperature quality flag</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 4.56 MiB </td>
                        <td> 4.56 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int8 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst1</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-d12f0368-b023-4455-a23f-9377c235f03a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d12f0368-b023-4455-a23f-9377c235f03a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-64d6db0b-9035-4164-90f4-605ed2709bd1' class='xr-var-data-in' type='checkbox'><label for='data-64d6db0b-9035-4164-90f4-605ed2709bd1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted non-diurnal sea water temperature quality flag</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 4.56 MiB </td>
                        <td> 4.56 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int8 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>flg_sst2</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4786301,), meta=np.ndarray&gt;</div><input id='attrs-496f0d3a-53d4-4353-9883-6cb8665d8a55' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-496f0d3a-53d4-4353-9883-6cb8665d8a55' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b68f619f-6e68-4d19-9e68-84e264f98a2c' class='xr-var-data-in' type='checkbox'><label for='data-b68f619f-6e68-4d19-9e68-84e264f98a2c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted diurnal sea water temperature anomaly quality flag</dd><dt><span>units :</span></dt><dd>-</dd><dt><span>flag_values :</span></dt><dd>0, 1, 2, 3, 4, 5</dd><dt><span>flag_meanings :</span></dt><dd>no-estimate, no-uncertainty-estimate, estimate-not-in-range-uncertainty-not-in-range, estimate-not-in-range-uncertainty-in-range estimate-in-range-uncertainty-not-in-range, estimate-in-range-uncertainty-in-range</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 4.56 MiB </td>
                        <td> 4.56 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (4786301,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int8 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-a9bb89a7-911d-4212-8d98-44872b6fe191' class='xr-section-summary-in' type='checkbox'  ><label for='section-a9bb89a7-911d-4212-8d98-44872b6fe191' class='xr-section-summary' >Attributes: <span>(15)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>Global Drifter Program hourly drifting buoy collection</dd><dt><span>history :</span></dt><dd>Version 2.00.  Metadata from dirall.dat and deplog.dat</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>date_created :</span></dt><dd>2022-05-20T14:48:40.763710</dd><dt><span>publisher_name :</span></dt><dd>GDP Drifter DAC</dd><dt><span>publisher_email :</span></dt><dd>aoml.dftr@noaa.gov</dd><dt><span>publisher_url :</span></dt><dd>https://www.aoml.noaa.gov/phod/gdp</dd><dt><span>licence :</span></dt><dd>MIT License</dd><dt><span>processing_level :</span></dt><dd>Level 2 QC by GDP drifter DAC</dd><dt><span>metadata_link :</span></dt><dd>https://www.aoml.noaa.gov/phod/dac/dirall.html</dd><dt><span>contributor_name :</span></dt><dd>NOAA Global Drifter Program</dd><dt><span>contributor_role :</span></dt><dd>Data Acquisition Center</dd><dt><span>institution :</span></dt><dd>NOAA Atlantic Oceanographic and Meteorological Laboratory</dd><dt><span>acknowledgement :</span></dt><dd>Elipot et al. (2022) to be submitted. Elipot et al. (2016). Global Drifter Program quality-controlled hourly interpolated data from ocean surface drifting buoys, version 2.00. NOAA National Centers for Environmental Information. https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016JC011716TBA. Accessed [date].</dd><dt><span>summary :</span></dt><dd>Global Drifter Program hourly data</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="section" id="xarray-test-1-geographical-binning-of-any-variable">
<h2><em>Xarray</em> test 1: Geographical binning of any variable<a class="headerlink" href="#xarray-test-1-geographical-binning-of-any-variable" title="Permalink to this headline">¶</a></h2>
<p>The first benchmark test implemented here is to compute statistics per geographical <em>bins</em>. Here we choose to compute the mean of the zonal velocity (<code class="docutils literal notranslate"><span class="pre">ve</span></code>) from all drifter estimates. From the previous cell, we can see that the size of the chunks were automatically set to the size of <code class="docutils literal notranslate"><span class="pre">obs</span></code>, leading to one chunk per variable. For this type of bin operation, one chunk is convenient because the <em>complete zonal velocity ragged array</em> variable will be loaded in memory in one operation. In order to perform operations per trajectory (shown below), we will instead set the size of the chunks to be the length of each trajectory, which here would have required <code class="docutils literal notranslate"><span class="pre">subset_nb_drifters</span></code> operation to load the same data.</p>
<p><em>Note</em>: chunks should always align with the computation to optimize performance (more details in section 5.3.2).</p>
<p>In order to keep track of computing times of each test, we create a variable <code class="docutils literal notranslate"><span class="pre">benchmark_times</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">benchmark_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>  <span class="c1"># 3 benchmark tests for the 3 different processing libraries</span>
</pre></div>
</div>
</div>
</div>
<p>We calculate the mean zonal velocity using the <code class="docutils literal notranslate"><span class="pre">binned_statistic_2d</span></code> function from the <code class="docutils literal notranslate"><span class="pre">stats</span></code> module of the <code class="docutils literal notranslate"><span class="pre">scipy</span></code> package:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">360</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">180</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">binned_statistic_2d</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> 
                                <span class="n">ds</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">ve</span><span class="p">,</span>
                                <span class="n">statistic</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">,</span> 
                                <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">])</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<p>We now plot the results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>
<span class="n">y_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>

<span class="c1"># get 1st and 99th percentiles of values to plot to get a useful range for the colorscale</span>
<span class="n">v1</span><span class="p">,</span><span class="n">v2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">statistic</span><span class="o">.</span><span class="n">T</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">99</span><span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Robinson</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=-</span><span class="mi">180</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">cmocean</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">cmocean</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">balance</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">v2</span><span class="p">,</span> <span class="n">pivot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x_c</span><span class="p">,</span> <span class="n">y_c</span><span class="p">,</span> 
                    <span class="n">ret</span><span class="o">.</span><span class="n">statistic</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> 
                    <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> 
                    <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">v2</span><span class="p">)</span>

<span class="c1"># gridlines and labels</span>
<span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                  <span class="n">xlocs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="n">ylocs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                  <span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># add land and coastline</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">divider</span> <span class="o">=</span> <span class="n">make_axes_locatable</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">divider</span><span class="o">.</span><span class="n">append_axes</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;3%&quot;</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">axes_class</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pcm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">);</span>
<span class="n">cb</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Zonal velocity [m/s]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_37_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_37_0.png" />
</div>
</div>
</div>
<div class="section" id="xarray-test-2-extract-a-given-region">
<h2><em>Xarray</em> test 2: Extract a given region<a class="headerlink" href="#xarray-test-2-extract-a-given-region" title="Permalink to this headline">¶</a></h2>
<p>Extracting a subregion of the dataset is also a very common operation. <em>xarray</em> provides efficient way to apply mask to the data. One important thing to note is that since we have two dimensions, a mask is applied on the <code class="docutils literal notranslate"><span class="pre">obs</span></code> as well as on the <code class="docutils literal notranslate"><span class="pre">traj</span></code> dimensions. We first define a function to do the data extraction:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">retrieve_region</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;Subset the dataset for a region in space and time</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        ds: xarray Dataset</span>
<span class="sd">        lon: longitude slice of the subregion</span>
<span class="sd">        lat: latitude slice of the subregion</span>
<span class="sd">        time: tiem slice of the subregion</span>
<span class="sd">    </span>
<span class="sd">    Returns: </span>
<span class="sd">        ds_subset: Dataset of the subregion</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="c1"># define the mask for the &#39;obs&#39; dimension</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="s1">&#39;obs&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">lon</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">values</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">lon</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">values</span>

    <span class="k">if</span> <span class="n">lat</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">values</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">lat</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">values</span>

    <span class="k">if</span> <span class="n">time</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="o">.</span><span class="n">values</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">time</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span><span class="o">.</span><span class="n">values</span>
    
    <span class="c1"># define the mask for the &#39;traj&#39; dimension using the ID numbers from the masked observation</span>
    <span class="n">mask_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">ids</span><span class="p">[</span><span class="n">mask</span><span class="p">]))</span>
    <span class="n">ds_subset</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">traj</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">ds_subset</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Next we use this function to extract the data from the Gulf of Mexico for years 2000 to 2020:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># we need to record the time for benchmarking in the end</span>
<span class="n">lon</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">78</span><span class="p">]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>
<span class="n">day0</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">day1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="n">day0</span><span class="p">,</span> <span class="n">day1</span><span class="p">]</span>
<span class="n">ds_subset</span> <span class="o">=</span> <span class="n">retrieve_region</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<p>For visualization of the results, the sea surface temperature estimates along trajectories from the extracted subregion are plotted in the next cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>

<span class="c1"># temperature data are in Kelvin so we convert to degree Celsius</span>
<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ds_subset</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds_subset</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> 
               <span class="n">s</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">ds_subset</span><span class="o">.</span><span class="n">sst</span><span class="o">-</span><span class="mf">273.15</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
               <span class="n">cmap</span><span class="o">=</span><span class="n">cmocean</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">thermal</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">95</span><span class="p">,</span> <span class="o">-</span><span class="mi">79</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LongitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LatitudeFormatter</span><span class="p">())</span>
<span class="n">divider</span> <span class="o">=</span> <span class="n">make_axes_locatable</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">divider</span><span class="o">.</span><span class="n">append_axes</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;3%&#39;</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">axes_class</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pcm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>
<span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Sea Surface Temperature [˚C]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_43_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_43_0.png" />
</div>
</div>
</div>
<div class="section" id="xarray-test-3-operations-per-trajectory">
<h2><em>Xarray</em> test 3: Operations per trajectory<a class="headerlink" href="#xarray-test-3-operations-per-trajectory" title="Permalink to this headline">¶</a></h2>
<div class="section" id="single-statistic-per-trajectory">
<h3>Single statistic per trajectory<a class="headerlink" href="#single-statistic-per-trajectory" title="Permalink to this headline">¶</a></h3>
<p>The next type of common operation with Lagrangian data is to compute statistics, or perform time series analysis, per trajectory. In order to do this with an <em>xarray</em> dataset, we need to create first a variable that indexes the beginning of each trajectory, i.e. we create an array <code class="docutils literal notranslate"><span class="pre">traj_idx</span></code> in which <code class="docutils literal notranslate"><span class="pre">traj_idx[i]</span></code> is the starting index of the data for the (i+1)<sup>th</sup> trajectory (since <em>Python</em> uses zero-based indexing.).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">traj_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">rowsize</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now, we can retrieve a given variable of a specified trajectory but note that we need to indicate both the start and the end indices of the data for that trajectory. For example, get the SST time series for the 11<sup>th</sup> trajectory:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="c1"># .compute() is necessary here to explicitely load the data from the file and execute the operation</span>
<span class="n">ds</span><span class="o">.</span><span class="n">sst</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])]</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;sst&#x27; (obs: 4151)&gt;
array([    nan, 290.941, 290.967, ..., 281.062, 281.037,     nan],
      dtype=float32)
Coordinates:
    lon      (obs) float32 -55.01 -55.01 -55.01 -55.0 ... -25.87 -25.85 -25.84
    lat      (obs) float32 -39.96 -39.95 -39.95 -39.94 ... -45.79 -45.78 -45.78
    time     (obs) datetime64[ns] 2002-12-18T19:00:00 ... 2003-06-13T07:00:00
    ids      (obs) int64 27131 27131 27131 27131 ... 27131 27131 27131 27131
Dimensions without coordinates: obs
Attributes:
    long_name:  Fitted sea water temperature
    units:      Kelvin
    comments:   Estimated near-surface sea water temperature from drifting bu...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'sst'</div><ul class='xr-dim-list'><li><span>obs</span>: 4151</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-18232cc0-2066-4d04-a573-65f9736a5e14' class='xr-array-in' type='checkbox' checked><label for='section-18232cc0-2066-4d04-a573-65f9736a5e14' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>nan 290.9 291.0 291.0 290.9 290.9 ... 281.1 281.1 281.1 281.0 nan</span></div><div class='xr-array-data'><pre>array([    nan, 290.941, 290.967, ..., 281.062, 281.037,     nan],
      dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-275d4d10-936b-4b08-ba86-2c5a8d37f80b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-275d4d10-936b-4b08-ba86-2c5a8d37f80b' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-55.01 -55.01 ... -25.85 -25.84</div><input id='attrs-6cbdaa66-ba67-41d1-a6e9-a30c8cf32210' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6cbdaa66-ba67-41d1-a6e9-a30c8cf32210' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d4c013cc-0672-4957-9666-4be9c4e2c13a' class='xr-var-data-in' type='checkbox'><label for='data-d4c013cc-0672-4957-9666-4be9c4e2c13a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([-55.01047, -55.01136, -55.00577, ..., -25.86844, -25.85377,
       -25.8391 ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-39.96 -39.95 ... -45.78 -45.78</div><input id='attrs-f05912cf-202e-4fc2-abe9-be3d58f0d25f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f05912cf-202e-4fc2-abe9-be3d58f0d25f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4e73d4a9-157f-4b3d-96fe-990d9f1f01ba' class='xr-var-data-in' type='checkbox'><label for='data-4e73d4a9-157f-4b3d-96fe-990d9f1f01ba' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-39.95854, -39.95286, -39.94838, ..., -45.78717, -45.78385,
       -45.78056], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2002-12-18T19:00:00 ... 2003-06-...</div><input id='attrs-b7697544-0099-4f05-97fb-dcddc74974dd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b7697544-0099-4f05-97fb-dcddc74974dd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bb08c9c1-0c0e-4eb7-9e12-cceff42581a9' class='xr-var-data-in' type='checkbox'><label for='data-bb08c9c1-0c0e-4eb7-9e12-cceff42581a9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2002-12-18T19:00:00.000000000&#x27;, &#x27;2002-12-18T20:00:00.000000000&#x27;,
       &#x27;2002-12-18T21:00:00.000000000&#x27;, ...,
       &#x27;2003-06-13T05:00:00.000000000&#x27;, &#x27;2003-06-13T06:00:00.000000000&#x27;,
       &#x27;2003-06-13T07:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>27131 27131 27131 ... 27131 27131</div><input id='attrs-61c71677-0919-40a2-8d3b-a9e8b1eb7173' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-61c71677-0919-40a2-8d3b-a9e8b1eb7173' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4ec60d5f-9567-4669-bbbd-9192b20ce5d9' class='xr-var-data-in' type='checkbox'><label for='data-4ec60d5f-9567-4669-bbbd-9192b20ce5d9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([27131, 27131, 27131, ..., 27131, 27131, 27131])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0dbc24d9-e0da-484d-9aa8-ed00bf24d175' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0dbc24d9-e0da-484d-9aa8-ed00bf24d175' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface sea water temperature from drifting buoy measurements. It is the sum of the fitted near-surface non-diurnal sea water temperature and fitted diurnal sea water temperature anomaly. Discrepancies may occur because of rounding.</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>The same <code class="docutils literal notranslate"><span class="pre">sst</span></code> variable can be retrieved by using the drifter’s ID:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">id_ex</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">ID</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>  <span class="c1"># id of the i+1 th trajectory as an example</span>
<span class="n">id_ex</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array(27131)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">j</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">id_ex</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># retrieve back the index</span>
<span class="n">ds</span><span class="o">.</span><span class="n">sst</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">traj_idx</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])]</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;sst&#x27; (obs: 4151)&gt;
array([    nan, 290.941, 290.967, ..., 281.062, 281.037,     nan],
      dtype=float32)
Coordinates:
    lon      (obs) float32 -55.01 -55.01 -55.01 -55.0 ... -25.87 -25.85 -25.84
    lat      (obs) float32 -39.96 -39.95 -39.95 -39.94 ... -45.79 -45.78 -45.78
    time     (obs) datetime64[ns] 2002-12-18T19:00:00 ... 2003-06-13T07:00:00
    ids      (obs) int64 27131 27131 27131 27131 ... 27131 27131 27131 27131
Dimensions without coordinates: obs
Attributes:
    long_name:  Fitted sea water temperature
    units:      Kelvin
    comments:   Estimated near-surface sea water temperature from drifting bu...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'sst'</div><ul class='xr-dim-list'><li><span>obs</span>: 4151</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-3c2d0470-4fde-471f-b8f8-da15586a70d1' class='xr-array-in' type='checkbox' checked><label for='section-3c2d0470-4fde-471f-b8f8-da15586a70d1' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>nan 290.9 291.0 291.0 290.9 290.9 ... 281.1 281.1 281.1 281.0 nan</span></div><div class='xr-array-data'><pre>array([    nan, 290.941, 290.967, ..., 281.062, 281.037,     nan],
      dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-28dc1383-dad4-436e-a0b7-a1fda2e62418' class='xr-section-summary-in' type='checkbox'  checked><label for='section-28dc1383-dad4-436e-a0b7-a1fda2e62418' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-55.01 -55.01 ... -25.85 -25.84</div><input id='attrs-ec475cce-e430-4011-9b81-7757beff8443' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ec475cce-e430-4011-9b81-7757beff8443' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fa0f35b2-1923-419a-82f6-d2d531522fc6' class='xr-var-data-in' type='checkbox'><label for='data-fa0f35b2-1923-419a-82f6-d2d531522fc6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([-55.01047, -55.01136, -55.00577, ..., -25.86844, -25.85377,
       -25.8391 ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-39.96 -39.95 ... -45.78 -45.78</div><input id='attrs-5dfc788f-9393-4141-8b0a-ea7948438613' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5dfc788f-9393-4141-8b0a-ea7948438613' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7aa74bb5-4ef9-4149-a7d8-af6bcc51461f' class='xr-var-data-in' type='checkbox'><label for='data-7aa74bb5-4ef9-4149-a7d8-af6bcc51461f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-39.95854, -39.95286, -39.94838, ..., -45.78717, -45.78385,
       -45.78056], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2002-12-18T19:00:00 ... 2003-06-...</div><input id='attrs-88f66e11-9ccf-4f48-82f6-4a188712bc9f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-88f66e11-9ccf-4f48-82f6-4a188712bc9f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2da99df7-4832-4f18-ac93-62baf6ef1930' class='xr-var-data-in' type='checkbox'><label for='data-2da99df7-4832-4f18-ac93-62baf6ef1930' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2002-12-18T19:00:00.000000000&#x27;, &#x27;2002-12-18T20:00:00.000000000&#x27;,
       &#x27;2002-12-18T21:00:00.000000000&#x27;, ...,
       &#x27;2003-06-13T05:00:00.000000000&#x27;, &#x27;2003-06-13T06:00:00.000000000&#x27;,
       &#x27;2003-06-13T07:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>27131 27131 27131 ... 27131 27131</div><input id='attrs-20f7642c-45c9-4815-b91c-f067706f095a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-20f7642c-45c9-4815-b91c-f067706f095a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-64a7e2da-c267-4f3f-b7da-dfc4cdbc1c3d' class='xr-var-data-in' type='checkbox'><label for='data-64a7e2da-c267-4f3f-b7da-dfc4cdbc1c3d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array([27131, 27131, 27131, ..., 27131, 27131, 27131])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a09399ec-9a9f-4ac1-ba39-cee06aa4e6d8' class='xr-section-summary-in' type='checkbox'  checked><label for='section-a09399ec-9a9f-4ac1-ba39-cee06aa4e6d8' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Fitted sea water temperature</dd><dt><span>units :</span></dt><dd>Kelvin</dd><dt><span>comments :</span></dt><dd>Estimated near-surface sea water temperature from drifting buoy measurements. It is the sum of the fitted near-surface non-diurnal sea water temperature and fitted diurnal sea water temperature anomaly. Discrepancies may occur because of rounding.</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>Once we know the indices of the trajectory of interest, we can calculate statistics like <code class="docutils literal notranslate"><span class="pre">mean()</span></code> or other reducing operations on one, or a list of variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s_var</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ve&#39;</span><span class="p">,</span> <span class="s1">&#39;vn&#39;</span><span class="p">,</span> <span class="s1">&#39;gap&#39;</span><span class="p">,</span> <span class="s1">&#39;err_lat&#39;</span><span class="p">,</span> <span class="s1">&#39;err_lon&#39;</span><span class="p">,</span> <span class="s1">&#39;sst&#39;</span><span class="p">,</span> <span class="s1">&#39;sst1&#39;</span><span class="p">,</span> <span class="s1">&#39;sst2&#39;</span><span class="p">,</span> <span class="s1">&#39;err_sst&#39;</span><span class="p">,</span> <span class="s1">&#39;err_sst1&#39;</span><span class="p">,</span> <span class="s1">&#39;err_sst2&#39;</span><span class="p">]</span>
<span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">({</span><span class="s1">&#39;obs&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;traj&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">})[</span><span class="n">s_var</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:   ()
Coordinates:
    ID        int64 27131
Data variables:
    ve        float32 0.1437
    vn        float32 -0.04261
    gap       float32 1.479e+04
    err_lat   float32 0.007155
    err_lon   float32 0.01117
    sst       float32 285.7
    sst1      float32 285.7
    sst2      float32 -0.003311
    err_sst   float32 0.07059
    err_sst1  float32 0.02489
    err_sst2  float32 0.06399</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-54bff9f7-2b3b-4867-bb2a-de5ed5c7301f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-54bff9f7-2b3b-4867-bb2a-de5ed5c7301f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-020f8130-0d28-4b97-803d-767cf20a79cc' class='xr-section-summary-in' type='checkbox'  checked><label for='section-020f8130-0d28-4b97-803d-767cf20a79cc' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ID</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>27131</div><input id='attrs-00709e80-86ec-4c2c-844b-5d9aaf259289' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-00709e80-86ec-4c2c-844b-5d9aaf259289' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f554f4f5-c528-4d16-8d79-c963bd38fa5d' class='xr-var-data-in' type='checkbox'><label for='data-f554f4f5-c528-4d16-8d79-c963bd38fa5d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy ID</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><pre>array(27131)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-4aea5fe3-5d0c-4e7e-9449-ba81f649a317' class='xr-section-summary-in' type='checkbox'  checked><label for='section-4aea5fe3-5d0c-4e7e-9449-ba81f649a317' class='xr-section-summary' >Data variables: <span>(11)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ve</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.1437</div><input id='attrs-a3e76dc9-5b1b-4fa7-ad50-0007ba68a800' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a3e76dc9-5b1b-4fa7-ad50-0007ba68a800' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ffe63044-6f70-42bc-8b07-c5d50be374f3' class='xr-var-data-in' type='checkbox'><label for='data-ffe63044-6f70-42bc-8b07-c5d50be374f3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(0.14371336, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vn</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.04261</div><input id='attrs-a29b90dc-e1eb-4d95-9a03-dbd4dea724fc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a29b90dc-e1eb-4d95-9a03-dbd4dea724fc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0a19ec6b-2846-4fd3-8dd8-9db08db0d790' class='xr-var-data-in' type='checkbox'><label for='data-0a19ec6b-2846-4fd3-8dd8-9db08db0d790' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(-0.04260561, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gap</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>1.479e+04</div><input id='attrs-700b7e02-b31d-44a6-93ea-e9d81c7c0d03' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-700b7e02-b31d-44a6-93ea-e9d81c7c0d03' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0b2378cd-c625-4bf0-97a5-051e50879e8a' class='xr-var-data-in' type='checkbox'><label for='data-0b2378cd-c625-4bf0-97a5-051e50879e8a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(14790.94, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lat</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.007155</div><input id='attrs-f1a90d67-9b42-4bd3-9826-3c228c2b87a9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f1a90d67-9b42-4bd3-9826-3c228c2b87a9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8208c257-d758-4b60-8493-14c59c49a065' class='xr-var-data-in' type='checkbox'><label for='data-8208c257-d758-4b60-8493-14c59c49a065' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(0.00715474, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_lon</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.01117</div><input id='attrs-f0c57196-26a5-479e-b457-08b0f4b1e913' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f0c57196-26a5-479e-b457-08b0f4b1e913' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-51a209c4-a5af-4d8a-b90d-0f29c1de72be' class='xr-var-data-in' type='checkbox'><label for='data-51a209c4-a5af-4d8a-b90d-0f29c1de72be' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(0.01117038, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>285.7</div><input id='attrs-3670da1c-d984-4b1f-b1a6-5729ba0691f3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3670da1c-d984-4b1f-b1a6-5729ba0691f3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c5ab22a7-d085-4428-909e-97eb514e5886' class='xr-var-data-in' type='checkbox'><label for='data-c5ab22a7-d085-4428-909e-97eb514e5886' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(285.6781, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst1</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>285.7</div><input id='attrs-a388f809-0ea8-48d1-982e-8418dca50d26' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a388f809-0ea8-48d1-982e-8418dca50d26' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-20c70b34-681f-4f4f-8045-af9a2f3ca0f0' class='xr-var-data-in' type='checkbox'><label for='data-20c70b34-681f-4f4f-8045-af9a2f3ca0f0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(285.68143, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sst2</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.003311</div><input id='attrs-53e09ed6-1f70-4e9a-babd-e48abec1d617' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-53e09ed6-1f70-4e9a-babd-e48abec1d617' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-81478d54-7fae-4e0f-b9c3-f2f57587a78a' class='xr-var-data-in' type='checkbox'><label for='data-81478d54-7fae-4e0f-b9c3-f2f57587a78a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(-0.00331116, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.07059</div><input id='attrs-f28481fe-d193-4ae4-81b9-bcbf3d24ce0c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f28481fe-d193-4ae4-81b9-bcbf3d24ce0c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5a19820f-4176-4e3c-a890-54a689837bfd' class='xr-var-data-in' type='checkbox'><label for='data-5a19820f-4176-4e3c-a890-54a689837bfd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(0.07059364, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst1</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.02489</div><input id='attrs-ec7e57a6-046d-4166-a853-55ca04bf2237' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ec7e57a6-046d-4166-a853-55ca04bf2237' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-08d6998d-d588-4e98-8d30-4c5dacc41c3c' class='xr-var-data-in' type='checkbox'><label for='data-08d6998d-d588-4e98-8d30-4c5dacc41c3c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(0.02489492, dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>err_sst2</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.06399</div><input id='attrs-cb19a2d5-868f-4654-b8f7-f281665b5e30' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cb19a2d5-868f-4654-b8f7-f281665b5e30' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1fd0ba7d-1120-4ce4-b6c1-ffc77542c5fa' class='xr-var-data-in' type='checkbox'><label for='data-1fd0ba7d-1120-4ce4-b6c1-ffc77542c5fa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(0.0639906, dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f7c01cfc-2207-4f65-932a-cefe7eb7bec0' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f7c01cfc-2207-4f65-932a-cefe7eb7bec0' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
</div>
<div class="section" id="operations-per-trajectory">
<h3>Operations per trajectory<a class="headerlink" href="#operations-per-trajectory" title="Permalink to this headline">¶</a></h3>
<p>As previously noted, to perform the same operation per trajectory, it is more efficient to align the <em>chunks</em> with the trajectories. This is done by settings the size of the <em>chunks</em> equal to the dimensions of the trajectories. However, here we need to know the lengths of all the trajectories in the order they are arranged in the ragged array <em>before</em> actually loading the dataset with <em>xarray</em>. This is clearly not practical as <em>xarray</em> does not provide an obvious mechanism to align the data chunks with specified indices.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rowsize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">decode_times</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">as</span> <span class="n">ds_t</span><span class="p">:</span>
        <span class="n">rowsize</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_t</span><span class="o">.</span><span class="n">sizes</span><span class="p">[</span><span class="s1">&#39;obs&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># close previously loaded xr.Dataset</span>

<span class="c1"># align chunks of the dask array with the length of each individual trajectory</span>
<span class="n">chunk_settings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;obs&#39;</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rowsize</span><span class="o">.</span><span class="n">tolist</span><span class="p">())}</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;data/gdp_subset.nc&#39;</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="n">chunk_settings</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Variables such as the longitude, are now split into <code class="docutils literal notranslate"><span class="pre">subset_nb_drifters</span></code> chunks which have different sizes and where the maximum size is indicated by the <code class="docutils literal notranslate"><span class="pre">Shape</span></code> characteristic of the <em>xarray.DataArray</em> objects. As an example for <code class="docutils literal notranslate"><span class="pre">lon</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;lon&#x27; (obs: 4786301)&gt;
dask.array&lt;open_dataset-7f2a95543265e3b414ce19877f3d517clon, shape=(4786301,), dtype=float32, chunksize=(50655,), chunktype=numpy.ndarray&gt;
Coordinates:
    lon      (obs) float32 dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
    lat      (obs) float32 dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
    time     (obs) datetime64[ns] dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
    ids      (obs) int64 dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
Dimensions without coordinates: obs
Attributes:
    long_name:  Longitude
    units:      degrees_east</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'lon'</div><ul class='xr-dim-list'><li><span>obs</span>: 4786301</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-06e2e55e-fa49-4fcf-9e6c-82628f29c7c1' class='xr-array-in' type='checkbox' checked><label for='section-06e2e55e-fa49-4fcf-9e6c-82628f29c7c1' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 197.87 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-50472540-2983-42c5-829a-ff23db3111b5' class='xr-section-summary-in' type='checkbox'  checked><label for='section-50472540-2983-42c5-829a-ff23db3111b5' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-976c9c51-593a-4dc7-b594-eda89e4beac5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-976c9c51-593a-4dc7-b594-eda89e4beac5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bd85b458-2289-46b2-bf71-0c2dcaa594e1' class='xr-var-data-in' type='checkbox'><label for='data-bd85b458-2289-46b2-bf71-0c2dcaa594e1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 197.87 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-7f4979c4-740a-4388-a6b9-07564bf0162f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7f4979c4-740a-4388-a6b9-07564bf0162f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-440d21c1-0386-467c-a25d-848c478d0c7b' class='xr-var-data-in' type='checkbox'><label for='data-440d21c1-0386-467c-a25d-848c478d0c7b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 197.87 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-7748759d-57a4-421b-ae25-3609c99c8075' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7748759d-57a4-421b-ae25-3609c99c8075' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b70c7c52-22e0-46be-a811-f055fe3b41f3' class='xr-var-data-in' type='checkbox'><label for='data-b70c7c52-22e0-46be-a811-f055fe3b41f3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 395.74 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-b8949c49-a60d-4fe0-813a-a2420ae4972f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b8949c49-a60d-4fe0-813a-a2420ae4972f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-731d0e47-1ab4-43f4-b1de-816bb8e0689e' class='xr-var-data-in' type='checkbox'><label for='data-731d0e47-1ab4-43f4-b1de-816bb8e0689e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 395.74 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-32450108-b0e7-4210-9797-5bce279f69a8' class='xr-section-summary-in' type='checkbox'  checked><label for='section-32450108-b0e7-4210-9797-5bce279f69a8' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>Naturally, now loading a trajectory always require loading <em>only</em> one chunk.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">isel</span><span class="p">({</span><span class="s1">&#39;obs&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;lon&#x27; (obs: 4151)&gt;
dask.array&lt;getitem, shape=(4151,), dtype=float32, chunksize=(4151,), chunktype=numpy.ndarray&gt;
Coordinates:
    lon      (obs) float32 dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;
    lat      (obs) float32 dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;
    time     (obs) datetime64[ns] dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;
    ids      (obs) int64 dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;
Dimensions without coordinates: obs
Attributes:
    long_name:  Longitude
    units:      degrees_east</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'lon'</div><ul class='xr-dim-list'><li><span>obs</span>: 4151</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-21df6fef-0ea2-4a73-b1ea-a5d44015d5f5' class='xr-array-in' type='checkbox' checked><label for='section-21df6fef-0ea2-4a73-b1ea-a5d44015d5f5' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 16.21 kiB </td>
                        <td> 16.21 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4151,) </td>
                        <td> (4151,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 502 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4151</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-f3a06837-488e-421a-b4fe-f4974d91237e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f3a06837-488e-421a-b4fe-f4974d91237e' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;</div><input id='attrs-32046d76-4100-40bc-b725-ca01483c6005' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-32046d76-4100-40bc-b725-ca01483c6005' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b25f91c9-ca39-4125-a552-db8a24da5129' class='xr-var-data-in' type='checkbox'><label for='data-b25f91c9-ca39-4125-a552-db8a24da5129' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 16.21 kiB </td>
                        <td> 16.21 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4151,) </td>
                        <td> (4151,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 502 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4151</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;</div><input id='attrs-60a1d5a8-23bc-4fd1-9810-7fa232054a22' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-60a1d5a8-23bc-4fd1-9810-7fa232054a22' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-170f3cf5-2cb0-491c-b6aa-220c41b46e3f' class='xr-var-data-in' type='checkbox'><label for='data-170f3cf5-2cb0-491c-b6aa-220c41b46e3f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 16.21 kiB </td>
                        <td> 16.21 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4151,) </td>
                        <td> (4151,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 502 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4151</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;</div><input id='attrs-d3651677-5bda-4453-a5dc-9df3d5d82795' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d3651677-5bda-4453-a5dc-9df3d5d82795' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6ae2bef8-2846-4657-a56d-f2b917fc966b' class='xr-var-data-in' type='checkbox'><label for='data-6ae2bef8-2846-4657-a56d-f2b917fc966b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 32.43 kiB </td>
                        <td> 32.43 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4151,) </td>
                        <td> (4151,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 502 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4151</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(4151,), meta=np.ndarray&gt;</div><input id='attrs-88bf0528-f097-4d3f-8694-850e4835f05f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-88bf0528-f097-4d3f-8694-850e4835f05f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a6842fa0-ac26-433e-9e51-dabedca7b2da' class='xr-var-data-in' type='checkbox'><label for='data-a6842fa0-ac26-433e-9e51-dabedca7b2da' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 32.43 kiB </td>
                        <td> 32.43 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4151,) </td>
                        <td> (4151,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 502 Tasks </td>
                        <td> 1 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4151</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-08578831-4894-4a37-bc41-f65b23828f5e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-08578831-4894-4a37-bc41-f65b23828f5e' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="section" id="simple-operation-by-chunks-or-blocks">
<h4>Simple operation by chunks (or blocks)<a class="headerlink" href="#simple-operation-by-chunks-or-blocks" title="Permalink to this headline">¶</a></h4>
<p>To perform arbitrary operation per trajectory, we can now use <code class="docutils literal notranslate"><span class="pre">map_blocks()</span></code> that applies a function per chunk (<em>block</em> is also used for <em>chunks</em>). In the example below we simply define the function <code class="docutils literal notranslate"><span class="pre">func</span></code> that calculates the mean of each block of an array <code class="docutils literal notranslate"><span class="pre">x</span></code>. Note that this requires loading <code class="docutils literal notranslate"><span class="pre">nb_subset_drifters</span></code> chunks and applying the operation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>

<span class="n">stats_traj</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sst</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">map_blocks</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span> <span class="c1"># apply to sst variable</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/jh/92r7zqw159xbv25hk5fbrzgw0000gp/T/ipykernel_2540/1074368307.py:2: RuntimeWarning: Mean of empty slice
  return np.array([np.nanmean(x)])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stats_traj</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([275.79956, 280.2327 , 277.82953, 282.86588, 293.74094, 293.33972,
       287.9495 , 271.2664 , 293.4779 , 300.82187], dtype=float32)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="more-complex-operation-where-dimensions-can-change-between-input-and-output">
<h4>More complex operation where dimensions can change between input and output<a class="headerlink" href="#more-complex-operation-where-dimensions-can-change-between-input-and-output" title="Permalink to this headline">¶</a></h4>
<p>Alternatively, one can use the <em>xarray</em> function <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code> to map a function per chunks. In this case, the function to be applied can be a bit more complex, but this method gives more flexibility to handle the input and output formats and dimensions of the function.</p>
<p>In a first example, the eastward velocity is passed as an argument by chunk to the function which will calculate the anomaly per trajectory. The length of the output will be of the same length as the input. Please note here that:</p>
<ol class="simple">
<li><p>The input and output sizes are not modified.</p></li>
<li><p>An argument must be passed to the function. It shouldn’t be <code class="docutils literal notranslate"><span class="pre">ds.ve</span></code> (the xarray DataArray), but the <code class="docutils literal notranslate"><span class="pre">ds.ve.data</span></code> (the underlying dask core data array) must be used.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">per_chunk_anomaly</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="c1"># MUST return an array (https://github.com/dask/dask/issues/8822)</span>
    <span class="k">return</span> <span class="n">array</span><span class="o">.</span><span class="n">map_blocks</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">chunks</span><span class="o">=</span><span class="n">array</span><span class="o">.</span><span class="n">chunks</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># here the apply_ufunc functions takes the function just defined above(per_chunk_anomaly)</span>
<span class="c1"># and the data to which apply that function</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">apply_ufunc</span><span class="p">(</span>
    <span class="n">per_chunk_anomaly</span><span class="p">,</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">ve</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>  <span class="c1"># .data to retrieve the underlying chunked dask array</span>
    <span class="n">input_core_dims</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;obs&#39;</span><span class="p">]],</span>
    <span class="n">output_core_dims</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;obs&#39;</span><span class="p">]],</span>
    <span class="n">dask</span><span class="o">=</span><span class="s1">&#39;allowed&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>And display some results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>  <span class="c1"># only a few values will be shown by default</span>
<span class="n">display</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>  <span class="c1"># length of the output should be same as length of input</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0.02569735, 0.02569735, 0.02599735, ..., 0.13741829, 0.13441828,
       0.12031829], dtype=float32)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4786301
</pre></div>
</div>
</div>
</div>
<p>In a second example, we calculates <code class="docutils literal notranslate"><span class="pre">mean()</span></code> values per trajectory. This means that for our datasets consisting of <code class="docutils literal notranslate"><span class="pre">nb_subset_drifters</span></code> chunks, ttput will have <code class="docutils literal notranslate"><span class="pre">nb_subset_drifters</span></code> values, that is one value per chunk. In other words, the length of the output will be different from the length of the input.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">per_chunk_mean</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">nchunks</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">chunks</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">output_chunks</span> <span class="o">=</span> <span class="p">([</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">nchunks</span><span class="p">,)</span> <span class="c1"># 1 value per chunk</span>
    <span class="k">return</span> <span class="n">array</span><span class="o">.</span><span class="n">map_blocks</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">chunks</span><span class="o">=</span><span class="n">output_chunks</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">apply_ufunc</span><span class="p">(</span>
    <span class="n">per_chunk_mean</span><span class="p">,</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">ve</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
    <span class="n">input_core_dims</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;obs&#39;</span><span class="p">]],</span>  <span class="c1"># input dimension to the per_block function</span>
    <span class="n">output_core_dims</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;obs&#39;</span><span class="p">]],</span> <span class="c1"># output still has one dimension</span>
    <span class="n">exclude_dims</span><span class="o">=</span><span class="nb">set</span><span class="p">([</span><span class="s1">&#39;obs&#39;</span><span class="p">]),</span>  <span class="c1"># size of x changes so it has to be in the exclude_dims param</span>
    <span class="n">dask</span><span class="o">=</span><span class="s1">&#39;allowed&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>And display some results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">ret</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>  <span class="c1"># show only first 10 values</span>
<span class="n">display</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>  <span class="c1"># length of output should be the number of trajectories</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-0.03099735,  0.14964446,  0.152546  ,  0.15595299,  0.01793322,
       -0.01830383,  0.03096705, -0.03741267, -0.00138449,  0.03001278],
      dtype=float32)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>500
</pre></div>
</div>
</div>
</div>
<p>In a last example, we estimate ocean velocity rotary spectra of the complex-valued time series <code class="docutils literal notranslate"><span class="pre">u+vi</span></code> via the periodogram method (and using the <em>NumPy</em> <code class="docutils literal notranslate"><span class="pre">fft</span></code> function). Here, the combination of the two methods <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code> and <code class="docutils literal notranslate"><span class="pre">map_blocks</span></code> is a powerful tool which can serve as templates for a range of advanced processing applied per trajectory.</p>
<p>First, we create the new complex-valued variable <code class="docutils literal notranslate"><span class="pre">cv</span></code> which inherits the chunks from <code class="docutils literal notranslate"><span class="pre">ve</span></code> and <code class="docutils literal notranslate"><span class="pre">vn</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">cv</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;ve&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;vn&#39;</span><span class="p">])</span>
<span class="n">ds</span><span class="o">.</span><span class="n">cv</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;cv&#x27; (obs: 4786301)&gt;
dask.array&lt;add, shape=(4786301,), dtype=complex64, chunksize=(50655,), chunktype=numpy.ndarray&gt;
Coordinates:
    lon      (obs) float32 dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
    lat      (obs) float32 dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
    time     (obs) datetime64[ns] dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
    ids      (obs) int64 dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;
Dimensions without coordinates: obs</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'cv'</div><ul class='xr-dim-list'><li><span>obs</span>: 4786301</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-ee720ebf-7f0e-460a-b511-60584f671e12' class='xr-array-in' type='checkbox' checked><label for='section-ee720ebf-7f0e-460a-b511-60584f671e12' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 395.74 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 2002 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> complex64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-b240131a-ae22-4727-9d28-bb779e017362' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b240131a-ae22-4727-9d28-bb779e017362' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-11f88271-9fd0-4c9d-a324-6a9b5ff2e660' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-11f88271-9fd0-4c9d-a324-6a9b5ff2e660' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-20bb72b6-02af-461f-b004-c9523db1a86e' class='xr-var-data-in' type='checkbox'><label for='data-20bb72b6-02af-461f-b004-c9523db1a86e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 197.87 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-55a1f472-477a-4cf6-85ff-03a0a2035e06' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-55a1f472-477a-4cf6-85ff-03a0a2035e06' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-94e8ca9b-dae0-456b-93cb-1e3356f456d3' class='xr-var-data-in' type='checkbox'><label for='data-94e8ca9b-dae0-456b-93cb-1e3356f456d3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 18.26 MiB </td>
                        <td> 197.87 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> float32 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-583b785c-2ecd-460e-b524-b1b6bb8ebb32' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-583b785c-2ecd-460e-b524-b1b6bb8ebb32' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-56d3b62a-a0cb-4f9f-bbbc-0c0ffb361629' class='xr-var-data-in' type='checkbox'><label for='data-56d3b62a-a0cb-4f9f-bbbc-0c0ffb361629' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 395.74 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> datetime64[ns] </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ids</span></div><div class='xr-var-dims'>(obs)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(1095,), meta=np.ndarray&gt;</div><input id='attrs-ce325117-99ee-4f23-a67b-a0b39c78fb63' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ce325117-99ee-4f23-a67b-a0b39c78fb63' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9221c6f4-2009-45c8-9b8b-00ae287dbe8e' class='xr-var-data-in' type='checkbox'><label for='data-9221c6f4-2009-45c8-9b8b-00ae287dbe8e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Drifter Program Buoy identification number of observations</dd><dt><span>units :</span></dt><dd>-</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table>
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.52 MiB </td>
                        <td> 395.74 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (4786301,) </td>
                        <td> (50655,) </td>
                    </tr>
                    <tr>
                        <th> Count </th>
                        <td> 501 Tasks </td>
                        <td> 500 Chunks </td>
                    </tr>
                    <tr>
                    <th> Type </th>
                    <td> int64 </td>
                    <td> numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="25" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="21" y1="0" x2="21" y2="25" />
  <line x1="29" y1="0" x2="29" y2="25" />
  <line x1="35" y1="0" x2="35" y2="25" />
  <line x1="43" y1="0" x2="43" y2="25" />
  <line x1="50" y1="0" x2="50" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="60" y1="0" x2="60" y2="25" />
  <line x1="64" y1="0" x2="64" y2="25" />
  <line x1="71" y1="0" x2="71" y2="25" />
  <line x1="81" y1="0" x2="81" y2="25" />
  <line x1="88" y1="0" x2="88" y2="25" />
  <line x1="94" y1="0" x2="94" y2="25" />
  <line x1="101" y1="0" x2="101" y2="25" />
  <line x1="108" y1="0" x2="108" y2="25" />
  <line x1="114" y1="0" x2="114" y2="25" />
  <line x1="117" y1="0" x2="117" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#8B4903A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >4786301</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-2dfeb8dd-3c1f-42f7-b560-23d4f191c841' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-2dfeb8dd-3c1f-42f7-b560-23d4f191c841' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">per_chunk_periodogram</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">24</span>  <span class="c1"># [-]</span>
    <span class="k">return</span> <span class="n">array</span><span class="o">.</span><span class="n">map_blocks</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">dt</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="n">array</span><span class="o">.</span><span class="n">chunks</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here we benchmark this last, more complex, operation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">apply_ufunc</span><span class="p">(</span>
    <span class="n">per_chunk_periodogram</span><span class="p">,</span>
    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;cv&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
    <span class="n">input_core_dims</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;obs&quot;</span><span class="p">]],</span>  <span class="c1"># input dimension to the per_block function</span>
    <span class="n">output_core_dims</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;obs&quot;</span><span class="p">]],</span>  <span class="c1"># output still has one dimension</span>
    <span class="n">dask</span><span class="o">=</span><span class="s1">&#39;allowed&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<p>The return variable is the same length as <code class="docutils literal notranslate"><span class="pre">ds['cv']</span></code>, and is a ragged array of estimated rotary spectra by the periodogram method.</p>
<p>(Please note: the periodogram is not a good spectral estimator at all and alternative methods such as multitaper methods should be used to estimate spectra. Please also note that we assumed that the individual trajectories were gap-free at regular hourly intervals which is required to apply a FFT. However, some velocity time series have gaps, in which case the FFT calculation is not valid)</p>
<p>Display one example spectrum:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># drifter index</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># calculate inertial frequency in cycle per day [cpd] from the mean latitude of trajectory</span>
<span class="n">omega</span> <span class="o">=</span> <span class="mf">7.2921159e-5</span>  <span class="c1"># Earth&#39;s rotation rate [rad/s]</span>
<span class="n">seconds_per_day</span> <span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span>  <span class="c1"># [s]</span>
<span class="n">fi</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">omega</span><span class="o">*</span><span class="p">(</span><span class="n">seconds_per_day</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">())</span>

<span class="c1"># define frequency scale/abscissa</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">24</span>  <span class="c1"># [-]</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">rowsize</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">compute</span><span class="p">()),</span> <span class="n">dt</span><span class="p">)</span> 
<span class="n">ss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">traj_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span>  <span class="c1"># spectrum of the ith trajectory </span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="n">h1</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">ss</span><span class="p">),</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Spectrum&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">h2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">fi</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Inertial frequency&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;PSD (m$^2$ s$^{-2}$ cpd$^{-1}$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency [cpd]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_82_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_82_0.png" />
</div>
</div>
<p>At this stage it is necessary to <em>clear the memory (RAM)</em> of the <em>Python</em> process because in the next step, the data are fully loaded in memory by using Pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">ds</span><span class="p">,</span> <span class="n">ds_subset</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">traj_idx</span><span class="p">,</span> <span class="n">stats_traj</span><span class="p">,</span> <span class="n">rowsize</span><span class="p">,</span> <span class="n">x_c</span><span class="p">,</span> <span class="n">y_c</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="pandas">
<h1><em>Pandas</em><a class="headerlink" href="#pandas" title="Permalink to this headline">¶</a></h1>
<p>In this section, we test the use of the <em><a class="reference external" href="https://pandas.pydata.org/">Pandas</a></em> package for our Lagrangian data. Since the previously-created NetCDF file containing the ragged array has two dimensions <code class="docutils literal notranslate"><span class="pre">['traj']</span></code> and <code class="docutils literal notranslate"><span class="pre">['obs']</span></code>, it cannot be read directly into the table structure of a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame()</span></code>. As a workaround, we load the data with <em>xarray</em>, drop the <code class="docutils literal notranslate"><span class="pre">['traj']</span></code> dimension, and convert the resulting data to a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame()</span></code>. The disadvantage is that it requires to form a second dataset with the dimension<code class="docutils literal notranslate"><span class="pre">['traj']</span></code> to have access to all variables (not presented here).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;data/gdp_subset.nc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">drop_dims</span><span class="p">(</span><span class="s1">&#39;traj&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>  <span class="c1"># only contains the variables with dimension [&#39;obs&#39;]</span>
</pre></div>
</div>
</div>
</div>
<p>In this case, the data is organized in a table format where each variable is associated with a column, and each row contains one observation. A <em>DataFrame</em> is easy to quickly look at, with the <code class="docutils literal notranslate"><span class="pre">.head()</span></code>, <code class="docutils literal notranslate"><span class="pre">.tail()</span></code> functions as an example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ve</th>
      <th>vn</th>
      <th>gap</th>
      <th>err_lat</th>
      <th>err_lon</th>
      <th>err_ve</th>
      <th>err_vn</th>
      <th>drogue_status</th>
      <th>sst</th>
      <th>sst1</th>
      <th>...</th>
      <th>err_sst</th>
      <th>err_sst1</th>
      <th>err_sst2</th>
      <th>flg_sst</th>
      <th>flg_sst1</th>
      <th>flg_sst2</th>
      <th>lon</th>
      <th>lat</th>
      <th>time</th>
      <th>ids</th>
    </tr>
    <tr>
      <th>obs</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.0053</td>
      <td>0.0004</td>
      <td>15638.0</td>
      <td>0.00391</td>
      <td>0.00797</td>
      <td>0.0650</td>
      <td>0.0279</td>
      <td>False</td>
      <td>273.471985</td>
      <td>274.126007</td>
      <td>...</td>
      <td>0.074</td>
      <td>0.224</td>
      <td>0.236</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>-52.393002</td>
      <td>47.307461</td>
      <td>2001-05-01 08:00:00</td>
      <td>2592</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.0053</td>
      <td>0.0007</td>
      <td>15638.0</td>
      <td>0.00345</td>
      <td>0.00676</td>
      <td>0.0603</td>
      <td>0.0284</td>
      <td>False</td>
      <td>273.100006</td>
      <td>273.760010</td>
      <td>...</td>
      <td>0.077</td>
      <td>0.158</td>
      <td>0.185</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>-52.393070</td>
      <td>47.307590</td>
      <td>2001-05-01 09:00:00</td>
      <td>2592</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.0050</td>
      <td>0.0015</td>
      <td>15638.0</td>
      <td>0.00313</td>
      <td>0.00586</td>
      <td>0.0548</td>
      <td>0.0290</td>
      <td>False</td>
      <td>272.869995</td>
      <td>273.513000</td>
      <td>...</td>
      <td>0.086</td>
      <td>0.113</td>
      <td>0.142</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>-52.392960</td>
      <td>47.307861</td>
      <td>2001-05-01 10:00:00</td>
      <td>2592</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.0037</td>
      <td>0.0035</td>
      <td>15638.0</td>
      <td>0.00288</td>
      <td>0.00503</td>
      <td>0.0511</td>
      <td>0.0297</td>
      <td>False</td>
      <td>272.752991</td>
      <td>273.334015</td>
      <td>...</td>
      <td>0.096</td>
      <td>0.089</td>
      <td>0.123</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>-52.392208</td>
      <td>47.308449</td>
      <td>2001-05-01 11:00:00</td>
      <td>2592</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.0044</td>
      <td>0.0031</td>
      <td>13651.0</td>
      <td>0.00292</td>
      <td>0.00475</td>
      <td>0.0509</td>
      <td>0.0313</td>
      <td>False</td>
      <td>272.743988</td>
      <td>273.213013</td>
      <td>...</td>
      <td>0.102</td>
      <td>0.078</td>
      <td>0.118</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>-52.391151</td>
      <td>47.309021</td>
      <td>2001-05-01 12:00:00</td>
      <td>2592</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;This subset contains </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">ids</span><span class="p">))</span><span class="si">}</span><span class="s1"> drifters and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">:</span><span class="s1">,</span><span class="si">}</span><span class="s1"> observations.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This subset contains 500 drifters and 4,786,301 observations.
</pre></div>
</div>
</div>
</div>
<div class="section" id="pandas-test-1-geographical-binning-of-any-variable">
<h2><em>Pandas</em> test 1: Geographical binning of any variable<a class="headerlink" href="#pandas-test-1-geographical-binning-of-any-variable" title="Permalink to this headline">¶</a></h2>
<p>Here we reconduct the first bench test: calculate the mean zonal velocity from all drifters of the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">360</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">180</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">binned_statistic_2d</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> 
                                <span class="n">df</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> 
                                <span class="n">df</span><span class="o">.</span><span class="n">ve</span><span class="p">,</span>
                                <span class="n">statistic</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">,</span> <span class="c1"># can pass any function()</span>
                                <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">])</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>
<span class="n">y_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>

<span class="c1"># get 1st and 99th percentiles of values to plot to get a useful range for the colorscale</span>
<span class="n">v1</span><span class="p">,</span><span class="n">v2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">statistic</span><span class="o">.</span><span class="n">T</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">99</span><span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Robinson</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=-</span><span class="mi">180</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">cmocean</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">cmocean</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">balance</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">v2</span><span class="p">,</span> <span class="n">pivot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x_c</span><span class="p">,</span> <span class="n">y_c</span><span class="p">,</span> 
                    <span class="n">ret</span><span class="o">.</span><span class="n">statistic</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> 
                    <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> 
                    <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">v2</span><span class="p">)</span>

<span class="c1"># gridlines and labels</span>
<span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                  <span class="n">xlocs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="n">ylocs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                  <span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># add land and coastline</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">divider</span> <span class="o">=</span> <span class="n">make_axes_locatable</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">divider</span><span class="o">.</span><span class="n">append_axes</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;3%&quot;</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">axes_class</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pcm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">);</span>
<span class="n">cb</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Zonal velocity [m/s]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_92_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_92_0.png" />
</div>
</div>
</div>
<div class="section" id="pandas-test-2-extract-a-given-region">
<h2><em>Pandas</em> test 2: Extract a given region<a class="headerlink" href="#pandas-test-2-extract-a-given-region" title="Permalink to this headline">¶</a></h2>
<p>The extraction of a region is slightly simpler with <em>Pandas</em> than with <em>xarray</em>, because the same mask can be applied to all variables of interest that share the <code class="docutils literal notranslate"><span class="pre">obs</span></code> dimension.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">retrieve_region_pd</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Subset the dataset for a region in space and time</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        df: Pandas DataFrame</span>
<span class="sd">        lon: longitude slice of the subregion</span>
<span class="sd">        lat: latitude slice of the subregion</span>
<span class="sd">        time: tiem slice of the subregion</span>
<span class="sd">    </span>
<span class="sd">    Returns: </span>
<span class="sd">        ds_subset: Dataset of the subregion</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">,</span> 
                            <span class="p">(</span>
                                <span class="n">df</span><span class="o">.</span><span class="n">lon</span> <span class="o">&gt;=</span> <span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
                                <span class="n">df</span><span class="o">.</span><span class="n">lon</span> <span class="o">&lt;=</span> <span class="n">lon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">df</span><span class="o">.</span><span class="n">lat</span> <span class="o">&gt;=</span> <span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="n">df</span><span class="o">.</span><span class="n">lat</span> <span class="o">&lt;=</span> <span class="n">lat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">df</span><span class="o">.</span><span class="n">time</span> <span class="o">&gt;=</span> <span class="n">day0</span><span class="p">,</span>
                                <span class="n">df</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;=</span> <span class="n">day1</span><span class="p">,</span>
                            <span class="p">)</span>
                           <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">lon</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">78</span><span class="p">]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>
<span class="n">day0</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">day1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
<span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="n">day0</span><span class="p">,</span> <span class="n">day1</span><span class="p">]</span>
<span class="n">df_subset</span> <span class="o">=</span> <span class="n">retrieve_region_pd</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_subset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ve</th>
      <th>vn</th>
      <th>gap</th>
      <th>err_lat</th>
      <th>err_lon</th>
      <th>err_ve</th>
      <th>err_vn</th>
      <th>drogue_status</th>
      <th>sst</th>
      <th>sst1</th>
      <th>...</th>
      <th>err_sst</th>
      <th>err_sst1</th>
      <th>err_sst2</th>
      <th>flg_sst</th>
      <th>flg_sst1</th>
      <th>flg_sst2</th>
      <th>lon</th>
      <th>lat</th>
      <th>time</th>
      <th>ids</th>
    </tr>
    <tr>
      <th>obs</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>902352</th>
      <td>-0.3192</td>
      <td>-0.0632</td>
      <td>10886.0</td>
      <td>0.00611</td>
      <td>0.01212</td>
      <td>0.1262</td>
      <td>0.0633</td>
      <td>False</td>
      <td>301.339996</td>
      <td>301.382996</td>
      <td>...</td>
      <td>0.022</td>
      <td>0.007</td>
      <td>0.019</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>-78.007187</td>
      <td>30.198179</td>
      <td>2006-09-15 14:00:00</td>
      <td>54388</td>
    </tr>
    <tr>
      <th>902353</th>
      <td>-0.4248</td>
      <td>-0.0653</td>
      <td>10886.0</td>
      <td>0.00193</td>
      <td>0.01652</td>
      <td>0.1244</td>
      <td>0.0656</td>
      <td>False</td>
      <td>301.377014</td>
      <td>301.386993</td>
      <td>...</td>
      <td>0.021</td>
      <td>0.007</td>
      <td>0.018</td>
      <td>5</td>
      <td>5</td>
      <td>2</td>
      <td>-78.036041</td>
      <td>30.196760</td>
      <td>2006-09-15 15:00:00</td>
      <td>54388</td>
    </tr>
    <tr>
      <th>902354</th>
      <td>-0.1182</td>
      <td>-0.0115</td>
      <td>4925.0</td>
      <td>0.00219</td>
      <td>0.01249</td>
      <td>0.1813</td>
      <td>0.0548</td>
      <td>False</td>
      <td>301.417999</td>
      <td>301.390015</td>
      <td>...</td>
      <td>0.018</td>
      <td>0.006</td>
      <td>0.016</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>-78.044693</td>
      <td>30.193790</td>
      <td>2006-09-15 16:00:00</td>
      <td>54388</td>
    </tr>
    <tr>
      <th>902355</th>
      <td>-0.0863</td>
      <td>-0.0425</td>
      <td>1210.0</td>
      <td>0.00063</td>
      <td>0.00932</td>
      <td>0.1501</td>
      <td>0.0463</td>
      <td>False</td>
      <td>301.457001</td>
      <td>301.391998</td>
      <td>...</td>
      <td>0.015</td>
      <td>0.006</td>
      <td>0.014</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>-78.048553</td>
      <td>30.192690</td>
      <td>2006-09-15 17:00:00</td>
      <td>54388</td>
    </tr>
    <tr>
      <th>902356</th>
      <td>0.0080</td>
      <td>-0.0562</td>
      <td>4925.0</td>
      <td>0.00415</td>
      <td>0.00690</td>
      <td>0.1936</td>
      <td>0.0922</td>
      <td>False</td>
      <td>301.487000</td>
      <td>301.394012</td>
      <td>...</td>
      <td>0.013</td>
      <td>0.005</td>
      <td>0.012</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>-78.045929</td>
      <td>30.191130</td>
      <td>2006-09-15 18:00:00</td>
      <td>54388</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div></div></div>
</div>
<p>Here we plot the result as before but displaying the speed for each data point:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>

<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df_subset</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">df_subset</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> 
               <span class="n">s</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">df_subset</span><span class="o">.</span><span class="n">ve</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">df_subset</span><span class="o">.</span><span class="n">vn</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
               <span class="n">cmap</span><span class="o">=</span><span class="n">cmocean</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">speed</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">95</span><span class="p">,</span> <span class="o">-</span><span class="mi">79</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LongitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LatitudeFormatter</span><span class="p">())</span>
<span class="n">divider</span> <span class="o">=</span> <span class="n">make_axes_locatable</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">divider</span><span class="o">.</span><span class="n">append_axes</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;3%&#39;</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">axes_class</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pcm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>
<span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Velocity magnitude [m/s]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_98_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_98_0.png" />
</div>
</div>
</div>
<div class="section" id="pandas-test-3-single-statistic-per-trajectory">
<h2><em>Pandas</em> test 3: Single statistic per trajectory<a class="headerlink" href="#pandas-test-3-single-statistic-per-trajectory" title="Permalink to this headline">¶</a></h2>
<p>Single operation per trajectory can be easily implemented in a <em>Pandas DataFrame</em> by locating the drifter ID by index (<code class="docutils literal notranslate"><span class="pre">iloc</span></code>) or by value (<code class="docutils literal notranslate"><span class="pre">loc</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># drifter index</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ids&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ids&#39;</span><span class="p">])[</span><span class="n">i</span><span class="p">])]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ve                                    0.143713
vn                                   -0.042606
gap                                14790.94043
err_lat                               0.007155
err_lon                                0.01117
err_ve                                0.095038
err_vn                                0.064061
drogue_status                         0.998073
sst                                 285.678101
sst1                                285.681427
sst2                                 -0.003311
err_sst                               0.070594
err_sst1                              0.024895
err_sst2                              0.063991
flg_sst                               4.997591
flg_sst1                              4.997591
flg_sst2                              3.857866
lon                                 -45.807869
lat                                 -45.521275
time             2003-03-17 05:04:36.656227328
ids                                    27131.0
dtype: object
</pre></div>
</div>
</div>
</div>
<p>Assuming we know a drifter ID <code class="docutils literal notranslate"><span class="pre">id_ex</span></code> (here we simply use the value associated to the i<sup>th</sup> index above), we can retrieve the associated data by value as follow.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">id_ex</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ids&#39;</span><span class="p">])[</span><span class="n">i</span><span class="p">]</span>
<span class="n">id_ex</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>27131
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ids&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">id_ex</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ve                                    0.143713
vn                                   -0.042606
gap                                14790.94043
err_lat                               0.007155
err_lon                                0.01117
err_ve                                0.095038
err_vn                                0.064061
drogue_status                         0.998073
sst                                 285.678101
sst1                                285.681427
sst2                                 -0.003311
err_sst                               0.070594
err_sst1                              0.024895
err_sst2                              0.063991
flg_sst                               4.997591
flg_sst1                              4.997591
flg_sst2                              3.857866
lon                                 -45.807869
lat                                 -45.521275
time             2003-03-17 05:04:36.656227328
ids                                    27131.0
dtype: object
</pre></div>
</div>
</div>
</div>
<p>For more complicated operations per trajectory, the pandas <code class="docutils literal notranslate"><span class="pre">groupby()</span></code> function allows us to split the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. Applied to the <code class="docutils literal notranslate"><span class="pre">ids['obs']</span></code> (which repeat the ID of a drifter for each of its observations), we can obtain a <em>grouped object</em> containing one trajectory per group. Following this operation, one can apply a predefined set of operations, such as <code class="docutils literal notranslate"><span class="pre">mean()</span></code>, or any user defined functions using <code class="docutils literal notranslate"><span class="pre">.apply()</span></code>. As before, we provide an example where we can calculate the mean of SST per trajectory, and another example of estimating velocity spectra by the periodogram method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;ids&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sst</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">ret</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ids
2592        275.799561
6428        280.232697
13566       277.829529
17927       282.865875
18706       293.740936
               ...    
68243870    273.882111
68244460    273.744598
68244730    273.515564
68246720    296.040009
68248530    286.112793
Name: sst, Length: 500, dtype: float32
</pre></div>
</div>
</div>
</div>
<p>Again, to estimate the velocity spectra we have to create the new complex-valued variable <code class="docutils literal notranslate"><span class="pre">cv</span></code> from <code class="docutils literal notranslate"><span class="pre">ve</span></code> and <code class="docutils literal notranslate"><span class="pre">vn</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cv&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ve&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;vn&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>And calculate the periodogram per trajectory using this new variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">periodogram_per_group</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">24</span>
    <span class="k">return</span> <span class="n">dt</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">array</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;ids&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cv</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">periodogram_per_group</span><span class="p">)</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<p>This time, the results are stored into a <em>dictionary</em> where the keys are the drifters’ ID:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ids
2592        [48.01623216121766, 52.74661085729767, 4.63967...
6428        [341830.5755422627, 53330.50826245666, 857.134...
13566       [46152.48004791965, 6588.974982702436, 1458.62...
17927       [325605.62376754, 63676.24022864982, 11794.261...
18706       [1076.965552542786, 773.9372866187755, 311.397...
                                  ...                        
68243870    [127.7695912061453, 215.20477509848652, 315.08...
68244460    [301.4939495649164, 64.02978051130118, 424.069...
68244730    [383.1069530335443, 67.31997165755263, 7.50842...
68246720    [308.7263083474708, 1125.3042873617292, 4771.3...
68248530    [49.898529559024354, 2.2134116883119983, 15.66...
Name: cv, Length: 500, dtype: object
</pre></div>
</div>
</div>
</div>
<p>As an example, we display the first 10 values of the sprctrum for drifter <code class="docutils literal notranslate"><span class="pre">id_ex</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span><span class="p">[</span><span class="n">id_ex</span><span class="p">][:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([16131.45017614, 16040.80300053,  3017.6902432 ,  6700.41755415,
         311.93297982,  1555.5981903 ,   757.26867001,  7200.28268359,
         891.88959794,  1036.35997949])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">df</span><span class="p">,</span> <span class="n">df_subset</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">x_c</span><span class="p">,</span> <span class="n">y_c</span>  <span class="c1"># again free the memory before the next section</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="awkward-array">
<h1><em>Awkward Array</em><a class="headerlink" href="#awkward-array" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://awkward-array.readthedocs.io/en/latest/"><em>Awkward Array</em></a> is a library for nested, variable-sized data, including arbitrary-length lists, records, mixed types, and missing data, using NumPy-like idioms. Such arrays are dynamically typed (defined at runtime as a function of the variable to store), but operations on them are compiled into <em>machine code</em> and therefore executes faster than regular <em>interpreted</em> <em>Python</em> function. This allow to generalizes <em>NumPy</em> array manipulation routines, even with variable-sized data.</p>
<p>A schematic view of the data structure is presented in the figure below. The higher level <code class="docutils literal notranslate"><span class="pre">ak.Array</span></code> and <code class="docutils literal notranslate"><span class="pre">ak.Record</span></code> hides the nested structure of the data structure, but can always be accessed with <code class="docutils literal notranslate"><span class="pre">ak.Array.layout</span></code> (or <code class="docutils literal notranslate"><span class="pre">ds_ak.layout</span></code> in our case). This structure also stores parameters or metadata such as <em>units</em>, <em>long name</em>, etc. associated with the data. The library stores data into standard <code class="docutils literal notranslate"><span class="pre">NumPyArray</span></code> alongside a <code class="docutils literal notranslate"><span class="pre">ListOffsetArray</span></code> for fast and efficient access to variables, even with nonuniform data length.</p>
<div>
<img src="https://i.imgur.com/HogZmOH.png" width="800"/>
</div>
<p>The main advantages of Awkward Array are:</p>
<ul class="simple">
<li><p>the indexing is already taken care of by the library, e.g. <code class="docutils literal notranslate"><span class="pre">sst[400]</span></code> returns the sea surface temperature along the 401<sup>st</sup> trajectory;</p></li>
<li><p>ability to efficiently perform operations per trajectory;</p></li>
<li><p>easy integration with Numba (demonstrated below in section 7.4).</p></li>
</ul>
<p>An Awkward array can easily be created by reading our NetCDF file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span> <span class="o">=</span> <span class="n">create_ak</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;data/gdp_subset.nc&#39;</span><span class="p">,</span> <span class="n">decode_times</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p><em>Awkward Arrays</em> supports N-dimensional datasets by storing nested arrays. The main dataset contains variables <code class="docutils literal notranslate"><span class="pre">(type</span> <span class="pre">=</span> <span class="pre">subset_nb_drifters</span> <span class="pre">*</span> <span class="pre">{various</span> <span class="pre">type})</span></code> containing the metadata.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [{ID: 2592, rowsize: 1095, ... ] type=&#39;500 * struct[[&quot;ID&quot;, &quot;rowsize&quot;, &quot;lo...&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p><em>Awkward Array</em> doesn’t (yet!) have an <em>html</em> representation of its structure, but it is possible to list the fields.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">fields</span>  <span class="c1"># list of fields/variables</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;ID&#39;,
 &#39;rowsize&#39;,
 &#39;location_type&#39;,
 &#39;WMO&#39;,
 &#39;expno&#39;,
 &#39;deploy_date&#39;,
 &#39;deploy_lat&#39;,
 &#39;deploy_lon&#39;,
 &#39;end_date&#39;,
 &#39;end_lat&#39;,
 &#39;end_lon&#39;,
 &#39;drogue_lost_date&#39;,
 &#39;type_death&#39;,
 &#39;type_buoy&#39;,
 &#39;DeploymentShip&#39;,
 &#39;DeploymentStatus&#39;,
 &#39;BuoyTypeManufacturer&#39;,
 &#39;BuoyTypeSensorArray&#39;,
 &#39;CurrentProgram&#39;,
 &#39;PurchaserFunding&#39;,
 &#39;SensorUpgrade&#39;,
 &#39;Transmissions&#39;,
 &#39;DeployingCountry&#39;,
 &#39;DeploymentComments&#39;,
 &#39;ManufactureYear&#39;,
 &#39;ManufactureMonth&#39;,
 &#39;ManufactureSensorType&#39;,
 &#39;ManufactureVoltage&#39;,
 &#39;FloatDiameter&#39;,
 &#39;SubsfcFloatPresence&#39;,
 &#39;DrogueType&#39;,
 &#39;DrogueLength&#39;,
 &#39;DrogueBallast&#39;,
 &#39;DragAreaAboveDrogue&#39;,
 &#39;DragAreaOfDrogue&#39;,
 &#39;DragAreaRatio&#39;,
 &#39;DrogueCenterDepth&#39;,
 &#39;DrogueDetectSensor&#39;,
 &#39;obs&#39;]
</pre></div>
</div>
</div>
</div>
<p>If we peak inside one of the field (or variable), we can see the associated <code class="docutils literal notranslate"><span class="pre">type</span></code>. For example, the drifters’ ID have a <code class="docutils literal notranslate"><span class="pre">type=subset_nb_drifters</span> <span class="pre">*</span> <span class="pre">int64</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">ID</span>  <span class="c1"># one variable</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [2592, 6428, ... 68246720, 68248530] type=&#39;500 * int64[parameters={&quot;attrs...&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>If we display the last field ‘obs’, we can see that it is a nested <em>Awkward Array</em> and contains all variables with <code class="docutils literal notranslate"><span class="pre">type=(subset_nb_drifters</span> <span class="pre">*</span> <span class="pre">var</span> <span class="pre">*</span> <span class="pre">dtype)</span></code> containing data along trajectories.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [{lon: [-52.4, -52.4, -52.4, ... 5, 5]}] type=&#39;500 * {&quot;lon&quot;: [var * float...&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>The library includes the function <code class="docutils literal notranslate"><span class="pre">ak.flatten()</span></code>, similar to <code class="docutils literal notranslate"><span class="pre">np.flatten()</span></code> to concatenate all observations for one variable into a unidimensional array. As an example, with ‘sst’:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total length of the data inside </span><span class="se">\&#39;</span><span class="s1">obs</span><span class="se">\&#39;</span><span class="s1"> field </span><span class="se">\&#39;</span><span class="s1">sst</span><span class="se">\&#39;</span><span class="s1"> are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="p">))</span><span class="si">:</span><span class="s1">,</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
<span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total length of the data inside &#39;obs&#39; field &#39;sst&#39; are 4,786,301.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [273, 273, 273, 273, ... 287, 288, 288] type=&#39;4786301 * float32&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>A nested structure is utilized to efficiently store N-dimensional dataset, in our case we first have the fields with dimension <code class="docutils literal notranslate"><span class="pre">['traj']</span></code>, followed by the fields with dimension <code class="docutils literal notranslate"><span class="pre">['obs']</span></code> stored inside the array <code class="docutils literal notranslate"><span class="pre">ds_ak.obs</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">fields</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;lon&#39;,
 &#39;lat&#39;,
 &#39;time&#39;,
 &#39;ids&#39;,
 &#39;ve&#39;,
 &#39;vn&#39;,
 &#39;gap&#39;,
 &#39;err_lat&#39;,
 &#39;err_lon&#39;,
 &#39;err_ve&#39;,
 &#39;err_vn&#39;,
 &#39;drogue_status&#39;,
 &#39;sst&#39;,
 &#39;sst1&#39;,
 &#39;sst2&#39;,
 &#39;err_sst&#39;,
 &#39;err_sst1&#39;,
 &#39;err_sst2&#39;,
 &#39;flg_sst&#39;,
 &#39;flg_sst1&#39;,
 &#39;flg_sst2&#39;]
</pre></div>
</div>
</div>
</div>
<p>For example, the type of the <code class="docutils literal notranslate"><span class="pre">sst</span></code> field, stored at <code class="docutils literal notranslate"><span class="pre">ds_ak.obs.sst</span></code>, is <code class="docutils literal notranslate"><span class="pre">17324</span> <span class="pre">*</span> <span class="pre">var</span> <span class="pre">*</span> <span class="pre">float32</span></code>. This means that there are 17324 trajectories of var<em>iable</em> size of float32`.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [[273, 273, 273, ... 287, 288, 288]] type=&#39;500 * [var * float32, paramete...&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>The data along the trajectory of a specific drifter can easily be retrieved using an index.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [273, 273, 273, 273, ... 280, 280, nan] type=&#39;1095 * float32&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>The same data can be extracted from the drifter ID:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">id_ex</span> <span class="o">=</span> <span class="n">ds_ak</span><span class="o">.</span><span class="n">ID</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># id of the ith trajectory as an example</span>
<span class="n">display</span><span class="p">(</span><span class="n">id_ex</span><span class="p">)</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">id_ex</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2592
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [273, 273, 273, 273, ... 280, 280, nan] type=&#39;1095 * float32&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>And the data along a specific trajectory can be accessed using a second index. As an example, the first sst value of the <code class="docutils literal notranslate"><span class="pre">i</span></code><sup>th</sup> trajectory:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># [K]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>273.47198486328125
</pre></div>
</div>
</div>
</div>
<p><em>Metadata</em> or <em>attributes</em> are store for the global Array <code class="docutils literal notranslate"><span class="pre">ds_ak.layout.parameters</span></code>, as well as for each individual variable (<code class="docutils literal notranslate"><span class="pre">ds_ak.obs.sst.layout.parameters</span></code>), similarly to global attributes and variable attributes in a NetCDF file. Those attributes are stored as a parameter in the <code class="docutils literal notranslate"><span class="pre">ak.RecordArray</span></code> (obtained with the <code class="docutils literal notranslate"><span class="pre">.layout</span></code> member), which summarizes the data fields, the types, and the shapes of the data itself.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">parameters</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;attrs&#39;: {&#39;title&#39;: &#39;Global Drifter Program hourly drifting buoy collection&#39;,
  &#39;history&#39;: &#39;Version 2.00.  Metadata from dirall.dat and deplog.dat&#39;,
  &#39;Conventions&#39;: &#39;CF-1.6&#39;,
  &#39;date_created&#39;: &#39;2022-05-20T14:48:40.763710&#39;,
  &#39;publisher_name&#39;: &#39;GDP Drifter DAC&#39;,
  &#39;publisher_email&#39;: &#39;aoml.dftr@noaa.gov&#39;,
  &#39;publisher_url&#39;: &#39;https://www.aoml.noaa.gov/phod/gdp&#39;,
  &#39;licence&#39;: &#39;MIT License&#39;,
  &#39;processing_level&#39;: &#39;Level 2 QC by GDP drifter DAC&#39;,
  &#39;metadata_link&#39;: &#39;https://www.aoml.noaa.gov/phod/dac/dirall.html&#39;,
  &#39;contributor_name&#39;: &#39;NOAA Global Drifter Program&#39;,
  &#39;contributor_role&#39;: &#39;Data Acquisition Center&#39;,
  &#39;institution&#39;: &#39;NOAA Atlantic Oceanographic and Meteorological Laboratory&#39;,
  &#39;acknowledgement&#39;: &#39;Elipot et al. (2022) to be submitted. Elipot et al. (2016). Global Drifter Program quality-controlled hourly interpolated data from ocean surface drifting buoys, version 2.00. NOAA National Centers for Environmental Information. https://agupubs.onlinelibrary.wiley.com/doi/full/10.1002/2016JC011716TBA. Accessed [date].&#39;,
  &#39;summary&#39;: &#39;Global Drifter Program hourly data&#39;}}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">parameters</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;attrs&#39;: {&#39;long_name&#39;: &#39;Fitted sea water temperature&#39;,
  &#39;units&#39;: &#39;Kelvin&#39;,
  &#39;comments&#39;: &#39;Estimated near-surface sea water temperature from drifting buoy measurements. It is the sum of the fitted near-surface non-diurnal sea water temperature and fitted diurnal sea water temperature anomaly. Discrepancies may occur because of rounding.&#39;}}
</pre></div>
</div>
</div>
</div>
<div class="section" id="awkward-array-test-1-geographical-binning-of-any-variable">
<h2><em>Awkward Array</em> test 1: Geographical binning of any variable<a class="headerlink" href="#awkward-array-test-1-geographical-binning-of-any-variable" title="Permalink to this headline">¶</a></h2>
<p>Again, we reconduct the first bench test: calculate the mean zonal velocity from all drifters of the dataset. For operations apply on the full dataset, we use the <code class="docutils literal notranslate"><span class="pre">ak.flatten()</span></code> function to retrieve the underlying unidimensional <em>NumPy</em> array containing all the observations for all drifters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">360</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">180</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">binned_statistic_2d</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> 
                                <span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> 
                                <span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">ve</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                <span class="n">statistic</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">,</span>
                                <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">])</span>
        
<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>
<span class="n">y_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>

<span class="c1"># get 1st and 99th percentiles of values to plot to get a useful range for the colorscale</span>
<span class="n">v1</span><span class="p">,</span><span class="n">v2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">ret</span><span class="o">.</span><span class="n">statistic</span><span class="o">.</span><span class="n">T</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">99</span><span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Robinson</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=-</span><span class="mi">180</span><span class="p">))</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">cmocean</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">cmocean</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">balance</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">v2</span><span class="p">,</span> <span class="n">pivot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x_c</span><span class="p">,</span> <span class="n">y_c</span><span class="p">,</span> 
                    <span class="n">ret</span><span class="o">.</span><span class="n">statistic</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> 
                    <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> 
                    <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
                    <span class="n">vmin</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">v2</span><span class="p">)</span>

<span class="c1"># gridlines and labels</span>
<span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
                  <span class="n">xlocs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="n">ylocs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                  <span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1"># add land and coastline</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">divider</span> <span class="o">=</span> <span class="n">make_axes_locatable</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">divider</span><span class="o">.</span><span class="n">append_axes</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;3%&quot;</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">axes_class</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pcm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">);</span>
<span class="n">cb</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Zonal velocity [m/s]&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_145_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_145_0.png" />
</div>
</div>
</div>
<div class="section" id="awkward-array-test-2-extract-a-given-region">
<h2><em>Awkward Array</em> test 2: Extract a given region<a class="headerlink" href="#awkward-array-test-2-extract-a-given-region" title="Permalink to this headline">¶</a></h2>
<p>With <em>Awkward Array</em>, the extraction of a subregion is slightly more complex than with <em>Pandas</em>, since here the dataset contains both variables with dimension <code class="docutils literal notranslate"><span class="pre">['traj']</span></code> and variables with dimension <code class="docutils literal notranslate"><span class="pre">['obs']</span></code>. Note that comparisons can be performed on the bidimensional non-regular <code class="docutils literal notranslate"><span class="pre">ak.Array</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">ds.obs.lon</span></code>, <code class="docutils literal notranslate"><span class="pre">ds.obs.lat</span></code>, <code class="docutils literal notranslate"><span class="pre">ds.obs.time</span></code>) without looping.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">retrieve_region_ak</span><span class="p">(</span><span class="n">ds</span><span class="p">:</span> <span class="n">ak</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">days</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ak</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;Subset the dataset for a region in space and time</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        ds: Awkward Array</span>
<span class="sd">        lon: longitude slice of the subregion</span>
<span class="sd">        lat: latitude slice of the subregion</span>
<span class="sd">        days: days slice of the subregion</span>
<span class="sd">    </span>
<span class="sd">    Returns: </span>
<span class="sd">        ds_subset: Dataset of the subregion</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">,</span> 
                            <span class="p">(</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lon</span> <span class="o">&gt;=</span> <span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
                                <span class="n">ds</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lon</span> <span class="o">&lt;=</span> <span class="n">lon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lat</span> <span class="o">&gt;=</span> <span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lat</span> <span class="o">&lt;=</span> <span class="n">lat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">time</span> <span class="o">&gt;=</span> <span class="n">days</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="n">ds</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;=</span> <span class="n">days</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                            <span class="p">)</span>
                           <span class="p">)</span>
    
    <span class="n">ds_s</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
    <span class="n">mask_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">ds_s</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_s</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">ids</span><span class="p">[</span><span class="n">mask</span><span class="p">])))</span>
    <span class="n">ds_s</span> <span class="o">=</span> <span class="n">ds_s</span><span class="p">[</span><span class="n">mask_id</span><span class="p">]</span>  <span class="c1"># mask for variables with dimension [&#39;traj&#39;]</span>
    <span class="n">ds_s</span><span class="o">.</span><span class="n">obs</span> <span class="o">=</span> <span class="n">ds_s</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="n">mask</span><span class="p">[</span><span class="n">mask_id</span><span class="p">]]</span> <span class="c1"># mask for variables with dimension [&#39;obs&#39;]</span>
    
    <span class="k">return</span> <span class="n">ds_s</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">lon</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">78</span><span class="p">]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>
<span class="n">day0</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
<span class="n">day1</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
<span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="n">day0</span><span class="p">,</span> <span class="n">day1</span><span class="p">]</span>
<span class="n">ds_subset</span> <span class="o">=</span> <span class="n">retrieve_region_ak</span><span class="p">(</span><span class="n">ds_ak</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<p>Here we plot the result as before but displaying the drogue status of drifters along their trajectory. <em>Note: the drogue is a sea anchor centered at 15 m depth that can become detached, after which the drifter is more strongly affected by surface winds and waves.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>

<span class="n">cond</span> <span class="o">=</span> <span class="n">ds_subset</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">drogue_status</span>  <span class="c1"># True: drogued, False: undrogued</span>
<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_subset</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="n">cond</span><span class="p">]),</span> <span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_subset</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="n">cond</span><span class="p">]),</span> 
               <span class="n">s</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;violet&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Drogued&#39;</span><span class="p">)</span>

<span class="n">pcm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_subset</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="o">~</span><span class="n">cond</span><span class="p">]),</span> <span class="n">ak</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ds_subset</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="o">~</span><span class="n">cond</span><span class="p">]),</span> 
               <span class="n">s</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Undrogued&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">95</span><span class="p">,</span> <span class="o">-</span><span class="mi">79</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LongitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LatitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Drogue status of each observation&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">markerscale</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_150_0.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_150_0.png" />
</div>
</div>
</div>
<div class="section" id="awkward-array-test-3-single-statistic-per-trajectory">
<h2><em>Awkward Array</em> test 3: Single statistic per trajectory<a class="headerlink" href="#awkward-array-test-3-single-statistic-per-trajectory" title="Permalink to this headline">¶</a></h2>
<p>Without the need for indices, we can perform reduction operation per trajectory directly with Awkward array, which simplify considerably the notations, and should ease the development of new functionality.</p>
<p><em>Note</em>: At this point, the dataset <code class="docutils literal notranslate"><span class="pre">ds_ak</span></code> is loaded in memory, which explains the speed of the operations. For larger dataset that cannot be held completely in memory, an option could be to interface with <a class="reference external" href="https://dask.org">Dask</a>, currently under development.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avg_sst</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">sst</span><span class="p">):</span>
    <span class="n">avg_sst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">avg_sst</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/pmiron/miniforge3/envs/research/lib/python3.9/site-packages/awkward/_connect/_numpy.py:36: RuntimeWarning: Mean of empty slice
  out = func(*args, **kwargs)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([275.79956055, 280.23269653, 277.82952881, 282.86587524,
       293.74093628, 293.33972168, 287.94949341, 271.26638794,
       293.47790527, 300.8218689 ])
</pre></div>
</div>
</div>
</div>
<p>For basic operations, we can also use <em>Awkward Array</em> to perform averages along a specific axis. In our situation, <code class="docutils literal notranslate"><span class="pre">ak.mean(lon,</span> <span class="pre">axis=1)</span></code> perform the same mean operation per trajectory, see that the type is then reduced to <code class="docutils literal notranslate"><span class="pre">subset_nb_drifters</span> <span class="pre">*</span> <span class="pre">float64</span></code>.</p>
<p>*Note: The <code class="docutils literal notranslate"><span class="pre">nan</span></code> versions of those operations (<code class="docutils literal notranslate"><span class="pre">ak.nanmean</span></code>, <code class="docutils literal notranslate"><span class="pre">ak.nanstd</span></code>, <code class="docutils literal notranslate"><span class="pre">ak.nanmax</span></code>, etc.) is not yet available but is currently in development.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avg_lon</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">avg_lon</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Array [-53.5, -6.68, -74.5, ... -151, -143] type=&#39;500 * ?float64&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>Applying more complex operation can be easily implemented with simple <code class="docutils literal notranslate"><span class="pre">for-loop</span></code>, since the indexing is taken care by <em>Awkward Array</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">periodogram_per_traj</span><span class="p">(</span><span class="n">uv</span><span class="p">):</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">24</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">[]</span>    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">uv</span><span class="p">)):</span>
        <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dt</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">uv</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">d</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">periodogram_per_traj</span><span class="p">(</span>
    <span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">ve</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">vn</span>
<span class="p">)</span>

<span class="n">benchmark_times</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
</pre></div>
</div>
</div>
</div>
<p>Each element of the list <code class="docutils literal notranslate"><span class="pre">ret</span></code> now contains the fast Fourier transform of the complex velocity <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">iv</span></code> per trajectory:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;Array [48, 52.7, 4.64, ... 16, 58.1, 131] type=&#39;1095 * float64&#39;&gt;,
 &lt;Array [3.42e+05, 5.33e+04, ... 3.41e+03] type=&#39;19132 * float64&#39;&gt;,
 &lt;Array [4.62e+04, 6.59e+03, ... 3.11e+03] type=&#39;6631 * float64&#39;&gt;,
 &lt;Array [3.26e+05, 6.37e+04, ... 5.03e+04] type=&#39;17906 * float64&#39;&gt;,
 &lt;Array [1.08e+03, 774, 311, ... 540, 2.21e+03] type=&#39;5738 * float64&#39;&gt;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="numba">
<h2>Numba<a class="headerlink" href="#numba" title="Permalink to this headline">¶</a></h2>
<p><em>Awkward Array</em> can be combined with <a class="reference external" href="https://numba.pydata.org">Numba</a> to accelerate calculations. Here, the goal is <em>not</em> to show the most efficient way of performing a calculation, but to present how simply adding the numba decorator <code class="docutils literal notranslate"><span class="pre">&#64;nb.njit</span></code> to a function can improved the performance by order of magnitude(s).</p>
<p>Here we show an example that calculates the kinetic energy of a drifter trajectory from its velocity time series:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">kinetic_energy</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="n">ke</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)):</span>
        <span class="n">ke</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ke</span>
        
<span class="nd">@nb</span><span class="o">.</span><span class="n">njit</span>
<span class="k">def</span> <span class="nf">kinetic_energy_nb</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="n">ke</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)):</span>
        <span class="n">ke</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ke</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select a random trajectory</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">ke</span> <span class="o">=</span> <span class="n">kinetic_energy</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">ve</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">vn</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 160 ms, sys: 2.02 ms, total: 162 ms
Wall time: 164 ms
</pre></div>
</div>
</div>
</div>
<p>The function is compiled just in time when we execute the function for the first time, future executions are <em>numba fast</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">kinetic_energy_nb</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">ve</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">vn</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0.18460563, 0.19851099, 0.19387937, ..., 0.32900888, 0.32915556,
       0.32936901])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>it -r10 -n10
<span class="n">ke2</span> <span class="o">=</span> <span class="n">kinetic_energy_nb</span><span class="p">(</span><span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">ve</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ds_ak</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">vn</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>705 µs ± 78.2 µs per loop (mean ± std. dev. of 10 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p>This results in more than a 500x sped up (!) for the same function simply by adding the <code class="docutils literal notranslate"><span class="pre">&#64;nb.njit</span></code> decorators!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">ds_ak</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">x_c</span><span class="p">,</span> <span class="n">y_c</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="discussion">
<h1>Discussion<a class="headerlink" href="#discussion" title="Permalink to this headline">¶</a></h1>
<p>We presented a commonly used Lagrangian oceanographic dataset (the GDP dataset) which is currently available as individual NetCDF files (one of the means of distribution). Next, we presented an efficient data structure, the contiguous ragged array, to combine the variables from these individual NetCDF files. We then compared three different packages–<a class="reference external" href="https://docs.xarray.dev/en/stable/"><em>xarray</em></a> , <a class="reference external" href="https://pandas.pydata.org/"><em>Pandas</em></a>, and <a class="reference external" href="https://awkward-array.readthedocs.io/en/latest/"><em>Awkward Array</em></a>—by performing typical Lagrangian workflow tasks.</p>
<p><strong>Xarray</strong></p>
<p><a class="reference external" href="https://docs.xarray.dev/en/stable/"><em>xarray</em></a>  is a well-known and established package used to perform operations on N-Dimensional datasets. It is natively integrated with <em>Dask</em> for parallel computing(not demonstrated in this Notebook), and allows users to <em>lazy load</em> data when the dataset is larger than the available memory of the computing environment.</p>
<p>However, it is not typically used with contiguous ragged array, so applying operation per trajectory requires to manually index through the dataset. One possibility is to set the size of the <em>Dask</em> <em>chunks</em> equals to the size of the trajectories, which allows for mapping operation in parallel per trajectory. However, the typical high number of chunks is less than ideal: it hinders performance since a simple operation like computing mean values across a dataset containing <em>n</em> trajectories requires to conduct <em>n</em> reading operation on the data file.</p>
<p><strong>Pandas</strong></p>
<p><a class="reference external" href="https://pandas.pydata.org/"><em>Pandas</em></a> is a predominantly used <em>Python</em> data analysis package. Since it is designed to perform operations on tabular data, it is required to form two <em>DataFrame</em> tables to represent the complete GDP dataset: one containing the variables with one value per trajectory (<code class="docutils literal notranslate"><span class="pre">['traj']</span></code>), and a second one containing the variables with one value per observations along the trajectory (<code class="docutils literal notranslate"><span class="pre">['obs']</span></code>). Unfortunately, this creates a separation the data and their metadata.</p>
<p>In this Notebook we used only a subset of the GDP dataset by randomly selecting only 500 trajectories. The data were therefore entirely contained within the active memory and the operations performed were <em>fast</em> and written in an elegant and intuitive fashion. However, if these operations are conducted on the entire dataset (17324 trajectories) we found the execution to be much slower than with <em>xarray</em> or <em>Awkward Array</em> which seem able to manage memory much more efficiently.</p>
<p><strong>Awkward Array</strong></p>
<p><a class="reference external" href="https://awkward-array.readthedocs.io/en/latest/"><em>Awkward Array</em></a> is a novel library specifically designed to deal with ragged and heterogeneous data (in type or size). With the example of the heterogeneous GDP dataset, we find that this library simplifies considerably Lagrangian analysis. Furthermore, integration with <em>Numba</em> allows to speed up calculations without major redesign. We anticipate that these two advantages will lead to faster development of Lagrangian analysis functions as part of the <em>CloudDrift</em> project.</p>
<p>Initially developed for particle physics applications, <em>Awkward Array</em> is missing some useful features (e.g. <em>html</em> representation, import from <em>NetCDF</em>, and especially <em>Dask</em> integration) when compared to more mature libraries like <em>xarray</em> or <em>Pandas</em>. During the development of this Notebook, we had the opportunity to engage with the authors of this library, and we plan on collaborating to fill those gaps during the development the <em>clouddrift</em> libraries. We believe that this collaboration will elevate both projects, which are sponsored by the National Science Foundation during similar time frame (<em>Awkward Array</em> <a class="reference external" href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2103945">#2103945</a>).</p>
<div class="section" id="benchmark-speed">
<h2>Benchmark speed<a class="headerlink" href="#benchmark-speed" title="Permalink to this headline">¶</a></h2>
<p>The following figure presents the benchmark times obtain for the current execution. As a comparison, we include a reference time (black dashed line) obtained on a 2021 Mac Mini with a 8 cores Apple M1 ARM processor, 16GB of RAM, running macOS Monterey 12.3.</p>
<p><em>Note: user should expect slower time on a Binder or Google Colab environment. We understand that a lot of factors can influence the results of this benchmark, and it might not be the most accurate when running on a Cloud environment, or on a local cluster with multiple users. We still believe it gives an interesting view of the performance of the three selected libraries.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ref_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.26</span><span class="p">,</span> <span class="mf">0.46</span><span class="p">,</span> <span class="mf">0.23</span><span class="p">],</span>  <span class="c1"># [s]</span>
                      <span class="p">[</span><span class="mf">3.21</span><span class="p">,</span> <span class="mf">0.06</span><span class="p">,</span> <span class="mf">0.38</span><span class="p">],</span>
                      <span class="p">[</span><span class="mf">3.22</span><span class="p">,</span> <span class="mf">0.13</span><span class="p">,</span> <span class="mf">0.32</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">bar_width</span> <span class="o">=</span> <span class="mf">0.2</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">benchmark_times</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span> <span class="n">bar_width</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s1">&#39;violet&#39;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Xarray&#39;</span><span class="p">)</span>

<span class="n">t2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">bar_width</span><span class="p">,</span> <span class="n">benchmark_times</span><span class="p">[</span><span class="mi">1</span><span class="p">,:],</span> <span class="n">bar_width</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s1">&#39;limegreen&#39;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pandas&#39;</span><span class="p">)</span>

<span class="n">t3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">bar_width</span><span class="p">,</span> <span class="n">benchmark_times</span><span class="p">[</span><span class="mi">2</span><span class="p">,:],</span> <span class="n">bar_width</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s1">&#39;aqua&#39;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Awkward Array&#39;</span><span class="p">)</span>

<span class="c1"># add reference times</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">bar_width</span><span class="p">,</span> <span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">bar_width</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ref_times</span><span class="p">[:,</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Reference time (Apple M1, 16GB)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Workflow tests&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Elapsed time [s] (lower is better)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Benchmark times per library&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">bar_width</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Binning&#39;</span><span class="p">,</span> <span class="s1">&#39;Region extraction&#39;</span><span class="p">,</span> <span class="s1">&#39;Periodogram per trajectory&#39;</span><span class="p">))</span>
<span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">by_label</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">handles</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">by_label</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">by_label</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x17ff4c8e0&gt;
</pre></div>
</div>
<img alt="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_176_1.png" src="../../_images/PM_05_Accelerating_Lagrangian_analyses_of_oceanic_data_benchmarking_typical_workflows_176_1.png" />
</div>
</div>
</div>
<div class="section" id="feedback">
<h2>Feedback<a class="headerlink" href="#feedback" title="Permalink to this headline">¶</a></h2>
<div>
<img src="https://cdn.pixabay.com/photo/2020/01/07/05/42/feedback-4746811__340.png" width="400"/>
</div>
<p>If you ran this notebook on a local computer, please help us guide the development of <em>CloudDrift</em> by sharing one or all following points to the discussion thread on <a class="reference external" href="https://github.com/Cloud-Drift/earthcube-meeting-2022/discussions/13">Github Discussion</a>:</p>
<ol class="simple">
<li><p>your comments on the ease of use of Xarray and/or Pandas and/or Awkward Arrays for Lagrangian data analysis;</p></li>
<li><p>the figure of your benchmark timings in the previous cell;</p></li>
<li><p>your system information generated by executing the next cell;</p></li>
<li><p>any other comments!</p></li>
</ol>
<p>Thanks!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># summary of the system for log purpose</span>
<span class="c1"># inspired from https://stackoverflow.com/a/58420504/1558320</span>
<span class="k">def</span> <span class="nf">getSystemInfo</span><span class="p">():</span>
    <span class="n">info</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;platform&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;platform-release&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">platform</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;platform-version&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">platform</span><span class="o">.</span><span class="n">version</span><span class="p">()</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;architecture&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">platform</span><span class="o">.</span><span class="n">machine</span><span class="p">()</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;processor&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">platform</span><span class="o">.</span><span class="n">processor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">info</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">cpu_freq</span><span class="p">(</span><span class="n">percpu</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">info</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;N/A&#39;</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;cores&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">(</span><span class="n">logical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;threads&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">psutil</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">(</span><span class="n">logical</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">&#39;ram&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">total</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1024.0</span> <span class="o">**</span><span class="mi">3</span><span class="p">)))</span><span class="o">+</span><span class="s2">&quot; GB&quot;</span>
    <span class="k">return</span> <span class="n">info</span>

<span class="n">getSystemInfo</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;platform&#39;: &#39;Darwin&#39;,
 &#39;platform-release&#39;: &#39;21.4.0&#39;,
 &#39;platform-version&#39;: &#39;Darwin Kernel Version 21.4.0: Fri Mar 18 00:47:26 PDT 2022; root:xnu-8020.101.4~15/RELEASE_ARM64_T8101&#39;,
 &#39;architecture&#39;: &#39;arm64&#39;,
 &#39;processor&#39;: &#39;arm&#39;,
 &#39;frequency&#39;: &#39;N/A&#39;,
 &#39;cores&#39;: 8,
 &#39;threads&#39;: 8,
 &#39;ram&#39;: &#39;16 GB&#39;}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="future-development">
<h2>Future development<a class="headerlink" href="#future-development" title="Permalink to this headline">¶</a></h2>
<p>We hope you will follow the development of <a class="reference external" href="https://github.com/Cloud-Drift">CloudDrift</a>, and encourage everyone to share this Notebook as well as submit feedback and comments to team members.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Elipot et al. (2016), “A global surface drifter dataset at hourly resolution”, J. Geophys. Res. Oceans, 121, <a class="reference external" href="https://doi.org/10.1002/2016JC011716">doi:10.1002/2016JC011716</a></p></li>
<li><p>Hansen, D. V., &amp; Poulain, P. M. (1996). Quality control and interpolations of WOCE-TOGA drifter data. Journal of Atmospheric and Oceanic Technology, 13(4), 900-909, <a class="reference external" href="http://dx.doi.org/10.1175/1520-0426(1996)013%3C0900:QCAIOW%3E2.0.CO;2">doi:10.1175/1520-0426(1996)013%3C0900:QCAIOW%3E2.0.CO;2</a></p></li>
</ul>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "research"
        },
        kernelOptions: {
            kernelName: "research",
            path: "./chapters/ec22_miron_etal"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'research'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="README.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">2022 EarthCube Annual meeting</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../ec22_okeefe_etal/README.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Handling Highly Imbalanced Data in Machine Learning Applications</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By EarthCube Office: Supported by NSF Award Number 1928208<br/>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>